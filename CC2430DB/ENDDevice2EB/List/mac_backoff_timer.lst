###############################################################################
#                                                                             #
# IAR 8051 C/C++ Compiler V7.30B/W32                    19/Mar/2013  19:57:57 #
# Copyright 2004-2007 IAR Systems. All rights reserved.                       #
#                                                                             #
#    Core               =  plain                                              #
#    Code model         =  banked                                             #
#    Data model         =  large                                              #
#    Calling convention =  xdata reentrant                                    #
#    Constant location  =  data                                               #
#    Dptr setup         =  1,16                                               #
#    Source file        =  C:\Texas Instruments\ZStack-1.4.3-1.2.1\Components #
#                          \mac\low_level\srf03\mac_backoff_timer.c           #
#    Command line       =  -f "C:\Texas Instruments\ZStack-1.4.3-1.2.1\Projec #
#                          ts\zstack\Samples\cc2430-zstack-adxl345\CC2430DB\. #
#                          .\..\..\Tools\CC2430DB\f8wEndev.cfg" (-DCPU32MHZ   #
#                          -DFORCE_MAC_NEAR -DROOT=__near_func                #
#                          -DMAC_OPT_FFD=0 -DBLINK_LEDS "-DCONST=const        #
#                          __code" -DGENERIC=__generic) -f "C:\Texas          #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\Tools #
#                          \CC2430DB\f8wConfig.cfg" (-DSECURE=0               #
#                          -DDEFAULT_CHANLIST=0x00000800                      #
#                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                       #
#                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MA #
#                          SK=0x007F -DBEACON_REQUEST_DELAY=100               #
#                          -DBEACON_REQ_DELAY_MASK=0x00FF                     #
#                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_PO #
#                          LLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7             #
#                          -DMAX_RREQ_ENTRIES=10 -DAPSC_MAX_FRAME_RETRIES=3   #
#                          -DNWK_MAX_DATA_RETRIES=2                           #
#                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9         #
#                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=20           #
#                          -DNWK_MAX_BINDING_ENTRIES=10                       #
#                          -DMAX_BINDING_CLUSTER_IDS=5 "-DDEFAULT_KEY={0x01,  #
#                          0x03, 0x05, 0x07, 0x09, 0x0B, 0x0D, 0x0F, 0x00,    #
#                          0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C, 0x0D}"         #
#                          -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000        #
#                          -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100)   #
#                          -DREJOIN_POLL_RATE=440 "C:\Texas                   #
#                          Instruments\ZStack-1.4.3-1.2.1\Components\mac\low_ #
#                          level\srf03\mac_backoff_timer.c" -D CC2430EB -D    #
#                          AXD_END -D AXD_END_B -D NWK_AUTO_POLL -D           #
#                          REFLECTOR -D xZTOOL_P1 -D xMT_TASK -D              #
#                          xMT_ZDO_FUNC -D xLCD_SUPPORTED=DEBUG -D            #
#                          xPOWER_SAVING -lC "C:\Texas                        #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\ENDDevice2EB\L #
#                          ist\" -lA "C:\Texas Instruments\ZStack-1.4.3-1.2.1 #
#                          \Projects\zstack\Samples\cc2430-zstack-adxl345\CC2 #
#                          430DB\ENDDevice2EB\List\" --diag_suppress          #
#                          Pe001,Pa010 --diag_remark pe550 -o "C:\Texas       #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\ENDDevice2EB\O #
#                          bj\" -e --require_prototypes -z2 --no_cse          #
#                          --no_unroll --no_inline --no_code_motion           #
#                          --no_tbaa --debug --core=plain --dptr=16,1         #
#                          --data_model=large --code_model=banked             #
#                          --calling_convention=xdata_reentrant               #
#                          --place_constants=data --nr_virtual_regs 8 -I      #
#                          "C:\Texas Instruments\ZStack-1.4.3-1.2.1\Projects\ #
#                          zstack\Samples\cc2430-zstack-adxl345\CC2430DB\"    #
#                          -I "C:\Texas Instruments\ZStack-1.4.3-1.2.1\Projec #
#                          ts\zstack\Samples\cc2430-zstack-adxl345\CC2430DB\. #
#                          .\SOURCE\" -I "C:\Texas Instruments\ZStack-1.4.3-1 #
#                          .2.1\Projects\zstack\Samples\cc2430-zstack-adxl345 #
#                          \CC2430DB\..\Drivers\" -I "C:\Texas                #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\ZMAIN #
#                          \TI2430DB\" -I "C:\Texas                           #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\MT\" -I "C:\Texas                      #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\HAL\INCLUDE\" -I "C:\Texas             #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\HAL\TARGET\CC2430EB\" -I "C:\Texas     #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\OSAL\MCU\CCSOC\" -I "C:\Texas          #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\OSAL\INCLUDE\" -I "C:\Texas            #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\STACK\AF\" -I "C:\Texas                #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\STACK\NWK\" -I "C:\Texas               #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\STACK\SEC\" -I "C:\Texas               #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\STACK\SYS\" -I "C:\Texas               #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\STACK\ZDO\" -I "C:\Texas               #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\ZMAC\F8W\" -I "C:\Texas                #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\ZMAC\" -I "C:\Texas                    #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\SERVICES\SADDR\" -I "C:\Texas          #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\SERVICES\SDATA\" -I "C:\Texas          #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\MAC\INCLUDE\" -I "C:\Texas             #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\MAC\HIGH_LEVEL\" -I "C:\Texas          #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\MAC\LOW_LEVEL\SRF03\" -I "C:\Texas     #
#                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sam #
#                          ples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\.. #
#                          \COMPONENTS\MAC\LOW_LEVEL\SRF03\SINGLE_CHIP\" -I   #
#                          "C:\Program Files\IAR Systems\Embedded Workbench   #
#                          4.0 Evaluation version\8051\INC\" -I "C:\Program   #
#                          Files\IAR Systems\Embedded Workbench 4.0           #
#                          Evaluation version\8051\INC\CLIB\"                 #
#    List file          =  C:\Texas Instruments\ZStack-1.4.3-1.2.1\Projects\z #
#                          stack\Samples\cc2430-zstack-adxl345\CC2430DB\ENDDe #
#                          vice2EB\List\mac_backoff_timer.lst                 #
#    Object file        =  C:\Texas Instruments\ZStack-1.4.3-1.2.1\Projects\z #
#                          stack\Samples\cc2430-zstack-adxl345\CC2430DB\ENDDe #
#                          vice2EB\Obj\mac_backoff_timer.r51                  #
#                                                                             #
#                                                                             #
###############################################################################

C:\Texas Instruments\ZStack-1.4.3-1.2.1\Components\mac\low_level\srf03\mac_backoff_timer.c
      1          /**************************************************************************************************
      2            Filename:       mac_backoff_timer.c
      3            Revised:        $Date: 2007-10-29 22:38:47 -0700 (Mon, 29 Oct 2007) $
      4            Revision:       $Revision: 15812 $
      5          
      6            Description:    Describe the purpose and contents of the file.
      7          
      8          
      9            Copyright 2006-2007 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, 
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE, 
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com. 
     38          **************************************************************************************************/
     39          
     40          /* ------------------------------------------------------------------------------------------------
     41           *                                           Includes
     42           * ------------------------------------------------------------------------------------------------
     43           */
     44          
     45          /* hal */
     46          #include "hal_types.h"
     47          #include "hal_mcu.h"

   \                                 In  segment SFR_AN, at 0xa6
   \   unsigned char volatile __sfr T2TLD
   \                     T2TLD:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa7
   \   unsigned char volatile __sfr T2THD
   \                     T2THD:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xa8
   \   union <unnamed> volatile __sfr _A_IEN0
   \                     _A_IEN0:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xc3
   \   unsigned char volatile __sfr T2CNF
   \                     T2CNF:
   \   000000                DS 1
     48          
     49          /* high-level specific */
     50          #include "mac_spec.h"
     51          
     52          /* exported low-level */
     53          #include "mac_low_level.h"
     54          
     55          /* low-level specific */
     56          #include "mac_backoff_timer.h"
     57          #include "mac_tx.h"
     58          
     59          /* target specific */
     60          #include "mac_radio_defs.h"
     61          
     62          /* debug */
     63          #include "mac_assert.h"
     64          
     65          
     66          /* ------------------------------------------------------------------------------------------------
     67           *                                            Defines
     68           * ------------------------------------------------------------------------------------------------
     69           */
     70          #define COMPARE_STATE_ROLLOVER_BV                 BV(0)
     71          #define COMPARE_STATE_TRIGGER_BV                  BV(1)
     72          #define COMPARE_STATE_ARM_BV                      BV(2)
     73          
     74          #define COMPARE_STATE_TRIGGER                     COMPARE_STATE_TRIGGER_BV
     75          #define COMPARE_STATE_ROLLOVER                    COMPARE_STATE_ROLLOVER_BV
     76          #define COMPARE_STATE_ROLLOVER_AND_TRIGGER        (COMPARE_STATE_ROLLOVER_BV | COMPARE_STATE_TRIGGER_BV)
     77          #define COMPARE_STATE_ROLLOVER_AND_ARM_TRIGGER    (COMPARE_STATE_ROLLOVER_BV | COMPARE_STATE_ARM_BV)
     78          
     79          
     80          /*
     81           *  The datasheet mentions a small delay on both receive and transmit side of approximately
     82           *  two microseconds.  The precise characterization is given below.
     83           *  (This data is not given in rev 1.03 datasheet)
     84           */
     85          #define RX_TX_PROP_DELAY_AVG_USEC         ((MAC_RADIO_RX_TX_PROP_DELAY_MIN_USEC + MAC_RADIO_RX_TX_PROP_DELAY_MAX_USEC) / 2)
     86          #define RX_TX_PROP_DELAY_AVG_TIMER_TICKS  ((uint16)(MAC_RADIO_TIMER_TICKS_PER_USEC() * RX_TX_PROP_DELAY_AVG_USEC + 0.5))
     87          
     88          /*
     89           *  For slotted receives, the SFD signal is expected to occur on a specifc symbol boundary.
     90           *  This does *not* correspond to the backoff boundary.  The SFD signal occurs at an
     91           *  offset from the backoff boundary.  This is done for efficiency of related algorithms.
     92           *
     93           *  Once transmit is strobed there is a fixed delay until the SFD signal occurs.  The frame
     94           *  does not start over-the-air transmit until after an internal radio delay of 12 symbols.
     95           *  Once transmitting over-the-air, the preamble is sent (8 symbols) followed by the
     96           *  SFD field (2 symbols). After the SFD field completes, the SFD signal occurs.  This
     97           *  adds up to a total of 22 symbols from strobe to SFD signal.
     98           *
     99           *  Since 22 symbols spans more than a backoff (20 symbols) the modulus operation is used
    100           *  to find the symbol offset which is 2 symbols.
    101           *
    102           *  This math is derived formally via the pre-processor.
    103           */
    104          #define SYMBOLS_FROM_STROBE_TO_PREAMBLE   12 /* from datasheet */
    105          #define SYMBOLS_FROM_PREAMBLE_TO_SFD      (MAC_SPEC_PREAMBLE_FIELD_LENGTH + MAC_SPEC_SFD_FIELD_LENGTH)
    106          #define SYMBOLS_FROM_STROBE_TO_SFD        (SYMBOLS_FROM_STROBE_TO_PREAMBLE + SYMBOLS_FROM_PREAMBLE_TO_SFD)
    107          #define SYMBOLS_EXPECTED_AT_SFD           (SYMBOLS_FROM_STROBE_TO_SFD % MAC_A_UNIT_BACKOFF_PERIOD)
    108          
    109          /* after all that formal math, make sure the result is as expected */
    110          #if (SYMBOLS_EXPECTED_AT_SFD != 2)
    111          #error "ERROR! Internal problem with pre-processor math of slotted alignment."
    112          #endif
    113          
    114          
    115          /*
    116           *  The expected SFD signal occurs at the symbol offset *plus* a small internal propagation delay
    117           *  internal to the radio.  This delay is given as the sum of a receive side delay and a transmit
    118           *  side delay.  When this delay is subtracted from the internal timer, the internal time base
    119           *  actually becomes the actual receive time *minus* the transmit delay.  This works out though.
    120           *  The transmit logic does *not* take into account this delay.  Since the timer is skewed by the
    121           *  transmit delay already, the transmits go out precisely on time.
    122           */
    123          #define TIMER_TICKS_EXPECTED_AT_SFD   ((SYMBOLS_EXPECTED_AT_SFD * MAC_RADIO_TIMER_TICKS_PER_SYMBOL()) \
    124                                                    + RX_TX_PROP_DELAY_AVG_TIMER_TICKS)
    125          
    126          
    127          /* ------------------------------------------------------------------------------------------------
    128           *                                         Local Variables
    129           * ------------------------------------------------------------------------------------------------
    130           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    131          static uint32 backoffTimerRollover;
   \                     backoffTimerRollover:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    132          static uint32 backoffTimerTrigger;
   \                     backoffTimerTrigger:
   \   000000                DS 4
   \   000004                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    133          static uint8 compareState;
   \                     compareState:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    134          
    135          
    136          /**************************************************************************************************
    137           * @fn          macBackoffTimerInit
    138           *
    139           * @brief       Intializes backoff timer.
    140           *
    141           * @param       none
    142           *
    143           * @return      none
    144           **************************************************************************************************
    145           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    146          void macBackoffTimerInit(void)
   \                     macBackoffTimerInit:
    147          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
    148            compareState = COMPARE_STATE_ROLLOVER;
   \   000005   7401         MOV     A,#0x1
   \   000007   90....       MOV     DPTR,#compareState
   \   00000A   F0           MOVX    @DPTR,A
    149            MAC_RADIO_BACKOFF_SET_COUNT(0);
   \   00000B                ; Setup parameters for call to function macMcuOverflowSetCount
   \   00000B   90....       MOV     DPTR,#__Constant_0
   \   00000E   78..         MOV     R0,#?V0 + 0
   \   000010   12....       LCALL   ?L_MOV_X
   \   000013   AA..         MOV     R2,?V0 + 0
   \   000015   AB..         MOV     R3,?V0 + 1
   \   000017   AC..         MOV     R4,?V0 + 2
   \   000019   AD..         MOV     R5,?V0 + 3
   \   00001B   12....       LCALL   ??macMcuOverflowSetCount?relay
    150            macBackoffTimerSetRollover(MAC_BACKOFF_TIMER_DEFAULT_ROLLOVER);
   \   00001E                ; Setup parameters for call to function macBackoffTimerSetRollover
   \   00001E   90....       MOV     DPTR,#__Constant_c0000
   \   000021   78..         MOV     R0,#?V0 + 0
   \   000023   12....       LCALL   ?L_MOV_X
   \   000026   AA..         MOV     R2,?V0 + 0
   \   000028   AB..         MOV     R3,?V0 + 1
   \   00002A   AC..         MOV     R4,?V0 + 2
   \   00002C   AD..         MOV     R5,?V0 + 3
   \   00002E   12....       LCALL   ??macBackoffTimerSetRollover?relay
    151            MAC_RADIO_BACKOFF_COMPARE_CLEAR_INTERRUPT();
   \   000031   75C3C3       MOV     0xc3,#-0x3d
    152            MAC_RADIO_BACKOFF_COMPARE_ENABLE_INTERRUPT();
   \   000034                ; Setup parameters for call to function macMcuOrT2PEROF2
   \   000034   7920         MOV     R1,#0x20
   \   000036   12....       LCALL   ??macMcuOrT2PEROF2?relay
    153          }
   \   000039   7F04         MOV     R7,#0x4
   \   00003B   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   00003E                REQUIRE T2CNF
    154          
    155          
    156          /**************************************************************************************************
    157           * @fn          macBackoffTimerReset
    158           *
    159           * @brief       Resets backoff timer.
    160           *
    161           * @param       none
    162           *
    163           * @return      none
    164           **************************************************************************************************
    165           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    166          void macBackoffTimerReset(void)
   \                     macBackoffTimerReset:
    167          {
   \   000000   C082         PUSH    DPL
   \   000002   C083         PUSH    DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    168            MAC_RADIO_BACKOFF_COMPARE_DISABLE_INTERRUPT();
   \   000004                ; Setup parameters for call to function macMcuAndT2PEROF2
   \   000004   79DF         MOV     R1,#-0x21
   \   000006   12....       LCALL   ??macMcuAndT2PEROF2?relay
    169            macBackoffTimerInit();
   \   000009                ; Setup parameters for call to function macBackoffTimerInit
   \   000009   12....       LCALL   ??macBackoffTimerInit?relay
    170          }
   \   00000C   D083         POP     DPH
   \   00000E   D082         POP     DPL
   \   000010   02....       LJMP    ?BRET
    171          
    172          
    173          /**************************************************************************************************
    174           * @fn          macBackoffTimerSetRollover
    175           *
    176           * @brief       Set rollover count of backoff timer.
    177           *
    178           * @param       rolloverBackoff - backoff count where count is reset to zero
    179           *
    180           * @return      none
    181           **************************************************************************************************
    182           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    183          void macBackoffTimerSetRollover(uint32 rolloverBackoff)
   \                     macBackoffTimerSetRollover:
    184          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 0,R2
   \   000007   8B..         MOV     ?V0 + 1,R3
   \   000009   8C..         MOV     ?V0 + 2,R4
   \   00000B   8D..         MOV     ?V0 + 3,R5
    185            halIntState_t  s;
    186          
    187            MAC_ASSERT(rolloverBackoff > MAC_RADIO_BACKOFF_COUNT());  /* rollover value must be greater than count */
   \   00000D                ; Setup parameters for call to function macMcuOverflowCount
   \   00000D   12....       LCALL   ??macMcuOverflowCount?relay
   \   000010   8A..         MOV     ?V0 + 4,R2
   \   000012   8B..         MOV     ?V0 + 5,R3
   \   000014   8C..         MOV     ?V0 + 6,R4
   \   000016   8D..         MOV     ?V0 + 7,R5
   \   000018   78..         MOV     R0,#?V0 + 0
   \   00001A   79..         MOV     R1,#?V0 + 4
   \   00001C   12....       LCALL   ?UL_GT
   \   00001F   4003         JC      ??macBackoffTimerSetRollover_0
   \   000021                ; Setup parameters for call to function halAssertHandler
   \   000021   12....       LCALL   ??halAssertHandler?relay
    188          
    189            HAL_ENTER_CRITICAL_SECTION(s);
   \                     ??macBackoffTimerSetRollover_0:
   \   000024   A2AF         MOV     C,0xa8.7
   \   000026   E4           CLR     A
   \   000027   92E0         MOV     0xE0 /* A   */.0,C
   \   000029   FE           MOV     R6,A
   \   00002A   C2AF         CLR     0xa8.7
    190            backoffTimerRollover = rolloverBackoff;
   \   00002C   90....       MOV     DPTR,#backoffTimerRollover
   \   00002F   78..         MOV     R0,#?V0 + 0
   \   000031   12....       LCALL   ?L_MOV_TO_X
    191            MAC_RADIO_BACKOFF_SET_COMPARE(rolloverBackoff);
   \   000034                ; Setup parameters for call to function macMcuOverflowSetCompare
   \   000034   AA..         MOV     R2,?V0 + 0
   \   000036   AB..         MOV     R3,?V0 + 1
   \   000038   AC..         MOV     R4,?V0 + 2
   \   00003A   AD..         MOV     R5,?V0 + 3
   \   00003C   12....       LCALL   ??macMcuOverflowSetCompare?relay
    192            HAL_EXIT_CRITICAL_SECTION(s);
   \   00003F   EE           MOV     A,R6
   \   000040   A2E0         MOV     C,0xE0 /* A   */.0
   \   000042   92AF         MOV     0xa8.7,C
    193          }
   \   000044   7F08         MOV     R7,#0x8
   \   000046   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000049                REQUIRE _A_IEN0
    194          
    195          
    196          /**************************************************************************************************
    197           * @fn          macBackoffTimerSetCount
    198           *
    199           * @brief       Sets the count of the backoff timer.
    200           *
    201           * @param       backoff - new count
    202           *
    203           * @return      none
    204           **************************************************************************************************
    205           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    206          void macBackoffTimerSetCount(uint32 backoff)
   \                     macBackoffTimerSetCount:
    207          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 4,R2
   \   000007   8B..         MOV     ?V0 + 5,R3
   \   000009   8C..         MOV     ?V0 + 6,R4
   \   00000B   8D..         MOV     ?V0 + 7,R5
    208            halIntState_t  s;
    209          
    210            MAC_ASSERT(compareState == COMPARE_STATE_ROLLOVER);   /* trigger cannot be active if changing count */
   \   00000D   90....       MOV     DPTR,#compareState
   \   000010   E0           MOVX    A,@DPTR
   \   000011   6401         XRL     A,#0x1
   \   000013   6003         JZ      ??macBackoffTimerSetCount_0
   \   000015                ; Setup parameters for call to function halAssertHandler
   \   000015   12....       LCALL   ??halAssertHandler?relay
    211            MAC_ASSERT(backoff < backoffTimerRollover);  /* count must be less than rollover value */
   \                     ??macBackoffTimerSetCount_0:
   \   000018   90....       MOV     DPTR,#backoffTimerRollover
   \   00001B   78..         MOV     R0,#?V0 + 0
   \   00001D   12....       LCALL   ?L_MOV_X
   \   000020   78..         MOV     R0,#?V0 + 0
   \   000022   79..         MOV     R1,#?V0 + 4
   \   000024   12....       LCALL   ?UL_GT
   \   000027   4003         JC      ??macBackoffTimerSetCount_1
   \   000029                ; Setup parameters for call to function halAssertHandler
   \   000029   12....       LCALL   ??halAssertHandler?relay
    212            MAC_ASSERT(!(backoff & 0x80000000));  /* count must not represent negative value for int32 */
   \                     ??macBackoffTimerSetCount_1:
   \   00002C   85....       MOV     ?V0 + 0,?V0 + 4
   \   00002F   85....       MOV     ?V0 + 1,?V0 + 5
   \   000032   85....       MOV     ?V0 + 2,?V0 + 6
   \   000035   85....       MOV     ?V0 + 3,?V0 + 7
   \   000038   90....       MOV     DPTR,#__Constant_80000000
   \   00003B   78..         MOV     R0,#?V0 + 0
   \   00003D   12....       LCALL   ?L_AND_X
   \   000040   90....       MOV     DPTR,#__Constant_0
   \   000043   78..         MOV     R0,#?V0 + 0
   \   000045   12....       LCALL   ?L_EQ_X
   \   000048   6003         JZ      ??macBackoffTimerSetCount_2
   \   00004A                ; Setup parameters for call to function halAssertHandler
   \   00004A   12....       LCALL   ??halAssertHandler?relay
    213          
    214            HAL_ENTER_CRITICAL_SECTION(s);
   \                     ??macBackoffTimerSetCount_2:
   \   00004D   A2AF         MOV     C,0xa8.7
   \   00004F   E4           CLR     A
   \   000050   92E0         MOV     0xE0 /* A   */.0,C
   \   000052   FE           MOV     R6,A
   \   000053   C2AF         CLR     0xa8.7
    215            MAC_RADIO_BACKOFF_SET_COUNT(backoff);
   \   000055                ; Setup parameters for call to function macMcuOverflowSetCount
   \   000055   AA..         MOV     R2,?V0 + 4
   \   000057   AB..         MOV     R3,?V0 + 5
   \   000059   AC..         MOV     R4,?V0 + 6
   \   00005B   AD..         MOV     R5,?V0 + 7
   \   00005D   12....       LCALL   ??macMcuOverflowSetCount?relay
    216            HAL_EXIT_CRITICAL_SECTION(s);
   \   000060   EE           MOV     A,R6
   \   000061   A2E0         MOV     C,0xE0 /* A   */.0
   \   000063   92AF         MOV     0xa8.7,C
    217          }
   \   000065   7F08         MOV     R7,#0x8
   \   000067   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   00006A                REQUIRE _A_IEN0
    218          
    219          
    220          /**************************************************************************************************
    221           * @fn          macBackoffTimerCount
    222           *
    223           * @brief       Returns the current backoff count.
    224           *
    225           * @param       none
    226           *
    227           * @return      current backoff count
    228           **************************************************************************************************
    229           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    230          uint32 macBackoffTimerCount(void)
   \                     macBackoffTimerCount:
    231          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
    232            halIntState_t  s;
    233            uint32 backoffCount;
    234          
    235            HAL_ENTER_CRITICAL_SECTION(s);
   \   000005   A2AF         MOV     C,0xa8.7
   \   000007   E4           CLR     A
   \   000008   92E0         MOV     0xE0 /* A   */.0,C
   \   00000A   FE           MOV     R6,A
   \   00000B   C2AF         CLR     0xa8.7
    236            backoffCount = MAC_RADIO_BACKOFF_COUNT();
   \   00000D                ; Setup parameters for call to function macMcuOverflowCount
   \   00000D   12....       LCALL   ??macMcuOverflowCount?relay
   \   000010   8A..         MOV     ?V0 + 0,R2
   \   000012   8B..         MOV     ?V0 + 1,R3
   \   000014   8C..         MOV     ?V0 + 2,R4
   \   000016   8D..         MOV     ?V0 + 3,R5
   \   000018   85....       MOV     ?V0 + 4,?V0 + 0
   \   00001B   85....       MOV     ?V0 + 5,?V0 + 1
   \   00001E   85....       MOV     ?V0 + 6,?V0 + 2
   \   000021   85....       MOV     ?V0 + 7,?V0 + 3
    237            HAL_EXIT_CRITICAL_SECTION(s);
   \   000024   EE           MOV     A,R6
   \   000025   A2E0         MOV     C,0xE0 /* A   */.0
   \   000027   92AF         MOV     0xa8.7,C
    238            
    239          #ifdef MAC_RADIO_FEATURE_HARDWARE_OVERFLOW_NO_ROLLOVER
    240            /*
    241             *  Extra processing is required if the radio has a special hardware overflow
    242             *  count feature.  Unfortunately this feature does not provide for setting a
    243             *  rollover value.  This must be done manually.
    244             *
    245             *  This means there is a small window in time when reading the hardware count
    246             *  will be inaccurate.  It's possible it could be one more than the allowable
    247             *  count.  This happens if the count has just incremented beyond the maximum
    248             *  and is queried before the ISR has a chance to run and reset the backoff
    249             *  count back to zero.  (Pure software implementation of backoff count does
    250             *  not have this problem.)
    251             *
    252             *  To solve this, before returning a value for the backoff count, the value
    253             *  must be tested to see if it is beyond the maximum value.  If so, a rollover
    254             *  interrupt that will set backoff count to zero is imminent.  In that case,
    255             *  the correct backoff count of zero is returned.
    256             */
    257            if (backoffCount >= backoffTimerRollover)
   \   000029   90....       MOV     DPTR,#backoffTimerRollover
   \   00002C   78..         MOV     R0,#?V0 + 0
   \   00002E   12....       LCALL   ?L_MOV_X
   \   000031   78..         MOV     R0,#?V0 + 0
   \   000033   79..         MOV     R1,#?V0 + 4
   \   000035   12....       LCALL   ?UL_GT
   \   000038   400A         JC      ??macBackoffTimerCount_0
    258            {
    259              return(0);
   \   00003A   7A00         MOV     R2,#0x0
   \   00003C   7B00         MOV     R3,#0x0
   \   00003E   7C00         MOV     R4,#0x0
   \   000040   7D00         MOV     R5,#0x0
   \   000042   8008         SJMP    ??macBackoffTimerCount_1
    260            }
    261          #endif
    262            
    263            return(backoffCount);
   \                     ??macBackoffTimerCount_0:
   \   000044   AA..         MOV     R2,?V0 + 4
   \   000046   AB..         MOV     R3,?V0 + 5
   \   000048   AC..         MOV     R4,?V0 + 6
   \   00004A   AD..         MOV     R5,?V0 + 7
   \                     ??macBackoffTimerCount_1:
   \   00004C   7F08         MOV     R7,#0x8
   \   00004E   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000051                REQUIRE _A_IEN0
    264          }
    265          
    266          
    267          /**************************************************************************************************
    268           * @fn          macBackoffTimerCapture
    269           *
    270           * @brief       Returns the most recently captured backoff count
    271           *
    272           * @param       none
    273           *
    274           * @return      last backoff count that was captured
    275           **************************************************************************************************
    276           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    277          uint32 macBackoffTimerCapture(void)
   \                     macBackoffTimerCapture:
    278          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
    279            halIntState_t  s;
    280            uint32 backoffCapture;
    281          
    282            HAL_ENTER_CRITICAL_SECTION(s);
   \   000005   A2AF         MOV     C,0xa8.7
   \   000007   E4           CLR     A
   \   000008   92E0         MOV     0xE0 /* A   */.0,C
   \   00000A   FE           MOV     R6,A
   \   00000B   C2AF         CLR     0xa8.7
    283            backoffCapture = MAC_RADIO_BACKOFF_CAPTURE();
   \   00000D                ; Setup parameters for call to function macMcuOverflowCapture
   \   00000D   12....       LCALL   ??macMcuOverflowCapture?relay
   \   000010   8A..         MOV     ?V0 + 0,R2
   \   000012   8B..         MOV     ?V0 + 1,R3
   \   000014   8C..         MOV     ?V0 + 2,R4
   \   000016   8D..         MOV     ?V0 + 3,R5
   \   000018   85....       MOV     ?V0 + 4,?V0 + 0
   \   00001B   85....       MOV     ?V0 + 5,?V0 + 1
   \   00001E   85....       MOV     ?V0 + 6,?V0 + 2
   \   000021   85....       MOV     ?V0 + 7,?V0 + 3
    284            HAL_EXIT_CRITICAL_SECTION(s);
   \   000024   EE           MOV     A,R6
   \   000025   A2E0         MOV     C,0xE0 /* A   */.0
   \   000027   92AF         MOV     0xa8.7,C
    285          
    286          #ifdef MAC_RADIO_FEATURE_HARDWARE_OVERFLOW_NO_ROLLOVER
    287            /*
    288             *  See other instance of this #ifdef for detailed comments.
    289             *  Those comments apply to the backoff capture value too.
    290             */
    291            if (backoffCapture >= backoffTimerRollover)
   \   000029   90....       MOV     DPTR,#backoffTimerRollover
   \   00002C   78..         MOV     R0,#?V0 + 0
   \   00002E   12....       LCALL   ?L_MOV_X
   \   000031   78..         MOV     R0,#?V0 + 0
   \   000033   79..         MOV     R1,#?V0 + 4
   \   000035   12....       LCALL   ?UL_GT
   \   000038   400A         JC      ??macBackoffTimerCapture_0
    292            {
    293              return(0);
   \   00003A   7A00         MOV     R2,#0x0
   \   00003C   7B00         MOV     R3,#0x0
   \   00003E   7C00         MOV     R4,#0x0
   \   000040   7D00         MOV     R5,#0x0
   \   000042   8008         SJMP    ??macBackoffTimerCapture_1
    294            }
    295          #endif
    296            
    297            return(backoffCapture);
   \                     ??macBackoffTimerCapture_0:
   \   000044   AA..         MOV     R2,?V0 + 4
   \   000046   AB..         MOV     R3,?V0 + 5
   \   000048   AC..         MOV     R4,?V0 + 6
   \   00004A   AD..         MOV     R5,?V0 + 7
   \                     ??macBackoffTimerCapture_1:
   \   00004C   7F08         MOV     R7,#0x8
   \   00004E   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000051                REQUIRE _A_IEN0
    298          }
    299          
    300          
    301          /**************************************************************************************************
    302           * @fn          macBackoffTimerGetTrigger
    303           *
    304           * @brief       Returns the trigger set for the backoff timer.
    305           *
    306           * @param       none
    307           *
    308           * @return      backoff count of trigger
    309           **************************************************************************************************
    310           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    311          uint32 macBackoffTimerGetTrigger(void)
   \                     macBackoffTimerGetTrigger:
    312          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
    313            return(backoffTimerTrigger);
   \   000005   90....       MOV     DPTR,#backoffTimerTrigger
   \   000008   78..         MOV     R0,#?V0 + 0
   \   00000A   12....       LCALL   ?L_MOV_X
   \   00000D   AA..         MOV     R2,?V0 + 0
   \   00000F   AB..         MOV     R3,?V0 + 1
   \   000011   AC..         MOV     R4,?V0 + 2
   \   000013   AD..         MOV     R5,?V0 + 3
   \   000015   7F04         MOV     R7,#0x4
   \   000017   02....       LJMP    ?BANKED_LEAVE_XDATA
    314          }
    315          
    316          
    317          /**************************************************************************************************
    318           * @fn          macBackoffTimerSetTrigger
    319           *
    320           * @brief       Sets the trigger count for the backoff counter.  A callback is exectuted when
    321           *              the backoff count reaches the trigger
    322           *
    323           * @param       triggerBackoff - backoff count for new trigger
    324           *
    325           * @return      none
    326           **************************************************************************************************
    327           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    328          void macBackoffTimerSetTrigger(uint32 triggerBackoff)
   \                     macBackoffTimerSetTrigger:
    329          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 0
   \   000005   8A..         MOV     ?V0 + 0,R2
   \   000007   8B..         MOV     ?V0 + 1,R3
   \   000009   8C..         MOV     ?V0 + 2,R4
   \   00000B   8D..         MOV     ?V0 + 3,R5
    330            halIntState_t  s;
    331          
    332            MAC_ASSERT(triggerBackoff < backoffTimerRollover); /* trigger backoff must be less than rollover backoff */
   \   00000D   90....       MOV     DPTR,#backoffTimerRollover
   \   000010   78..         MOV     R0,#?V0 + 4
   \   000012   12....       LCALL   ?L_MOV_X
   \   000015   78..         MOV     R0,#?V0 + 4
   \   000017   79..         MOV     R1,#?V0 + 0
   \   000019   12....       LCALL   ?UL_GT
   \   00001C   4003         JC      ??macBackoffTimerSetTrigger_0
   \   00001E                ; Setup parameters for call to function halAssertHandler
   \   00001E   12....       LCALL   ??halAssertHandler?relay
    333          
    334            HAL_ENTER_CRITICAL_SECTION(s);
   \                     ??macBackoffTimerSetTrigger_0:
   \   000021   A2AF         MOV     C,0xa8.7
   \   000023   E4           CLR     A
   \   000024   92E0         MOV     0xE0 /* A   */.0,C
   \   000026   FE           MOV     R6,A
   \   000027   C2AF         CLR     0xa8.7
    335            backoffTimerTrigger = triggerBackoff;
   \   000029   90....       MOV     DPTR,#backoffTimerTrigger
   \   00002C   78..         MOV     R0,#?V0 + 0
   \   00002E   12....       LCALL   ?L_MOV_TO_X
    336            if (triggerBackoff > MAC_RADIO_BACKOFF_COUNT())
   \   000031                ; Setup parameters for call to function macMcuOverflowCount
   \   000031   12....       LCALL   ??macMcuOverflowCount?relay
   \   000034   8A..         MOV     ?V0 + 4,R2
   \   000036   8B..         MOV     ?V0 + 5,R3
   \   000038   8C..         MOV     ?V0 + 6,R4
   \   00003A   8D..         MOV     ?V0 + 7,R5
   \   00003C   78..         MOV     R0,#?V0 + 0
   \   00003E   79..         MOV     R1,#?V0 + 4
   \   000040   12....       LCALL   ?UL_GT
   \   000043   5013         JNC     ??macBackoffTimerSetTrigger_1
    337            {
    338              compareState = COMPARE_STATE_TRIGGER;
   \   000045   7402         MOV     A,#0x2
   \   000047   90....       MOV     DPTR,#compareState
   \   00004A   F0           MOVX    @DPTR,A
    339              MAC_RADIO_BACKOFF_SET_COMPARE(triggerBackoff);
   \   00004B                ; Setup parameters for call to function macMcuOverflowSetCompare
   \   00004B   AA..         MOV     R2,?V0 + 0
   \   00004D   AB..         MOV     R3,?V0 + 1
   \   00004F   AC..         MOV     R4,?V0 + 2
   \   000051   AD..         MOV     R5,?V0 + 3
   \   000053   12....       LCALL   ??macMcuOverflowSetCompare?relay
   \   000056   802B         SJMP    ??macBackoffTimerSetTrigger_2
    340            }
    341            else
    342            {
    343              if (triggerBackoff == 0)
   \                     ??macBackoffTimerSetTrigger_1:
   \   000058   90....       MOV     DPTR,#__Constant_0
   \   00005B   78..         MOV     R0,#?V0 + 0
   \   00005D   12....       LCALL   ?L_EQ_X
   \   000060   7008         JNZ     ??macBackoffTimerSetTrigger_3
    344              {
    345                compareState = COMPARE_STATE_ROLLOVER_AND_TRIGGER;
   \   000062   7403         MOV     A,#0x3
   \   000064   90....       MOV     DPTR,#compareState
   \   000067   F0           MOVX    @DPTR,A
   \   000068   8006         SJMP    ??macBackoffTimerSetTrigger_4
    346              }
    347              else
    348              {
    349                compareState = COMPARE_STATE_ROLLOVER_AND_ARM_TRIGGER;
   \                     ??macBackoffTimerSetTrigger_3:
   \   00006A   7405         MOV     A,#0x5
   \   00006C   90....       MOV     DPTR,#compareState
   \   00006F   F0           MOVX    @DPTR,A
    350              }
    351              MAC_RADIO_BACKOFF_SET_COMPARE(backoffTimerRollover);
   \                     ??macBackoffTimerSetTrigger_4:
   \   000070                ; Setup parameters for call to function macMcuOverflowSetCompare
   \   000070   90....       MOV     DPTR,#backoffTimerRollover
   \   000073   78..         MOV     R0,#?V0 + 4
   \   000075   12....       LCALL   ?L_MOV_X
   \   000078   AA..         MOV     R2,?V0 + 4
   \   00007A   AB..         MOV     R3,?V0 + 5
   \   00007C   AC..         MOV     R4,?V0 + 6
   \   00007E   AD..         MOV     R5,?V0 + 7
   \   000080   12....       LCALL   ??macMcuOverflowSetCompare?relay
    352            }
    353            HAL_EXIT_CRITICAL_SECTION(s);
   \                     ??macBackoffTimerSetTrigger_2:
   \   000083   EE           MOV     A,R6
   \   000084   A2E0         MOV     C,0xE0 /* A   */.0
   \   000086   92AF         MOV     0xa8.7,C
    354          }
   \   000088   7F08         MOV     R7,#0x8
   \   00008A   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   00008D                REQUIRE _A_IEN0
    355          
    356          
    357          /**************************************************************************************************
    358           * @fn          macBackoffTimerCancelTrigger
    359           *
    360           * @brief       Cancels the trigger for the backoff counter.
    361           *
    362           * @param       none
    363           *
    364           * @return      none
    365           **************************************************************************************************
    366           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    367          void macBackoffTimerCancelTrigger(void)
   \                     macBackoffTimerCancelTrigger:
    368          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
    369            halIntState_t  s;
    370          
    371            HAL_ENTER_CRITICAL_SECTION(s);
   \   000005   A2AF         MOV     C,0xa8.7
   \   000007   E4           CLR     A
   \   000008   92E0         MOV     0xE0 /* A   */.0,C
   \   00000A   FE           MOV     R6,A
   \   00000B   C2AF         CLR     0xa8.7
    372            compareState = COMPARE_STATE_ROLLOVER;
   \   00000D   7401         MOV     A,#0x1
   \   00000F   90....       MOV     DPTR,#compareState
   \   000012   F0           MOVX    @DPTR,A
    373            MAC_RADIO_BACKOFF_SET_COMPARE(backoffTimerRollover);
   \   000013                ; Setup parameters for call to function macMcuOverflowSetCompare
   \   000013   90....       MOV     DPTR,#backoffTimerRollover
   \   000016   78..         MOV     R0,#?V0 + 0
   \   000018   12....       LCALL   ?L_MOV_X
   \   00001B   AA..         MOV     R2,?V0 + 0
   \   00001D   AB..         MOV     R3,?V0 + 1
   \   00001F   AC..         MOV     R4,?V0 + 2
   \   000021   AD..         MOV     R5,?V0 + 3
   \   000023   12....       LCALL   ??macMcuOverflowSetCompare?relay
    374            HAL_EXIT_CRITICAL_SECTION(s);
   \   000026   EE           MOV     A,R6
   \   000027   A2E0         MOV     C,0xE0 /* A   */.0
   \   000029   92AF         MOV     0xa8.7,C
    375          }
   \   00002B   7F04         MOV     R7,#0x4
   \   00002D   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000030                REQUIRE _A_IEN0
    376          
    377          
    378          /**************************************************************************************************
    379           * @fn          macBackoffTimerRealign
    380           *
    381           * @brief       
    382           *
    383           *  Realignment is accomplished by adjusting the internal time base to align with the expected
    384           *  reception time of an incoming frame.  The difference between the expected reception time and
    385           *  the actual reception time is computed and this difference is used to adjust the hardware
    386           *  timer count and backoff count.
    387           *
    388           *  The realignment is based on the SFD signal for the incoming frame.  The timer is aligned
    389           *  by adjusting it with the difference between the expected SFD time and the actual SFD time.
    390           *
    391           * @param       none
    392           *
    393           * @return      none
    394           **************************************************************************************************
    395           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    396          int32 macBackoffTimerRealign(macRx_t *pMsg)
   \                     macBackoffTimerRealign:
    397          {
   \   000000   74F0         MOV     A,#-0x10
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 10
   \   000005   74F6         MOV     A,#-0xa
   \   000007   12....       LCALL   ?ALLOC_XSTACK8
   \   00000A   7408         MOV     A,#0x8
   \   00000C   12....       LCALL   ?XSTACK_DISP0_8
   \   00000F   EA           MOV     A,R2
   \   000010   F0           MOVX    @DPTR,A
   \   000011   A3           INC     DPTR
   \   000012   EB           MOV     A,R3
   \   000013   F0           MOVX    @DPTR,A
    398            uint16 timerDelayTicks;
    399            int32 backoffDelta;
    400            int32 backoffCount;
    401          
    402            MAC_ASSERT(!MAC_TX_IS_PHYSICALLY_ACTIVE()); /* realignment during actual transmit corrupts timing */
   \   000014   90....       MOV     DPTR,#macTxActive
   \   000017   E0           MOVX    A,@DPTR
   \   000018   A2E7         MOV     C,0xE0 /* A   */.7
   \   00001A   5003         JNC     ??macBackoffTimerRealign_0
   \   00001C                ; Setup parameters for call to function halAssertHandler
   \   00001C   12....       LCALL   ??halAssertHandler?relay
    403          
    404            /*-------------------------------------------------------------------------------
    405             *  Calculate the delta backoff difference between expected backoff count,
    406             *  which is zero, and the backoff count of the received frame.
    407             */
    408          
    409            /* since expected receive time is zero, the delta is simply the receive time */
    410            backoffDelta = pMsg->mac.timestamp;
   \                     ??macBackoffTimerRealign_0:
   \   00001F   7408         MOV     A,#0x8
   \   000021   12....       LCALL   ?XSTACK_DISP0_8
   \   000024   E0           MOVX    A,@DPTR
   \   000025   2424         ADD     A,#0x24
   \   000027   F8           MOV     R0,A
   \   000028   A3           INC     DPTR
   \   000029   E0           MOVX    A,@DPTR
   \   00002A   3400         ADDC    A,#0x0
   \   00002C   F9           MOV     R1,A
   \   00002D   8882         MOV     DPL,R0
   \   00002F   8983         MOV     DPH,R1
   \   000031   78..         MOV     R0,#?V0 + 0
   \   000033   12....       LCALL   ?L_MOV_X
   \   000036   85..82       MOV     DPL,?XSP + 0
   \   000039   85..83       MOV     DPH,?XSP + 1
   \   00003C   78..         MOV     R0,#?V0 + 0
   \   00003E   12....       LCALL   ?L_MOV_TO_X
    411          
    412            /* if the frame was received more than halfway to the rollover count, use a negative delta value */
    413            if (((uint32) backoffDelta) > (backoffTimerRollover / 2))
   \   000041   90....       MOV     DPTR,#backoffTimerRollover
   \   000044   78..         MOV     R0,#?V0 + 4
   \   000046   12....       LCALL   ?L_MOV_X
   \   000049   7401         MOV     A,#0x1
   \   00004B   78..         MOV     R0,#?V0 + 4
   \   00004D   12....       LCALL   ?UL_SHR
   \   000050   85..82       MOV     DPL,?XSP + 0
   \   000053   85..83       MOV     DPH,?XSP + 1
   \   000056   78..         MOV     R0,#?V0 + 0
   \   000058   12....       LCALL   ?L_MOV_X
   \   00005B   78..         MOV     R0,#?V0 + 0
   \   00005D   79..         MOV     R1,#?V0 + 4
   \   00005F   12....       LCALL   ?UL_GT
   \   000062   5013         JNC     ??macBackoffTimerRealign_1
    414            {
    415              backoffDelta = backoffDelta - backoffTimerRollover;    /* result will be negative */
   \   000064   90....       MOV     DPTR,#backoffTimerRollover
   \   000067   78..         MOV     R0,#?V0 + 0
   \   000069   12....       LCALL   ?L_MOV_X
   \   00006C   85..82       MOV     DPL,?XSP + 0
   \   00006F   85..83       MOV     DPH,?XSP + 1
   \   000072   78..         MOV     R0,#?V0 + 0
   \   000074   12....       LCALL   ?L_SUB_FROM_X
    416            }
    417          
    418            /*-------------------------------------------------------------------------------
    419             *  Calculate the number of timer ticks to delay that will align the internal
    420             *  time base with the received frame.
    421             */
    422          
    423            /* retrieve the timer count when frame was received */
    424            timerDelayTicks = pMsg->mac.timestamp2;
   \                     ??macBackoffTimerRealign_1:
   \   000077   7408         MOV     A,#0x8
   \   000079   12....       LCALL   ?XSTACK_DISP0_8
   \   00007C   E0           MOVX    A,@DPTR
   \   00007D   2428         ADD     A,#0x28
   \   00007F   F8           MOV     R0,A
   \   000080   A3           INC     DPTR
   \   000081   E0           MOVX    A,@DPTR
   \   000082   3400         ADDC    A,#0x0
   \   000084   F9           MOV     R1,A
   \   000085   8882         MOV     DPL,R0
   \   000087   8983         MOV     DPH,R1
   \   000089   E0           MOVX    A,@DPTR
   \   00008A   FE           MOV     R6,A
   \   00008B   A3           INC     DPTR
   \   00008C   E0           MOVX    A,@DPTR
   \   00008D   FF           MOV     R7,A
    425          
    426            /*
    427             *  Subtract the expected SFD time from the actual SFD time to find the needed
    428             *  timer adjustment. If subtracting the offset would result in a negative value,
    429             *  the tick delay must wrap around.
    430             */
    431            if (timerDelayTicks >= TIMER_TICKS_EXPECTED_AT_SFD)
   \   00008E   C3           CLR     C
   \   00008F   EE           MOV     A,R6
   \   000090   9466         SUBB    A,#0x66
   \   000092   EF           MOV     A,R7
   \   000093   9404         SUBB    A,#0x4
   \   000095   400A         JC      ??macBackoffTimerRealign_2
    432            {
    433              /* since delay count is greater than or equal to offset, subtract it directly */
    434              timerDelayTicks = timerDelayTicks - TIMER_TICKS_EXPECTED_AT_SFD;
   \   000097   EE           MOV     A,R6
   \   000098   249A         ADD     A,#-0x66
   \   00009A   FE           MOV     R6,A
   \   00009B   EF           MOV     A,R7
   \   00009C   34FB         ADDC    A,#-0x5
   \   00009E   FF           MOV     R7,A
   \   00009F   801B         SJMP    ??macBackoffTimerRealign_3
    435            }
    436            else
    437            {
    438              /*
    439               *  The expected time is greater that actualy time so it cannot be subtracted directly.
    440               *  The tick count per backoff is added to wrap around within the backoff.
    441               *  Since a wrap around did happen, the backoff delta is adjusted by one.
    442               */
    443              timerDelayTicks = timerDelayTicks - TIMER_TICKS_EXPECTED_AT_SFD + MAC_RADIO_TIMER_TICKS_PER_BACKOFF();
   \                     ??macBackoffTimerRealign_2:
   \   0000A1   EE           MOV     A,R6
   \   0000A2   249A         ADD     A,#-0x66
   \   0000A4   FE           MOV     R6,A
   \   0000A5   EF           MOV     A,R7
   \   0000A6   3423         ADDC    A,#0x23
   \   0000A8   FF           MOV     R7,A
    444              backoffDelta--;
   \   0000A9   90....       MOV     DPTR,#__Constant_ffffffff
   \   0000AC   78..         MOV     R0,#?V0 + 0
   \   0000AE   12....       LCALL   ?L_MOV_X
   \   0000B1   85..82       MOV     DPL,?XSP + 0
   \   0000B4   85..83       MOV     DPH,?XSP + 1
   \   0000B7   78..         MOV     R0,#?V0 + 0
   \   0000B9   12....       LCALL   ?L_ADD_TO_X
    445            }
    446          
    447            /*-------------------------------------------------------------------------------
    448             *  Calculate the new backoff count.
    449             */
    450          
    451            backoffCount = MAC_RADIO_BACKOFF_COUNT() - backoffDelta;
   \                     ??macBackoffTimerRealign_3:
   \   0000BC                ; Setup parameters for call to function macMcuOverflowCount
   \   0000BC   12....       LCALL   ??macMcuOverflowCount?relay
   \   0000BF   8A..         MOV     ?V0 + 0,R2
   \   0000C1   8B..         MOV     ?V0 + 1,R3
   \   0000C3   8C..         MOV     ?V0 + 2,R4
   \   0000C5   8D..         MOV     ?V0 + 3,R5
   \   0000C7   85..82       MOV     DPL,?XSP + 0
   \   0000CA   85..83       MOV     DPH,?XSP + 1
   \   0000CD   78..         MOV     R0,#?V0 + 0
   \   0000CF   12....       LCALL   ?L_SUB_X
   \   0000D2   7404         MOV     A,#0x4
   \   0000D4   12....       LCALL   ?XSTACK_DISP0_8
   \   0000D7   78..         MOV     R0,#?V0 + 0
   \   0000D9   12....       LCALL   ?L_MOV_TO_X
    452          
    453            if (backoffCount >= ((int32) backoffTimerRollover))
   \   0000DC   7404         MOV     A,#0x4
   \   0000DE   12....       LCALL   ?XSTACK_DISP0_8
   \   0000E1   C082         PUSH    DPL
   \   0000E3   C083         PUSH    DPH
   \   0000E5   90....       MOV     DPTR,#backoffTimerRollover
   \   0000E8   78..         MOV     R0,#?V0 + 0
   \   0000EA   12....       LCALL   ?L_MOV_X
   \   0000ED   D083         POP     DPH
   \   0000EF   D082         POP     DPL
   \   0000F1   78..         MOV     R0,#?V0 + 0
   \   0000F3   12....       LCALL   ?SL_GT_X
   \   0000F6   4014         JC      ??macBackoffTimerRealign_4
    454            {
    455              backoffCount -= backoffTimerRollover;
   \   0000F8   90....       MOV     DPTR,#backoffTimerRollover
   \   0000FB   78..         MOV     R0,#?V0 + 0
   \   0000FD   12....       LCALL   ?L_MOV_X
   \   000100   7404         MOV     A,#0x4
   \   000102   12....       LCALL   ?XSTACK_DISP0_8
   \   000105   78..         MOV     R0,#?V0 + 0
   \   000107   12....       LCALL   ?L_SUB_FROM_X
   \   00010A   802E         SJMP    ??macBackoffTimerRealign_5
    456            }
    457            else if (backoffCount < 0)
   \                     ??macBackoffTimerRealign_4:
   \   00010C   7404         MOV     A,#0x4
   \   00010E   12....       LCALL   ?XSTACK_DISP0_8
   \   000111   C082         PUSH    DPL
   \   000113   C083         PUSH    DPH
   \   000115   90....       MOV     DPTR,#__Constant_0
   \   000118   78..         MOV     R0,#?V0 + 0
   \   00011A   12....       LCALL   ?L_MOV_X
   \   00011D   D083         POP     DPH
   \   00011F   D082         POP     DPL
   \   000121   78..         MOV     R0,#?V0 + 0
   \   000123   12....       LCALL   ?SL_GT_X
   \   000126   5012         JNC     ??macBackoffTimerRealign_5
    458            {
    459              backoffCount += backoffTimerRollover;
   \   000128   90....       MOV     DPTR,#backoffTimerRollover
   \   00012B   78..         MOV     R0,#?V0 + 0
   \   00012D   12....       LCALL   ?L_MOV_X
   \   000130   7404         MOV     A,#0x4
   \   000132   12....       LCALL   ?XSTACK_DISP0_8
   \   000135   78..         MOV     R0,#?V0 + 0
   \   000137   12....       LCALL   ?L_ADD_TO_X
    460            }
    461          
    462            MAC_RADIO_TIMER_FORCE_DELAY(timerDelayTicks);
   \                     ??macBackoffTimerRealign_5:
   \   00013A   EE           MOV     A,R6
   \   00013B   F5A6         MOV     0xa6,A
   \   00013D   EF           MOV     A,R7
   \   00013E   F9           MOV     R1,A
   \   00013F   E9           MOV     A,R1
   \   000140   F5A7         MOV     0xa7,A
    463            MAC_RADIO_BACKOFF_SET_COUNT(backoffCount);
   \   000142                ; Setup parameters for call to function macMcuOverflowSetCount
   \   000142   7404         MOV     A,#0x4
   \   000144   12....       LCALL   ?XSTACK_DISP0_8
   \   000147   78..         MOV     R0,#?V0 + 0
   \   000149   12....       LCALL   ?L_MOV_X
   \   00014C   AA..         MOV     R2,?V0 + 0
   \   00014E   AB..         MOV     R3,?V0 + 1
   \   000150   AC..         MOV     R4,?V0 + 2
   \   000152   AD..         MOV     R5,?V0 + 3
   \   000154   12....       LCALL   ??macMcuOverflowSetCount?relay
    464          
    465            return(backoffDelta);
   \   000157   85..82       MOV     DPL,?XSP + 0
   \   00015A   85..83       MOV     DPH,?XSP + 1
   \   00015D   78..         MOV     R0,#?V0 + 0
   \   00015F   12....       LCALL   ?L_MOV_X
   \   000162   AA..         MOV     R2,?V0 + 0
   \   000164   AB..         MOV     R3,?V0 + 1
   \   000166   AC..         MOV     R4,?V0 + 2
   \   000168   AD..         MOV     R5,?V0 + 3
   \   00016A   740A         MOV     A,#0xa
   \   00016C   12....       LCALL   ?DEALLOC_XSTACK8
   \   00016F   7F08         MOV     R7,#0x8
   \   000171   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000174                REQUIRE T2TLD
   \   000174                REQUIRE T2THD
    466          }
    467          
    468          
    469          /**************************************************************************************************
    470           * @fn          macBackoffTimerCompareIsr
    471           *
    472           * @brief       Interrupt service routine that fires when the backoff count is equal
    473           *              to the trigger count.
    474           *
    475           * @param       none
    476           *
    477           * @return      none
    478           **************************************************************************************************
    479           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    480          void macBackoffTimerCompareIsr(void)
   \                     macBackoffTimerCompareIsr:
    481          {
   \   000000   74F4         MOV     A,#-0xc
   \   000002   12....       LCALL   ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
    482            uint8 oldState;
    483            halIntState_t  s;
    484          
    485            HAL_ENTER_CRITICAL_SECTION(s);
   \   000005   A2AF         MOV     C,0xa8.7
   \   000007   E4           CLR     A
   \   000008   92E0         MOV     0xE0 /* A   */.0,C
   \   00000A   FE           MOV     R6,A
   \   00000B   C2AF         CLR     0xa8.7
    486            oldState = compareState;
   \   00000D   90....       MOV     DPTR,#compareState
   \   000010   E0           MOVX    A,@DPTR
   \   000011   FF           MOV     R7,A
    487          
    488            /* if compare is a rollover, set count to zero */
    489            if (oldState & COMPARE_STATE_ROLLOVER_BV)
   \   000012   EF           MOV     A,R7
   \   000013   A2E0         MOV     C,0xE0 /* A   */.0
   \   000015   5016         JNC     ??macBackoffTimerCompareIsr_0
    490            {
    491              MAC_RADIO_BACKOFF_SET_COUNT(0);
   \   000017                ; Setup parameters for call to function macMcuOverflowSetCount
   \   000017   90....       MOV     DPTR,#__Constant_0
   \   00001A   78..         MOV     R0,#?V0 + 0
   \   00001C   12....       LCALL   ?L_MOV_X
   \   00001F   AA..         MOV     R2,?V0 + 0
   \   000021   AB..         MOV     R3,?V0 + 1
   \   000023   AC..         MOV     R4,?V0 + 2
   \   000025   AD..         MOV     R5,?V0 + 3
   \   000027   12....       LCALL   ??macMcuOverflowSetCount?relay
    492              macBackoffTimerRolloverCallback();
   \   00002A                ; Setup parameters for call to function macBackoffTimerRolloverCallback
   \   00002A   12....       LCALL   ??macBackoffTimerRolloverCallback?relay
    493            }
    494          
    495            /* if compare is a trigger, reset for rollover and run the trigger callback */
    496            if (oldState & COMPARE_STATE_TRIGGER_BV)
   \                     ??macBackoffTimerCompareIsr_0:
   \   00002D   EF           MOV     A,R7
   \   00002E   A2E1         MOV     C,0xE0 /* A   */.1
   \   000030   5023         JNC     ??macBackoffTimerCompareIsr_1
    497            {
    498              compareState = COMPARE_STATE_ROLLOVER;
   \   000032   7401         MOV     A,#0x1
   \   000034   90....       MOV     DPTR,#compareState
   \   000037   F0           MOVX    @DPTR,A
    499              MAC_RADIO_BACKOFF_SET_COMPARE(backoffTimerRollover);
   \   000038                ; Setup parameters for call to function macMcuOverflowSetCompare
   \   000038   90....       MOV     DPTR,#backoffTimerRollover
   \   00003B   78..         MOV     R0,#?V0 + 0
   \   00003D   12....       LCALL   ?L_MOV_X
   \   000040   AA..         MOV     R2,?V0 + 0
   \   000042   AB..         MOV     R3,?V0 + 1
   \   000044   AC..         MOV     R4,?V0 + 2
   \   000046   AD..         MOV     R5,?V0 + 3
   \   000048   12....       LCALL   ??macMcuOverflowSetCompare?relay
    500              HAL_EXIT_CRITICAL_SECTION(s);
   \   00004B   EE           MOV     A,R6
   \   00004C   A2E0         MOV     C,0xE0 /* A   */.0
   \   00004E   92AF         MOV     0xa8.7,C
    501              macBackoffTimerTriggerCallback();
   \   000050                ; Setup parameters for call to function macBackoffTimerTriggerCallback
   \   000050   12....       LCALL   ??macBackoffTimerTriggerCallback?relay
   \   000053   802A         SJMP    ??macBackoffTimerCompareIsr_2
    502            }
    503            else if (oldState == COMPARE_STATE_ROLLOVER_AND_ARM_TRIGGER)
   \                     ??macBackoffTimerCompareIsr_1:
   \   000055   7405         MOV     A,#0x5
   \   000057   6F           XRL     A,R7
   \   000058   7020         JNZ     ??macBackoffTimerCompareIsr_3
    504            {
    505              compareState = COMPARE_STATE_TRIGGER;
   \   00005A   7402         MOV     A,#0x2
   \   00005C   90....       MOV     DPTR,#compareState
   \   00005F   F0           MOVX    @DPTR,A
    506              MAC_RADIO_BACKOFF_SET_COMPARE(backoffTimerTrigger);
   \   000060                ; Setup parameters for call to function macMcuOverflowSetCompare
   \   000060   90....       MOV     DPTR,#backoffTimerTrigger
   \   000063   78..         MOV     R0,#?V0 + 0
   \   000065   12....       LCALL   ?L_MOV_X
   \   000068   AA..         MOV     R2,?V0 + 0
   \   00006A   AB..         MOV     R3,?V0 + 1
   \   00006C   AC..         MOV     R4,?V0 + 2
   \   00006E   AD..         MOV     R5,?V0 + 3
   \   000070   12....       LCALL   ??macMcuOverflowSetCompare?relay
    507              HAL_EXIT_CRITICAL_SECTION(s);
   \   000073   EE           MOV     A,R6
   \   000074   A2E0         MOV     C,0xE0 /* A   */.0
   \   000076   92AF         MOV     0xa8.7,C
   \   000078   8005         SJMP    ??macBackoffTimerCompareIsr_2
    508            }
    509            else
    510            {
    511              HAL_EXIT_CRITICAL_SECTION(s);
   \                     ??macBackoffTimerCompareIsr_3:
   \   00007A   EE           MOV     A,R6
   \   00007B   A2E0         MOV     C,0xE0 /* A   */.0
   \   00007D   92AF         MOV     0xa8.7,C
    512            }
    513          }
   \                     ??macBackoffTimerCompareIsr_2:
   \   00007F   7F04         MOV     R7,#0x4
   \   000081   02....       LJMP    ?BANKED_LEAVE_XDATA
   \   000084                REQUIRE _A_IEN0

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     __Constant_0:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for __Constant_0>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for __Constant_0>`:
   \   000000   00000000     DD 0

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     __Constant_c0000:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for __Constant_c0000>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for __Constant_c0000>`:
   \   000000   00000C00     DD 786432

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     __Constant_80000000:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for __Constant_80000000>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for __Constant_80000000>`:
   \   000000   00000080     DD 2147483648

   \                                 In  segment XDATA_I, align 1, keep-with-next
   \                     __Constant_ffffffff:
   \   000000                DS 4
   \   000004                REQUIRE `?<Initializer for __Constant_ffffffff>`
   \   000004                REQUIRE __INIT_XDATA_I

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for __Constant_ffffffff>`:
   \   000000   FFFFFFFF     DD -1

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??macBackoffTimerInit?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macBackoffTimerInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??macBackoffTimerReset?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macBackoffTimerReset

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??macBackoffTimerSetRollover?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macBackoffTimerSetRollover

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??macBackoffTimerSetCount?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macBackoffTimerSetCount

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??macBackoffTimerCount?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macBackoffTimerCount

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??macBackoffTimerCapture?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macBackoffTimerCapture

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??macBackoffTimerGetTrigger?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macBackoffTimerGetTrigger

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??macBackoffTimerSetTrigger?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macBackoffTimerSetTrigger

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??macBackoffTimerCancelTrigger?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macBackoffTimerCancelTrigger

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??macBackoffTimerRealign?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macBackoffTimerRealign

   \                                 In  segment BANK_RELAYS, align 1
   \                     ??macBackoffTimerCompareIsr?relay:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    macBackoffTimerCompareIsr
    514          
    515          
    516          /**************************************************************************************************
    517          */

   Maximum stack usage in bytes:

     Function                       ISTACK PSTACK XSTACK
     --------                       ------ ------ ------
     macBackoffTimerCancelTrigger       0      0     12
       -> macMcuOverflowSetCompare      0      0     24
     macBackoffTimerCapture             0      0     16
       -> macMcuOverflowCapture         0      0     32
     macBackoffTimerCompareIsr          0      0     12
       -> macMcuOverflowSetCount        0      0     24
       -> macBackoffTimerRolloverCallback
                                        0      0     24
       -> macMcuOverflowSetCompare      0      0     24
       -> macBackoffTimerTriggerCallback
                                        0      0     24
       -> macMcuOverflowSetCompare      0      0     24
     macBackoffTimerCount               0      0     16
       -> macMcuOverflowCount           0      0     32
     macBackoffTimerGetTrigger          0      0     12
     macBackoffTimerInit                0      0     12
       -> macMcuOverflowSetCount        0      0     24
       -> macBackoffTimerSetRollover
                                        0      0     24
       -> macMcuOrT2PEROF2              0      0     24
     macBackoffTimerRealign             2      0     26
       -> halAssertHandler              0      0     52
       -> macMcuOverflowCount           0      0     52
       -> macMcuOverflowSetCount        0      0     52
     macBackoffTimerReset               2      0      0
       -> macMcuAndT2PEROF2             4      0      0
       -> macBackoffTimerInit           4      0      0
     macBackoffTimerSetCount            0      0     16
       -> halAssertHandler              0      0     32
       -> halAssertHandler              0      0     32
       -> halAssertHandler              0      0     32
       -> macMcuOverflowSetCount        0      0     32
     macBackoffTimerSetRollover         0      0     28
       -> macMcuOverflowCount           0      0     32
       -> halAssertHandler              0      0     32
       -> macMcuOverflowSetCompare      0      0     32
     macBackoffTimerSetTrigger          0      0     16
       -> halAssertHandler              0      0     32
       -> macMcuOverflowCount           0      0     32
       -> macMcuOverflowSetCompare      0      0     32
       -> macMcuOverflowSetCompare      0      0     32


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     T2TLD                             1
     T2THD                             1
     _A_IEN0                           1
     T2CNF                             1
     backoffTimerRollover              4
     backoffTimerTrigger               4
     compareState                      1
     macBackoffTimerInit              62
     macBackoffTimerReset             19
     macBackoffTimerSetRollover       73
     macBackoffTimerSetCount         106
     macBackoffTimerCount             81
     macBackoffTimerCapture           81
     macBackoffTimerGetTrigger        26
     macBackoffTimerSetTrigger       141
     macBackoffTimerCancelTrigger     48
     macBackoffTimerRealign          372
     macBackoffTimerCompareIsr       132
     __Constant_0                      4
     ?<Initializer for __Constant_0>
                                       4
     __Constant_c0000                  4
     ?<Initializer for __Constant_c0000>
                                       4
     __Constant_80000000               4
     ?<Initializer for __Constant_80000000>
                                       4
     __Constant_ffffffff               4
     ?<Initializer for __Constant_ffffffff>
                                       4
     ??macBackoffTimerInit?relay       6
     ??macBackoffTimerReset?relay      6
     ??macBackoffTimerSetRollover?relay
                                       6
     ??macBackoffTimerSetCount?relay
                                       6
     ??macBackoffTimerCount?relay      6
     ??macBackoffTimerCapture?relay    6
     ??macBackoffTimerGetTrigger?relay
                                       6
     ??macBackoffTimerSetTrigger?relay
                                       6
     ??macBackoffTimerCancelTrigger?relay
                                       6
     ??macBackoffTimerRealign?relay    6
     ??macBackoffTimerCompareIsr?relay
                                       6

 
 1 141 bytes in segment BANKED_CODE
    66 bytes in segment BANK_RELAYS
     4 bytes in segment SFR_AN
    16 bytes in segment XDATA_I
    16 bytes in segment XDATA_ID
     9 bytes in segment XDATA_Z
 
 1 207 bytes of CODE  memory (+ 16 bytes shared)
     0 bytes of DATA  memory (+  4 bytes shared)
     9 bytes of XDATA memory (+ 16 bytes shared)

Errors: none
Warnings: none
