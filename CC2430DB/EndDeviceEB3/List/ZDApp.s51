///////////////////////////////////////////////////////////////////////////////
//                                                                            /
// IAR 8051 C/C++ Compiler V7.30B/W32                   18/Mar/2013  18:21:48 /
// Copyright 2004-2007 IAR Systems. All rights reserved.                      /
//                                                                            /
//    Core               =  plain                                             /
//    Code model         =  banked                                            /
//    Data model         =  large                                             /
//    Calling convention =  xdata reentrant                                   /
//    Constant location  =  data                                              /
//    Dptr setup         =  1,16                                              /
//    Source file        =  C:\Texas Instruments\ZStack-1.4.3-1.2.1\Component /
//                          s\stack\zdo\ZDApp.c                               /
//    Command line       =  -f "C:\Texas Instruments\ZStack-1.4.3-1.2.1\Proje /
//                          cts\zstack\Samples\cc2430-zstack-adxl345\CC2430DB /
//                          \..\..\..\Tools\CC2430DB\f8wEndev.cfg"            /
//                          (-DCPU32MHZ -DFORCE_MAC_NEAR -DROOT=__near_func   /
//                          -DMAC_OPT_FFD=0 -DBLINK_LEDS "-DCONST=const       /
//                          __code" -DGENERIC=__generic) -f "C:\Texas         /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\Too /
//                          ls\CC2430DB\f8wConfig.cfg" (-DSECURE=0            /
//                          -DDEFAULT_CHANLIST=0x00000800                     /
//                          -DZDAPP_CONFIG_PAN_ID=0xFFFF                      /
//                          -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_M /
//                          ASK=0x007F -DBEACON_REQUEST_DELAY=100             /
//                          -DBEACON_REQ_DELAY_MASK=0x00FF                    /
//                          -DROUTE_EXPIRY_TIME=30 -DAPSC_ACK_WAIT_DURATION_P /
//                          OLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7           /
//                          -DMAX_RREQ_ENTRIES=10 -DAPSC_MAX_FRAME_RETRIES=3  /
//                          -DNWK_MAX_DATA_RETRIES=2                          /
//                          -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9        /
//                          -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=20          /
//                          -DNWK_MAX_BINDING_ENTRIES=10                      /
//                          -DMAX_BINDING_CLUSTER_IDS=5                       /
//                          "-DDEFAULT_KEY={0x01, 0x03, 0x05, 0x07, 0x09,     /
//                          0x0B, 0x0D, 0x0F, 0x00, 0x02, 0x04, 0x06, 0x08,   /
//                          0x0A, 0x0C, 0x0D}" -DRFD_RCVC_ALWAYS_ON=FALSE     /
//                          -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100           /
//                          -DRESPONSE_POLL_RATE=100) -DREJOIN_POLL_RATE=440  /
//                          "C:\Texas Instruments\ZStack-1.4.3-1.2.1\Componen /
//                          ts\stack\zdo\ZDApp.c" -D CC2430EB -D AXD_END3 -D  /
//                          NWK_AUTO_POLL -D REFLECTOR -D xZTOOL_P1 -D        /
//                          xMT_TASK -D xMT_ZDO_FUNC -D xLCD_SUPPORTED=DEBUG  /
//                          -D xPOWER_SAVING -lC "C:\Texas                    /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\EndDeviceEB3 /
//                          \List\" -lA "C:\Texas Instruments\ZStack-1.4.3-1. /
//                          2.1\Projects\zstack\Samples\cc2430-zstack-adxl345 /
//                          \CC2430DB\EndDeviceEB3\List\" --diag_suppress     /
//                          Pe001,Pa010 --diag_remark pe550 -o "C:\Texas      /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\EndDeviceEB3 /
//                          \Obj\" -e --require_prototypes -z2 --no_cse       /
//                          --no_unroll --no_inline --no_code_motion          /
//                          --no_tbaa --debug --core=plain --dptr=16,1        /
//                          --data_model=large --code_model=banked            /
//                          --calling_convention=xdata_reentrant              /
//                          --place_constants=data --nr_virtual_regs 8 -I     /
//                          "C:\Texas Instruments\ZStack-1.4.3-1.2.1\Projects /
//                          \zstack\Samples\cc2430-zstack-adxl345\CC2430DB\"  /
//                          -I "C:\Texas Instruments\ZStack-1.4.3-1.2.1\Proje /
//                          cts\zstack\Samples\cc2430-zstack-adxl345\CC2430DB /
//                          \..\SOURCE\" -I "C:\Texas                         /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\Drivers\" /
//                           -I "C:\Texas Instruments\ZStack-1.4.3-1.2.1\Proj /
//                          ects\zstack\Samples\cc2430-zstack-adxl345\CC2430D /
//                          B\..\..\..\ZMAIN\TI2430DB\" -I "C:\Texas          /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\MT\" -I "C:\Texas                   /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\HAL\INCLUDE\" -I "C:\Texas          /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\HAL\TARGET\CC2430EB\" -I "C:\Texas  /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\OSAL\MCU\CCSOC\" -I "C:\Texas       /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\OSAL\INCLUDE\" -I "C:\Texas         /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\STACK\AF\" -I "C:\Texas             /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\STACK\NWK\" -I "C:\Texas            /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\STACK\SEC\" -I "C:\Texas            /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\STACK\SYS\" -I "C:\Texas            /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\STACK\ZDO\" -I "C:\Texas            /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\ZMAC\F8W\" -I "C:\Texas             /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\ZMAC\" -I "C:\Texas                 /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\SERVICES\SADDR\" -I "C:\Texas       /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\SERVICES\SDATA\" -I "C:\Texas       /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\MAC\INCLUDE\" -I "C:\Texas          /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\MAC\HIGH_LEVEL\" -I "C:\Texas       /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\MAC\LOW_LEVEL\SRF03\" -I "C:\Texas  /
//                          Instruments\ZStack-1.4.3-1.2.1\Projects\zstack\Sa /
//                          mples\cc2430-zstack-adxl345\CC2430DB\..\..\..\..\ /
//                          ..\COMPONENTS\MAC\LOW_LEVEL\SRF03\SINGLE_CHIP\"   /
//                          -I "C:\Program Files\IAR Systems\Embedded         /
//                          Workbench 4.0 Evaluation version\8051\INC\" -I    /
//                          "C:\Program Files\IAR Systems\Embedded Workbench  /
//                          4.0 Evaluation version\8051\INC\CLIB\"            /
//    List file          =  C:\Texas Instruments\ZStack-1.4.3-1.2.1\Projects\ /
//                          zstack\Samples\cc2430-zstack-adxl345\CC2430DB\End /
//                          DeviceEB3\List\ZDApp.s51                          /
//                                                                            /
//                                                                            /
///////////////////////////////////////////////////////////////////////////////

        NAME ZDApp

        RTMODEL "__calling_convention", "xdata_reentrant"
        RTMODEL "__code_model", "banked"
        RTMODEL "__core", "plain"
        RTMODEL "__data_model", "large"
        RTMODEL "__dptr_size", "16"
        RTMODEL "__extended_stack", "disabled"
        RTMODEL "__location_for_constants", "data"
        RTMODEL "__number_of_dptrs", "1"
        RTMODEL "__rt_version", "1"

        RSEG DOVERLAY:DATA:NOROOT(0)
        RSEG IOVERLAY:IDATA:NOROOT(0)
        RSEG ISTACK:IDATA:NOROOT(0)
        RSEG PSTACK:XDATA:NOROOT(0)
        RSEG XSTACK:XDATA:NOROOT(0)

        EXTERN ??ZDAppCheckForHoldKey?relay
        EXTERN ??ZDAppDetermineDeviceType?relay
        EXTERN ??ZDApp_LeaveCtrlInit?relay
        EXTERN ??ZDApp_LeaveCtrlSet?relay
        EXTERN ??ZDApp_LeaveCtrlStartup?relay
        EXTERN ??ZDApp_LeaveReset?relay
        EXTERN ??ZDApp_LeaveUpdate?relay
        EXTERN ??ZDApp_NVUpdate?relay
        EXTERN ??ZDApp_NetworkInit?relay
        EXTERN ??ZDApp_NodeProfileSync?relay
        EXTERN ??ZDApp_ProcessMsgCBs?relay
        EXTERN ??ZDApp_ProcessNetworkJoin?relay
        EXTERN ??ZDApp_ProcessOSALMsg?relay
        EXTERN ??ZDApp_RegisterCBs?relay
        EXTERN ??ZDApp_ResetTimerStart?relay
        EXTERN ??ZDApp_SaveNetworkStateEvt?relay
        EXTERN ??ZDApp_SecInit?relay
        EXTERN ??ZDApp_SendMsg?relay
        EXTERN ??ZDOInitDevice?relay
        EXTERN ?ALLOC_XSTACK8
        EXTERN ?BANKED_ENTER_XDATA
        EXTERN ?BANKED_LEAVE_XDATA
        EXTERN ?BDISPATCH
        EXTERN ?BRET
        EXTERN ?DEALLOC_XSTACK8
        EXTERN ?PUSH_XSTACK_I_ONE
        EXTERN ?PUSH_XSTACK_I_THREE
        EXTERN ?PUSH_XSTACK_I_TWO
        EXTERN ?UC_SWITCH_SPARSE
        EXTERN ?US_SWITCH_SPARSE
        EXTERN ?V0
        EXTERN ?XSP
        EXTERN ?XSTACK_DISP0_8
        EXTERN __INIT_XDATA_I
        EXTERN __INIT_XDATA_Z

        PUBLIC ??AddrMgrWriteNVRequest?relay
        FUNCTION ??AddrMgrWriteNVRequest?relay,0203H
        PUBLIC ??ZDAppCheckForHoldKey?relay
        FUNCTION ??ZDAppCheckForHoldKey?relay,0203H
        PUBLIC ??ZDAppDetermineDeviceType?relay
        FUNCTION ??ZDAppDetermineDeviceType?relay,0203H
        PUBLIC ??ZDApp_ChangeMatchDescRespPermission?relay
        FUNCTION ??ZDApp_ChangeMatchDescRespPermission?relay,0203H
        PUBLIC ??ZDApp_CoordStartPANIDConflictCB?relay
        FUNCTION ??ZDApp_CoordStartPANIDConflictCB?relay,0203H
        PUBLIC ??ZDApp_InMsgCB?relay
        FUNCTION ??ZDApp_InMsgCB?relay,0203H
        PUBLIC ??ZDApp_Init?relay
        FUNCTION ??ZDApp_Init?relay,0203H
        PUBLIC ??ZDApp_InitUserDesc?relay
        FUNCTION ??ZDApp_InitUserDesc?relay,0203H
        PUBLIC ??ZDApp_LeaveCtrlBypass?relay
        FUNCTION ??ZDApp_LeaveCtrlBypass?relay,0203H
        PUBLIC ??ZDApp_LeaveCtrlInit?relay
        FUNCTION ??ZDApp_LeaveCtrlInit?relay,0203H
        PUBLIC ??ZDApp_LeaveCtrlSet?relay
        FUNCTION ??ZDApp_LeaveCtrlSet?relay,0203H
        PUBLIC ??ZDApp_LeaveCtrlStartup?relay
        FUNCTION ??ZDApp_LeaveCtrlStartup?relay,0203H
        PUBLIC ??ZDApp_LeaveReset?relay
        FUNCTION ??ZDApp_LeaveReset?relay,0203H
        PUBLIC ??ZDApp_LeaveUpdate?relay
        FUNCTION ??ZDApp_LeaveUpdate?relay,0203H
        PUBLIC ??ZDApp_NVUpdate?relay
        FUNCTION ??ZDApp_NVUpdate?relay,0203H
        PUBLIC ??ZDApp_NetworkInit?relay
        FUNCTION ??ZDApp_NetworkInit?relay,0203H
        PUBLIC ??ZDApp_NetworkStartEvt?relay
        FUNCTION ??ZDApp_NetworkStartEvt?relay,0203H
        PUBLIC ??ZDApp_NodeProfileSync?relay
        FUNCTION ??ZDApp_NodeProfileSync?relay,0203H
        PUBLIC ??ZDApp_ProcessMsgCBs?relay
        FUNCTION ??ZDApp_ProcessMsgCBs?relay,0203H
        PUBLIC ??ZDApp_ProcessNetworkJoin?relay
        FUNCTION ??ZDApp_ProcessNetworkJoin?relay,0203H
        PUBLIC ??ZDApp_ProcessOSALMsg?relay
        FUNCTION ??ZDApp_ProcessOSALMsg?relay,0203H
        PUBLIC ??ZDApp_ReadNetworkRestoreState?relay
        FUNCTION ??ZDApp_ReadNetworkRestoreState?relay,0203H
        PUBLIC ??ZDApp_RegisterCBs?relay
        FUNCTION ??ZDApp_RegisterCBs?relay,0203H
        PUBLIC ??ZDApp_ResetTimerCancel?relay
        FUNCTION ??ZDApp_ResetTimerCancel?relay,0203H
        PUBLIC ??ZDApp_ResetTimerStart?relay
        FUNCTION ??ZDApp_ResetTimerStart?relay,0203H
        PUBLIC ??ZDApp_RestoreNetworkState?relay
        FUNCTION ??ZDApp_RestoreNetworkState?relay,0203H
        PUBLIC ??ZDApp_SaveNetworkStateEvt?relay
        FUNCTION ??ZDApp_SaveNetworkStateEvt?relay,0203H
        PUBLIC ??ZDApp_SecInit?relay
        FUNCTION ??ZDApp_SecInit?relay,0203H
        PUBLIC ??ZDApp_SendEventMsg?relay
        FUNCTION ??ZDApp_SendEventMsg?relay,0203H
        PUBLIC ??ZDApp_SendMsg?relay
        FUNCTION ??ZDApp_SendMsg?relay,0203H
        PUBLIC ??ZDApp_StartJoiningCycle?relay
        FUNCTION ??ZDApp_StartJoiningCycle?relay,0203H
        PUBLIC ??ZDApp_StartUpFromApp?relay
        FUNCTION ??ZDApp_StartUpFromApp?relay,0203H
        PUBLIC ??ZDApp_StopJoiningCycle?relay
        FUNCTION ??ZDApp_StopJoiningCycle?relay,0203H
        PUBLIC ??ZDApp_StopStartUp?relay
        FUNCTION ??ZDApp_StopStartUp?relay,0203H
        PUBLIC ??ZDApp_event_loop?relay
        FUNCTION ??ZDApp_event_loop?relay,0203H
        PUBLIC ??ZDOInitDevice?relay
        FUNCTION ??ZDOInitDevice?relay,0203H
        PUBLIC ??ZDO_JoinConfirmCB?relay
        FUNCTION ??ZDO_JoinConfirmCB?relay,0203H
        PUBLIC ??ZDO_LeaveCnf?relay
        FUNCTION ??ZDO_LeaveCnf?relay,0203H
        PUBLIC ??ZDO_LeaveInd?relay
        FUNCTION ??ZDO_LeaveInd?relay,0203H
        PUBLIC ??ZDO_NetworkDiscoveryConfirmCB?relay
        FUNCTION ??ZDO_NetworkDiscoveryConfirmCB?relay,0203H
        PUBLIC ??ZDO_NetworkFormationConfirmCB?relay
        FUNCTION ??ZDO_NetworkFormationConfirmCB?relay,0203H
        PUBLIC ??ZDO_PollConfirmCB?relay
        FUNCTION ??ZDO_PollConfirmCB?relay,0203H
        PUBLIC ??ZDO_SyncIndicationCB?relay
        FUNCTION ??ZDO_SyncIndicationCB?relay,0203H
        PUBLIC AddrMgrWriteNVRequest
        FUNCTION AddrMgrWriteNVRequest,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        PUBWEAK WDCTL
        PUBLIC ZDAppCheckForHoldKey
        FUNCTION ZDAppCheckForHoldKey,021203H
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        PUBLIC ZDAppDetermineDeviceType
        FUNCTION ZDAppDetermineDeviceType,0203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUBLIC ZDAppNwkAddr
        PUBLIC ZDAppTaskID
        PUBLIC ZDApp_AutoFindMode_epDesc
        PUBLIC ZDApp_ChangeMatchDescRespPermission
        FUNCTION ZDApp_ChangeMatchDescRespPermission,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ZDApp_CoordStartPANIDConflictCB
        FUNCTION ZDApp_CoordStartPANIDConflictCB,0203H
        ARGFRAME XSTACK, 0, STACK
        PUBLIC ZDApp_InMsgCB
        FUNCTION ZDApp_InMsgCB,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        PUBLIC ZDApp_Init
        FUNCTION ZDApp_Init,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        PUBLIC ZDApp_InitUserDesc
        FUNCTION ZDApp_InitUserDesc,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        PUBLIC ZDApp_LeaveCtrl
        PUBLIC ZDApp_LeaveCtrlBypass
        FUNCTION ZDApp_LeaveCtrlBypass,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC ZDApp_LeaveCtrlInit
        FUNCTION ZDApp_LeaveCtrlInit,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 14, STACK
        PUBLIC ZDApp_LeaveCtrlSet
        FUNCTION ZDApp_LeaveCtrlSet,021203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 14, STACK
        PUBLIC ZDApp_LeaveCtrlStartup
        FUNCTION ZDApp_LeaveCtrlStartup,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 16, STACK
        PUBLIC ZDApp_LeaveReset
        FUNCTION ZDApp_LeaveReset,021203H
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ZDApp_LeaveUpdate
        FUNCTION ZDApp_LeaveUpdate,021203H
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 11, STACK
        PUBLIC ZDApp_NVUpdate
        FUNCTION ZDApp_NVUpdate,021203H
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        PUBLIC ZDApp_NetworkInit
        FUNCTION ZDApp_NetworkInit,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ZDApp_NetworkStartEvt
        FUNCTION ZDApp_NetworkStartEvt,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC ZDApp_NodeProfileSync
        FUNCTION ZDApp_NodeProfileSync,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 14, STACK
        PUBLIC ZDApp_ProcessMsgCBs
        FUNCTION ZDApp_ProcessMsgCBs,0a1203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 33, STACK
        PUBLIC ZDApp_ProcessNetworkJoin
        FUNCTION ZDApp_ProcessNetworkJoin,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 12, STACK
        PUBLIC ZDApp_ProcessOSALMsg
        FUNCTION ZDApp_ProcessOSALMsg,0a1203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 15, STACK
        PUBLIC ZDApp_ReadNetworkRestoreState
        FUNCTION ZDApp_ReadNetworkRestoreState,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ZDApp_RegisterCBs
        FUNCTION ZDApp_RegisterCBs,021203H
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 2, STACK
        PUBLIC ZDApp_ResetTimerCancel
        FUNCTION ZDApp_ResetTimerCancel,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC ZDApp_ResetTimerStart
        FUNCTION ZDApp_ResetTimerStart,021203H
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ZDApp_RestoreNetworkState
        FUNCTION ZDApp_RestoreNetworkState,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ZDApp_SaveNetworkStateEvt
        FUNCTION ZDApp_SaveNetworkStateEvt,0203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUBLIC ZDApp_SecInit
        FUNCTION ZDApp_SecInit,021203H
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ZDApp_SendEventMsg
        FUNCTION ZDApp_SendEventMsg,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        PUBLIC ZDApp_SendMsg
        FUNCTION ZDApp_SendMsg,021203H
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME ISTACK, 1, STACK
        LOCFRAME XSTACK, 19, STACK
        PUBLIC ZDApp_StartJoiningCycle
        FUNCTION ZDApp_StartJoiningCycle,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC ZDApp_StartUpFromApp
        FUNCTION ZDApp_StartUpFromApp,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ZDApp_StopJoiningCycle
        FUNCTION ZDApp_StopJoiningCycle,0203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        PUBLIC ZDApp_StopStartUp
        FUNCTION ZDApp_StopStartUp,0203H
        ARGFRAME XSTACK, 0, STACK
        PUBLIC ZDApp_epDesc
        PUBLIC ZDApp_event_loop
        FUNCTION ZDApp_event_loop,0a1203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        PUBLIC ZDOInitDevice
        FUNCTION ZDOInitDevice,021203H
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        LOCFRAME XSTACK, 14, STACK
        PUBLIC ZDO_JoinConfirmCB
        FUNCTION ZDO_JoinConfirmCB,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ZDO_LeaveCnf
        FUNCTION ZDO_LeaveCnf,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBLIC ZDO_LeaveInd
        FUNCTION ZDO_LeaveInd,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 12, STACK
        PUBLIC ZDO_NetworkDiscoveryConfirmCB
        FUNCTION ZDO_NetworkDiscoveryConfirmCB,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME XSTACK, 30, STACK
        PUBLIC ZDO_NetworkFormationConfirmCB
        FUNCTION ZDO_NetworkFormationConfirmCB,0203H
        ARGFRAME XSTACK, 0, STACK
        PUBLIC ZDO_PollConfirmCB
        FUNCTION ZDO_PollConfirmCB,0203H
        ARGFRAME XSTACK, 0, STACK
        PUBLIC ZDO_SyncIndicationCB
        FUNCTION ZDO_SyncIndicationCB,021203H
        ARGFRAME XSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        PUBWEAK _A_IEN0
        PUBLIC _tmpRejoinState
        PUBLIC continueJoining
        PUBLIC devStartMode
        PUBLIC devState
        PUBLIC nwkStatus
        PUBLIC zdoDiscCounter
        
        CFI Names cfiNames0
        CFI StackFrame CFA_SP SP DATA
        CFI StackFrame CFA_PSP16 PSP16 XDATA
        CFI StackFrame CFA_XSP16 XSP16 XDATA
        CFI StaticOverlayFrame CFA_IOVERLAY IOVERLAY
        CFI StaticOverlayFrame CFA_DOVERLAY DOVERLAY
        CFI Resource `PSW.CY`:1, `B.BR0`:1, `B.BR1`:1, `B.BR2`:1, `B.BR3`:1
        CFI Resource `B.BR4`:1, `B.BR5`:1, `B.BR6`:1, `B.BR7`:1, `VB.BR8`:1
        CFI Resource `VB.BR9`:1, `VB.BR10`:1, `VB.BR11`:1, `VB.BR12`:1
        CFI Resource `VB.BR13`:1, `VB.BR14`:1, `VB.BR15`:1, VB:8, B:8, A:8
        CFI Resource PSW:8, DPL0:8, DPH0:8, R0:8, R1:8, R2:8, R3:8, R4:8, R5:8
        CFI Resource R6:8, R7:8, V0:8, V1:8, V2:8, V3:8, V4:8, V5:8, V6:8, V7:8
        CFI Resource SP:8, PSPH:8, PSPL:8, PSP16:16, XSPH:8, XSPL:8, XSP16:16
        CFI VirtualResource ?RET:24
        CFI Resource ?BRET_EXT:8
        CFI VirtualResource ?RET_HIGH:8, ?RET_LOW:8
        CFI ResourceParts PSP16 PSPH, PSPL
        CFI ResourceParts XSP16 XSPH, XSPL
        CFI ResourceParts ?RET ?BRET_EXT, ?RET_HIGH, ?RET_LOW
        CFI EndNames cfiNames0
        
        CFI Common cfiCommon0 Using cfiNames0
        CFI CodeAlign 1
        CFI DataAlign -1
        CFI ReturnAddress ?RET CODE
        CFI CFA_DOVERLAY Used
        CFI CFA_IOVERLAY Used
        CFI CFA_SP SP+-3
        CFI CFA_PSP16 PSP16+0
        CFI CFA_XSP16 XSP16+0
        CFI `PSW.CY` SameValue
        CFI `B.BR0` SameValue
        CFI `B.BR1` SameValue
        CFI `B.BR2` SameValue
        CFI `B.BR3` SameValue
        CFI `B.BR4` SameValue
        CFI `B.BR5` SameValue
        CFI `B.BR6` SameValue
        CFI `B.BR7` SameValue
        CFI `VB.BR8` SameValue
        CFI `VB.BR9` SameValue
        CFI `VB.BR10` SameValue
        CFI `VB.BR11` SameValue
        CFI `VB.BR12` SameValue
        CFI `VB.BR13` SameValue
        CFI `VB.BR14` SameValue
        CFI `VB.BR15` SameValue
        CFI VB SameValue
        CFI B Undefined
        CFI A Undefined
        CFI PSW SameValue
        CFI DPL0 SameValue
        CFI DPH0 SameValue
        CFI R0 Undefined
        CFI R1 Undefined
        CFI R2 Undefined
        CFI R3 Undefined
        CFI R4 Undefined
        CFI R5 Undefined
        CFI R6 SameValue
        CFI R7 SameValue
        CFI V0 SameValue
        CFI V1 SameValue
        CFI V2 SameValue
        CFI V3 SameValue
        CFI V4 SameValue
        CFI V5 SameValue
        CFI V6 SameValue
        CFI V7 SameValue
        CFI PSPH Undefined
        CFI PSPL Undefined
        CFI XSPH Undefined
        CFI XSPL Undefined
        CFI ?RET Concat
        CFI ?BRET_EXT Frame(CFA_SP, 3)
        CFI ?RET_HIGH Frame(CFA_SP, 2)
        CFI ?RET_LOW Frame(CFA_SP, 1)
        CFI EndCommon cfiCommon0
        
NLME_GetExtAddr     SYMBOL "NLME_GetExtAddr"
ZDO_Init            SYMBOL "ZDO_Init"
afRegister          SYMBOL "afRegister"
NLME_GetRequest     SYMBOL "NLME_GetRequest"
NLME_SetBroadcastFilter SYMBOL "NLME_SetBroadcastFilter"
HalLedBlink         SYMBOL "HalLedBlink"
ZDSecMgrInit        SYMBOL "ZDSecMgrInit"
osal_msg_receive    SYMBOL "osal_msg_receive"
osal_msg_deallocate SYMBOL "osal_msg_deallocate"
ZDO_UpdateNwkStatus SYMBOL "ZDO_UpdateNwkStatus"
ZDO_StartDevice     SYMBOL "ZDO_StartDevice"
osal_rand           SYMBOL "osal_rand"
zgReadStartupOptions SYMBOL "zgReadStartupOptions"
osal_pwrmgr_device  SYMBOL "osal_pwrmgr_device"
osal_set_event      SYMBOL "osal_set_event"
NLME_GetEnergyThreshold SYMBOL "NLME_GetEnergyThreshold"
NLME_SetEnergyThreshold SYMBOL "NLME_SetEnergyThreshold"
NLME_InitNV         SYMBOL "NLME_InitNV"
NLME_RestoreFromNV  SYMBOL "NLME_RestoreFromNV"
NLME_GetShortAddr   SYMBOL "NLME_GetShortAddr"
osal_memset         SYMBOL "osal_memset"
osal_nv_item_init   SYMBOL "osal_nv_item_init"
osal_nv_read        SYMBOL "osal_nv_read"
HalKeyRead          SYMBOL "HalKeyRead"
ZDP_IncomingData    SYMBOL "ZDP_IncomingData"
NLME_JoinRequest    SYMBOL "NLME_JoinRequest"
NLME_ReJoinRequest  SYMBOL "NLME_ReJoinRequest"
NLME_SetPollRate    SYMBOL "NLME_SetPollRate"
NLME_SetQueuedPollRate SYMBOL "NLME_SetQueuedPollRate"
NLME_SetResponseRate SYMBOL "NLME_SetResponseRate"
ZDO_ParseAddrRsp    SYMBOL "ZDO_ParseAddrRsp"
ZDO_UpdateAddrManager SYMBOL "ZDO_UpdateAddrManager"
osal_mem_free       SYMBOL "osal_mem_free"
ZDO_ParseBindUnbindReq SYMBOL "ZDO_ParseBindUnbindReq"
ZDO_ProcessBindUnbindReq SYMBOL "ZDO_ProcessBindUnbindReq"
ZDO_RegisterForZDOMsg SYMBOL "ZDO_RegisterForZDOMsg"
osal_start_timerEx  SYMBOL "osal_start_timerEx"
osal_stop_timerEx   SYMBOL "osal_stop_timerEx"
osal_nv_write       SYMBOL "osal_nv_write"
NLME_RemoveChild    SYMBOL "NLME_RemoveChild"
osal_msg_allocate   SYMBOL "osal_msg_allocate"
osal_memcpy         SYMBOL "osal_memcpy"
osal_msg_send       SYMBOL "osal_msg_send"
osal_cpyExtAddr     SYMBOL "osal_cpyExtAddr"
HalLedSet           SYMBOL "HalLedSet"
osal_ExtAddrEqual   SYMBOL "osal_ExtAddrEqual"
NLME_GetCoordShortAddr SYMBOL "NLME_GetCoordShortAddr"
osal_get_timeoutEx  SYMBOL "osal_get_timeoutEx"
ZDP_GenericRsp      SYMBOL "ZDP_GenericRsp"
afSetMatch          SYMBOL "afSetMatch"
nwk_getNetworkDesc  SYMBOL "nwk_getNetworkDesc"
??HalKeyRead?relay  SYMBOL "?relay", HalKeyRead
??HalLedBlink?relay SYMBOL "?relay", HalLedBlink
??HalLedSet?relay   SYMBOL "?relay", HalLedSet
??NLME_GetCoordShortAddr?relay SYMBOL "?relay", NLME_GetCoordShortAddr
??NLME_GetEnergyThreshold?relay SYMBOL "?relay", NLME_GetEnergyThreshold
??NLME_GetExtAddr?relay SYMBOL "?relay", NLME_GetExtAddr
??NLME_GetRequest?relay SYMBOL "?relay", NLME_GetRequest
??NLME_GetShortAddr?relay SYMBOL "?relay", NLME_GetShortAddr
??NLME_InitNV?relay SYMBOL "?relay", NLME_InitNV
??NLME_JoinRequest?relay SYMBOL "?relay", NLME_JoinRequest
??NLME_ReJoinRequest?relay SYMBOL "?relay", NLME_ReJoinRequest
??NLME_RemoveChild?relay SYMBOL "?relay", NLME_RemoveChild
??NLME_RestoreFromNV?relay SYMBOL "?relay", NLME_RestoreFromNV
??NLME_SetBroadcastFilter?relay SYMBOL "?relay", NLME_SetBroadcastFilter
??NLME_SetEnergyThreshold?relay SYMBOL "?relay", NLME_SetEnergyThreshold
??NLME_SetPollRate?relay SYMBOL "?relay", NLME_SetPollRate
??NLME_SetQueuedPollRate?relay SYMBOL "?relay", NLME_SetQueuedPollRate
??NLME_SetResponseRate?relay SYMBOL "?relay", NLME_SetResponseRate
??ZDO_Init?relay    SYMBOL "?relay", ZDO_Init
??ZDO_ParseAddrRsp?relay SYMBOL "?relay", ZDO_ParseAddrRsp
??ZDO_ParseBindUnbindReq?relay SYMBOL "?relay", ZDO_ParseBindUnbindReq
??ZDO_ProcessBindUnbindReq?relay SYMBOL "?relay", ZDO_ProcessBindUnbindReq
??ZDO_RegisterForZDOMsg?relay SYMBOL "?relay", ZDO_RegisterForZDOMsg
??ZDO_StartDevice?relay SYMBOL "?relay", ZDO_StartDevice
??ZDO_UpdateAddrManager?relay SYMBOL "?relay", ZDO_UpdateAddrManager
??ZDO_UpdateNwkStatus?relay SYMBOL "?relay", ZDO_UpdateNwkStatus
??ZDP_GenericRsp?relay SYMBOL "?relay", ZDP_GenericRsp
??ZDP_IncomingData?relay SYMBOL "?relay", ZDP_IncomingData
??ZDSecMgrInit?relay SYMBOL "?relay", ZDSecMgrInit
??afRegister?relay  SYMBOL "?relay", afRegister
??afSetMatch?relay  SYMBOL "?relay", afSetMatch
??nwk_getNetworkDesc?relay SYMBOL "?relay", nwk_getNetworkDesc
??osal_ExtAddrEqual?relay SYMBOL "?relay", osal_ExtAddrEqual
??osal_cpyExtAddr?relay SYMBOL "?relay", osal_cpyExtAddr
??osal_get_timeoutEx?relay SYMBOL "?relay", osal_get_timeoutEx
??osal_mem_free?relay SYMBOL "?relay", osal_mem_free
??osal_memcpy?relay SYMBOL "?relay", osal_memcpy
??osal_memset?relay SYMBOL "?relay", osal_memset
??osal_msg_allocate?relay SYMBOL "?relay", osal_msg_allocate
??osal_msg_deallocate?relay SYMBOL "?relay", osal_msg_deallocate
??osal_msg_receive?relay SYMBOL "?relay", osal_msg_receive
??osal_msg_send?relay SYMBOL "?relay", osal_msg_send
??osal_nv_item_init?relay SYMBOL "?relay", osal_nv_item_init
??osal_nv_read?relay SYMBOL "?relay", osal_nv_read
??osal_nv_write?relay SYMBOL "?relay", osal_nv_write
??osal_pwrmgr_device?relay SYMBOL "?relay", osal_pwrmgr_device
??osal_rand?relay   SYMBOL "?relay", osal_rand
??osal_set_event?relay SYMBOL "?relay", osal_set_event
??osal_start_timerEx?relay SYMBOL "?relay", osal_start_timerEx
??osal_stop_timerEx?relay SYMBOL "?relay", osal_stop_timerEx
??zgReadStartupOptions?relay SYMBOL "?relay", zgReadStartupOptions
AddrMgrWriteNVRequest SYMBOL "AddrMgrWriteNVRequest"
??AddrMgrWriteNVRequest?relay SYMBOL "?relay", AddrMgrWriteNVRequest
ZDAppCheckForHoldKey SYMBOL "ZDAppCheckForHoldKey"
??ZDAppCheckForHoldKey?relay SYMBOL "?relay", ZDAppCheckForHoldKey
ZDAppDetermineDeviceType SYMBOL "ZDAppDetermineDeviceType"
??ZDAppDetermineDeviceType?relay SYMBOL "?relay", ZDAppDetermineDeviceType
ZDApp_ChangeMatchDescRespPermission SYMBOL "ZDApp_ChangeMatchDescRespPermission"
??ZDApp_ChangeMatchDescRespPermission?relay SYMBOL "?relay", ZDApp_ChangeMatchDescRespPermission
ZDApp_CoordStartPANIDConflictCB SYMBOL "ZDApp_CoordStartPANIDConflictCB"
??ZDApp_CoordStartPANIDConflictCB?relay SYMBOL "?relay", ZDApp_CoordStartPANIDConflictCB
ZDApp_InMsgCB       SYMBOL "ZDApp_InMsgCB"
??ZDApp_InMsgCB?relay SYMBOL "?relay", ZDApp_InMsgCB
ZDApp_Init          SYMBOL "ZDApp_Init"
??ZDApp_Init?relay  SYMBOL "?relay", ZDApp_Init
ZDApp_InitUserDesc  SYMBOL "ZDApp_InitUserDesc"
??ZDApp_InitUserDesc?relay SYMBOL "?relay", ZDApp_InitUserDesc
ZDApp_LeaveCtrlBypass SYMBOL "ZDApp_LeaveCtrlBypass"
??ZDApp_LeaveCtrlBypass?relay SYMBOL "?relay", ZDApp_LeaveCtrlBypass
ZDApp_LeaveCtrlInit SYMBOL "ZDApp_LeaveCtrlInit"
??ZDApp_LeaveCtrlInit?relay SYMBOL "?relay", ZDApp_LeaveCtrlInit
ZDApp_LeaveCtrlSet  SYMBOL "ZDApp_LeaveCtrlSet"
??ZDApp_LeaveCtrlSet?relay SYMBOL "?relay", ZDApp_LeaveCtrlSet
ZDApp_LeaveCtrlStartup SYMBOL "ZDApp_LeaveCtrlStartup"
??ZDApp_LeaveCtrlStartup?relay SYMBOL "?relay", ZDApp_LeaveCtrlStartup
ZDApp_LeaveReset    SYMBOL "ZDApp_LeaveReset"
??ZDApp_LeaveReset?relay SYMBOL "?relay", ZDApp_LeaveReset
ZDApp_LeaveUpdate   SYMBOL "ZDApp_LeaveUpdate"
??ZDApp_LeaveUpdate?relay SYMBOL "?relay", ZDApp_LeaveUpdate
ZDApp_NVUpdate      SYMBOL "ZDApp_NVUpdate"
??ZDApp_NVUpdate?relay SYMBOL "?relay", ZDApp_NVUpdate
ZDApp_NetworkInit   SYMBOL "ZDApp_NetworkInit"
??ZDApp_NetworkInit?relay SYMBOL "?relay", ZDApp_NetworkInit
ZDApp_NetworkStartEvt SYMBOL "ZDApp_NetworkStartEvt"
??ZDApp_NetworkStartEvt?relay SYMBOL "?relay", ZDApp_NetworkStartEvt
ZDApp_NodeProfileSync SYMBOL "ZDApp_NodeProfileSync"
??ZDApp_NodeProfileSync?relay SYMBOL "?relay", ZDApp_NodeProfileSync
ZDApp_ProcessMsgCBs SYMBOL "ZDApp_ProcessMsgCBs"
??ZDApp_ProcessMsgCBs?relay SYMBOL "?relay", ZDApp_ProcessMsgCBs
ZDApp_ProcessNetworkJoin SYMBOL "ZDApp_ProcessNetworkJoin"
??ZDApp_ProcessNetworkJoin?relay SYMBOL "?relay", ZDApp_ProcessNetworkJoin
ZDApp_ProcessOSALMsg SYMBOL "ZDApp_ProcessOSALMsg"
??ZDApp_ProcessOSALMsg?relay SYMBOL "?relay", ZDApp_ProcessOSALMsg
ZDApp_ReadNetworkRestoreState SYMBOL "ZDApp_ReadNetworkRestoreState"
??ZDApp_ReadNetworkRestoreState?relay SYMBOL "?relay", ZDApp_ReadNetworkRestoreState
ZDApp_RegisterCBs   SYMBOL "ZDApp_RegisterCBs"
??ZDApp_RegisterCBs?relay SYMBOL "?relay", ZDApp_RegisterCBs
ZDApp_ResetTimerCancel SYMBOL "ZDApp_ResetTimerCancel"
??ZDApp_ResetTimerCancel?relay SYMBOL "?relay", ZDApp_ResetTimerCancel
ZDApp_ResetTimerStart SYMBOL "ZDApp_ResetTimerStart"
??ZDApp_ResetTimerStart?relay SYMBOL "?relay", ZDApp_ResetTimerStart
ZDApp_RestoreNetworkState SYMBOL "ZDApp_RestoreNetworkState"
??ZDApp_RestoreNetworkState?relay SYMBOL "?relay", ZDApp_RestoreNetworkState
ZDApp_SaveNetworkStateEvt SYMBOL "ZDApp_SaveNetworkStateEvt"
??ZDApp_SaveNetworkStateEvt?relay SYMBOL "?relay", ZDApp_SaveNetworkStateEvt
ZDApp_SecInit       SYMBOL "ZDApp_SecInit"
??ZDApp_SecInit?relay SYMBOL "?relay", ZDApp_SecInit
ZDApp_SendEventMsg  SYMBOL "ZDApp_SendEventMsg"
??ZDApp_SendEventMsg?relay SYMBOL "?relay", ZDApp_SendEventMsg
ZDApp_SendMsg       SYMBOL "ZDApp_SendMsg"
??ZDApp_SendMsg?relay SYMBOL "?relay", ZDApp_SendMsg
ZDApp_StartJoiningCycle SYMBOL "ZDApp_StartJoiningCycle"
??ZDApp_StartJoiningCycle?relay SYMBOL "?relay", ZDApp_StartJoiningCycle
ZDApp_StartUpFromApp SYMBOL "ZDApp_StartUpFromApp"
??ZDApp_StartUpFromApp?relay SYMBOL "?relay", ZDApp_StartUpFromApp
ZDApp_StopJoiningCycle SYMBOL "ZDApp_StopJoiningCycle"
??ZDApp_StopJoiningCycle?relay SYMBOL "?relay", ZDApp_StopJoiningCycle
ZDApp_StopStartUp   SYMBOL "ZDApp_StopStartUp"
??ZDApp_StopStartUp?relay SYMBOL "?relay", ZDApp_StopStartUp
ZDApp_event_loop    SYMBOL "ZDApp_event_loop"
??ZDApp_event_loop?relay SYMBOL "?relay", ZDApp_event_loop
ZDOInitDevice       SYMBOL "ZDOInitDevice"
??ZDOInitDevice?relay SYMBOL "?relay", ZDOInitDevice
ZDO_JoinConfirmCB   SYMBOL "ZDO_JoinConfirmCB"
??ZDO_JoinConfirmCB?relay SYMBOL "?relay", ZDO_JoinConfirmCB
ZDO_LeaveCnf        SYMBOL "ZDO_LeaveCnf"
??ZDO_LeaveCnf?relay SYMBOL "?relay", ZDO_LeaveCnf
ZDO_LeaveInd        SYMBOL "ZDO_LeaveInd"
??ZDO_LeaveInd?relay SYMBOL "?relay", ZDO_LeaveInd
ZDO_NetworkDiscoveryConfirmCB SYMBOL "ZDO_NetworkDiscoveryConfirmCB"
??ZDO_NetworkDiscoveryConfirmCB?relay SYMBOL "?relay", ZDO_NetworkDiscoveryConfirmCB
ZDO_NetworkFormationConfirmCB SYMBOL "ZDO_NetworkFormationConfirmCB"
??ZDO_NetworkFormationConfirmCB?relay SYMBOL "?relay", ZDO_NetworkFormationConfirmCB
ZDO_PollConfirmCB   SYMBOL "ZDO_PollConfirmCB"
??ZDO_PollConfirmCB?relay SYMBOL "?relay", ZDO_PollConfirmCB
ZDO_SyncIndicationCB SYMBOL "ZDO_SyncIndicationCB"
??ZDO_SyncIndicationCB?relay SYMBOL "?relay", ZDO_SyncIndicationCB

        EXTERN NLME_GetExtAddr
        FUNCTION NLME_GetExtAddr,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_Init
        FUNCTION ZDO_Init,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN afRegister
        FUNCTION afRegister,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_GetRequest
        FUNCTION NLME_GetRequest,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_SetBroadcastFilter
        FUNCTION NLME_SetBroadcastFilter,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalLedBlink
        FUNCTION HalLedBlink,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDSecMgrInit
        FUNCTION ZDSecMgrInit,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_msg_receive
        FUNCTION osal_msg_receive,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_msg_deallocate
        FUNCTION osal_msg_deallocate,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_UpdateNwkStatus
        FUNCTION ZDO_UpdateNwkStatus,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_StartDevice
        FUNCTION ZDO_StartDevice,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_rand
        FUNCTION osal_rand,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN zgReadStartupOptions
        FUNCTION zgReadStartupOptions,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_pwrmgr_device
        FUNCTION osal_pwrmgr_device,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_set_event
        FUNCTION osal_set_event,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_GetEnergyThreshold
        FUNCTION NLME_GetEnergyThreshold,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_SetEnergyThreshold
        FUNCTION NLME_SetEnergyThreshold,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_InitNV
        FUNCTION NLME_InitNV,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_RestoreFromNV
        FUNCTION NLME_RestoreFromNV,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_GetShortAddr
        FUNCTION NLME_GetShortAddr,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_memset
        FUNCTION osal_memset,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 27, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_nv_item_init
        FUNCTION osal_nv_item_init,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_nv_read
        FUNCTION osal_nv_read,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalKeyRead
        FUNCTION HalKeyRead,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDP_IncomingData
        FUNCTION ZDP_IncomingData,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_JoinRequest
        FUNCTION NLME_JoinRequest,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_ReJoinRequest
        FUNCTION NLME_ReJoinRequest,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_SetPollRate
        FUNCTION NLME_SetPollRate,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_SetQueuedPollRate
        FUNCTION NLME_SetQueuedPollRate,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_SetResponseRate
        FUNCTION NLME_SetResponseRate,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_ParseAddrRsp
        FUNCTION ZDO_ParseAddrRsp,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_UpdateAddrManager
        FUNCTION ZDO_UpdateAddrManager,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_mem_free
        FUNCTION osal_mem_free,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_ParseBindUnbindReq
        FUNCTION ZDO_ParseBindUnbindReq,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_ProcessBindUnbindReq
        FUNCTION ZDO_ProcessBindUnbindReq,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDO_RegisterForZDOMsg
        FUNCTION ZDO_RegisterForZDOMsg,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZMacSetReq
        FUNCTION ZMacSetReq,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_start_timerEx
        FUNCTION osal_start_timerEx,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_stop_timerEx
        FUNCTION osal_stop_timerEx,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_nv_write
        FUNCTION osal_nv_write,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_RemoveChild
        FUNCTION NLME_RemoveChild,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_msg_allocate
        FUNCTION osal_msg_allocate,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_memcpy
        FUNCTION osal_memcpy,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_msg_send
        FUNCTION osal_msg_send,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_cpyExtAddr
        FUNCTION osal_cpyExtAddr,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN HalLedSet
        FUNCTION HalLedSet,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_ExtAddrEqual
        FUNCTION osal_ExtAddrEqual,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN NLME_GetCoordShortAddr
        FUNCTION NLME_GetCoordShortAddr,0202H
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN osal_get_timeoutEx
        FUNCTION osal_get_timeoutEx,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ZDP_GenericRsp
        FUNCTION ZDP_GenericRsp,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN afSetMatch
        FUNCTION afSetMatch,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN nwk_getNetworkDesc
        FUNCTION nwk_getNetworkDesc,0202H
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        EXTERN ??HalKeyRead?relay
        FUNCTION ??HalKeyRead?relay,00H
        EXTERN ??HalLedBlink?relay
        FUNCTION ??HalLedBlink?relay,00H
        EXTERN ??HalLedSet?relay
        FUNCTION ??HalLedSet?relay,00H
        EXTERN ??NLME_GetCoordShortAddr?relay
        FUNCTION ??NLME_GetCoordShortAddr?relay,00H
        EXTERN ??NLME_GetEnergyThreshold?relay
        FUNCTION ??NLME_GetEnergyThreshold?relay,00H
        EXTERN ??NLME_GetExtAddr?relay
        FUNCTION ??NLME_GetExtAddr?relay,00H
        EXTERN ??NLME_GetRequest?relay
        FUNCTION ??NLME_GetRequest?relay,00H
        EXTERN ??NLME_GetShortAddr?relay
        FUNCTION ??NLME_GetShortAddr?relay,00H
        EXTERN ??NLME_InitNV?relay
        FUNCTION ??NLME_InitNV?relay,00H
        EXTERN ??NLME_JoinRequest?relay
        FUNCTION ??NLME_JoinRequest?relay,00H
        EXTERN ??NLME_ReJoinRequest?relay
        FUNCTION ??NLME_ReJoinRequest?relay,00H
        EXTERN ??NLME_RemoveChild?relay
        FUNCTION ??NLME_RemoveChild?relay,00H
        EXTERN ??NLME_RestoreFromNV?relay
        FUNCTION ??NLME_RestoreFromNV?relay,00H
        EXTERN ??NLME_SetBroadcastFilter?relay
        FUNCTION ??NLME_SetBroadcastFilter?relay,00H
        EXTERN ??NLME_SetEnergyThreshold?relay
        FUNCTION ??NLME_SetEnergyThreshold?relay,00H
        EXTERN ??NLME_SetPollRate?relay
        FUNCTION ??NLME_SetPollRate?relay,00H
        EXTERN ??NLME_SetQueuedPollRate?relay
        FUNCTION ??NLME_SetQueuedPollRate?relay,00H
        EXTERN ??NLME_SetResponseRate?relay
        FUNCTION ??NLME_SetResponseRate?relay,00H
        EXTERN ??ZDO_Init?relay
        FUNCTION ??ZDO_Init?relay,00H
        EXTERN ??ZDO_ParseAddrRsp?relay
        FUNCTION ??ZDO_ParseAddrRsp?relay,00H
        EXTERN ??ZDO_ParseBindUnbindReq?relay
        FUNCTION ??ZDO_ParseBindUnbindReq?relay,00H
        EXTERN ??ZDO_ProcessBindUnbindReq?relay
        FUNCTION ??ZDO_ProcessBindUnbindReq?relay,00H
        EXTERN ??ZDO_RegisterForZDOMsg?relay
        FUNCTION ??ZDO_RegisterForZDOMsg?relay,00H
        EXTERN ??ZDO_StartDevice?relay
        FUNCTION ??ZDO_StartDevice?relay,00H
        EXTERN ??ZDO_UpdateAddrManager?relay
        FUNCTION ??ZDO_UpdateAddrManager?relay,00H
        EXTERN ??ZDO_UpdateNwkStatus?relay
        FUNCTION ??ZDO_UpdateNwkStatus?relay,00H
        EXTERN ??ZDP_GenericRsp?relay
        FUNCTION ??ZDP_GenericRsp?relay,00H
        EXTERN ??ZDP_IncomingData?relay
        FUNCTION ??ZDP_IncomingData?relay,00H
        EXTERN ??ZDSecMgrInit?relay
        FUNCTION ??ZDSecMgrInit?relay,00H
        EXTERN ??afRegister?relay
        FUNCTION ??afRegister?relay,00H
        EXTERN ??afSetMatch?relay
        FUNCTION ??afSetMatch?relay,00H
        EXTERN ??nwk_getNetworkDesc?relay
        FUNCTION ??nwk_getNetworkDesc?relay,00H
        EXTERN ??osal_ExtAddrEqual?relay
        FUNCTION ??osal_ExtAddrEqual?relay,00H
        EXTERN ??osal_cpyExtAddr?relay
        FUNCTION ??osal_cpyExtAddr?relay,00H
        EXTERN ??osal_get_timeoutEx?relay
        FUNCTION ??osal_get_timeoutEx?relay,00H
        EXTERN ??osal_mem_free?relay
        FUNCTION ??osal_mem_free?relay,00H
        EXTERN ??osal_memcpy?relay
        FUNCTION ??osal_memcpy?relay,00H
        EXTERN ??osal_memset?relay
        FUNCTION ??osal_memset?relay,00H
        EXTERN ??osal_msg_allocate?relay
        FUNCTION ??osal_msg_allocate?relay,00H
        EXTERN ??osal_msg_deallocate?relay
        FUNCTION ??osal_msg_deallocate?relay,00H
        EXTERN ??osal_msg_receive?relay
        FUNCTION ??osal_msg_receive?relay,00H
        EXTERN ??osal_msg_send?relay
        FUNCTION ??osal_msg_send?relay,00H
        EXTERN ??osal_nv_item_init?relay
        FUNCTION ??osal_nv_item_init?relay,00H
        EXTERN ??osal_nv_read?relay
        FUNCTION ??osal_nv_read?relay,00H
        EXTERN ??osal_nv_write?relay
        FUNCTION ??osal_nv_write?relay,00H
        EXTERN ??osal_pwrmgr_device?relay
        FUNCTION ??osal_pwrmgr_device?relay,00H
        EXTERN ??osal_rand?relay
        FUNCTION ??osal_rand?relay,00H
        EXTERN ??osal_set_event?relay
        FUNCTION ??osal_set_event?relay,00H
        EXTERN ??osal_start_timerEx?relay
        FUNCTION ??osal_start_timerEx?relay,00H
        EXTERN ??osal_stop_timerEx?relay
        FUNCTION ??osal_stop_timerEx?relay,00H
        EXTERN ??zgReadStartupOptions?relay
        FUNCTION ??zgReadStartupOptions?relay,00H
        EXTERN ZDO_Config_Node_Descriptor
        EXTERN _NIB
        EXTERN zgConfigPANID
        EXTERN zgDefaultStartingScanDuration
        EXTERN zgStackProfile

// C:\Texas Instruments\ZStack-1.4.3-1.2.1\Components\stack\zdo\ZDApp.c
//    1 /**************************************************************************************************
//    2   Filename:       ZDApp.c
//    3   Revised:        $Date: 2007-11-28 15:44:45 -0800 (Wed, 28 Nov 2007) $
//    4   Revision:       $Revision: 15983 $
//    5 
//    6   Description:    This file contains the interface to the Zigbee Device Application. This is the
//    7                   Application part that the use can change. This also contains the Task functions.
//    8 
//    9 
//   10   Copyright 2004-2007 Texas Instruments Incorporated. All rights reserved.
//   11 
//   12   IMPORTANT: Your use of this Software is limited to those specific rights
//   13   granted under the terms of a software license agreement between the user
//   14   who downloaded the software, his/her employer (which must be your employer)
//   15   and Texas Instruments Incorporated (the "License").  You may not use this
//   16   Software unless you agree to abide by the terms of the License. The License
//   17   limits your use, and you acknowledge, that the Software may not be modified,
//   18   copied or distributed unless embedded on a Texas Instruments microcontroller
//   19   or used solely and exclusively in conjunction with a Texas Instruments radio
//   20   frequency transceiver, which is integrated into your product.  Other than for
//   21   the foregoing purpose, you may not use, reproduce, copy, prepare derivative
//   22   works of, modify, distribute, perform, display or sell this Software and/or
//   23   its documentation for any purpose.
//   24 
//   25   YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
//   26   PROVIDED AS IS WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED, 
//   27   INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE, 
//   28   NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
//   29   TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
//   30   NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
//   31   LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
//   32   INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
//   33   OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
//   34   OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
//   35   (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
//   36 
//   37   Should you have any questions regarding your right to use this Software,
//   38   contact Texas Instruments Incorporated at www.TI.com. 
//   39 **************************************************************************************************/
//   40 
//   41 /*********************************************************************
//   42  * INCLUDES
//   43  */
//   44 #include "ZComDef.h"
//   45 #include "ZMac.h"
//   46 #include "OSAL.h"
//   47 #include "OSAL_Tasks.h"
//   48 #include "OSAL_PwrMgr.h"
//   49 #include "OSAL_Nv.h"
//   50 #include "AF.h"
//   51 #include "APSMEDE.h"
//   52 #include "NLMEDE.h"
//   53 #include "AddrMgr.h"
//   54 #include "ZDProfile.h"
//   55 #include "ZDObject.h"
//   56 #include "ZDConfig.h"
//   57 #include "ZDSecMgr.h"
//   58 #include "ZDApp.h"
//   59 #include "DebugTrace.h"
//   60 #include "nwk_util.h"
//   61 #include "OnBoard.h"

        ASEGN SFR_AN:DATA:NOROOT,0a8H
// union <unnamed> volatile __sfr _A_IEN0
_A_IEN0:
        DS 1

        ASEGN SFR_AN:DATA:NOROOT,0c9H
// unsigned char volatile __sfr WDCTL
WDCTL:
        DS 1
//   62 #include "ZGlobals.h"
//   63 
//   64 #if   ( SECURE != 0  )
//   65   #include "ssp.h"
//   66 #endif
//   67 
//   68 #if defined( MT_ZDO_FUNC )
//   69   #include "MT_ZDO.h"
//   70 #endif
//   71 
//   72 /* HAL */
//   73 #include "hal_led.h"
//   74 #include "hal_lcd.h"
//   75 #include "hal_key.h"
//   76 
//   77 #if defined( MT_MAC_FUNC ) || defined( MT_MAC_CB_FUNC )
//   78   #error "ERROR! MT_MAC functionalities should be disabled on ZDO devices"
//   79 #endif
//   80 /*********************************************************************
//   81  * MACROS
//   82  */
//   83 
//   84 /*********************************************************************
//   85  * CONSTANTS
//   86  */
//   87 #if !defined( NWK_START_DELAY )
//   88   #define NWK_START_DELAY             100   // in milliseconds
//   89 #endif
//   90 
//   91 #if !defined( EXTENDED_JOINING_RANDOM_MASK )
//   92   #define EXTENDED_JOINING_RANDOM_MASK 0x007F
//   93 #endif
//   94 
//   95 #if !defined( BEACON_REQUEST_DELAY )
//   96   #define BEACON_REQUEST_DELAY        100   // in milliseconds
//   97 #endif
//   98 
//   99 #if !defined( BEACON_REQ_DELAY_MASK )
//  100   #define BEACON_REQ_DELAY_MASK       0x007F
//  101 #endif
//  102 
//  103 #if defined (AUTO_SOFT_START)
//  104   #define MAX_RESUME_RETRY            3
//  105   #define NUM_DISC_ATTEMPTS           3
//  106 #else
//  107   #define MAX_RESUME_RETRY            1
//  108 #endif
//  109 
//  110 #define MAX_DEVICE_UNAUTH_TIMEOUT   5000  // 5 seconds
//  111 
//  112 // Beacon Order Settings (see NLMEDE.h)
//  113 #define DEFAULT_BEACON_ORDER        BEACON_ORDER_NO_BEACONS
//  114 #define DEFAULT_SUPERFRAME_ORDER    DEFAULT_BEACON_ORDER
//  115 
//  116 #if ( SECURE != 0 )
//  117   #if !defined( MAX_NWK_FRAMECOUNTER_CHANGES )
//  118     // The number of times the frame counter can change before
//  119     // saving to NV
//  120     #define MAX_NWK_FRAMECOUNTER_CHANGES    1000
//  121   #endif
//  122 #endif
//  123 
//  124 // Leave control bits
//  125 #define ZDAPP_LEAVE_CTRL_INIT 0
//  126 #define ZDAPP_LEAVE_CTRL_SET  1
//  127 #define ZDAPP_LEAVE_CTRL_RA   2
//  128 
//  129 // Standard time to update NWK NV data
//  130 #define ZDAPP_UPDATE_NWK_NV_TIME 700
//  131 
//  132 // Address Manager Stub Implementation
//  133 #define ZDApp_NwkWriteNVRequest AddrMgrWriteNVRequest
//  134 
//  135 /*********************************************************************
//  136  * TYPEDEFS
//  137  */
//  138 
//  139 /*********************************************************************
//  140  * GLOBAL VARIABLES
//  141  */
//  142 
//  143 #if defined( LCD_SUPPORTED )
//  144   byte MatchRsps = 0;
//  145 #endif
//  146 

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA
//  147 byte zdoDiscCounter = 1;
zdoDiscCounter:
        DS 1
        REQUIRE `?<Initializer for zdoDiscCounter>`
        REQUIRE __INIT_XDATA_I
//  148 

        RSEG XDATA_Z:XDATA:NOROOT(0)
//  149 zAddrType_t ZDAppNwkAddr;
ZDAppNwkAddr:
        DS 9
        REQUIRE __INIT_XDATA_Z
//  150 
//  151 #if defined ( ZDO_MGMT_NWKDISC_RESPONSE )
//  152   byte zdappMgmtNwkDiscRspTransSeq;
//  153   byte zdappMgmtNwkDiscReqInProgress = FALSE;
//  154   zAddrType_t zdappMgmtNwkDiscRspAddr;
//  155   byte zdappMgmtNwkDiscStartIndex;
//  156   byte zdappMgmtSavedNwkState;
//  157 #endif
//  158 
//  159 #if ( SECURE != 0 )
//  160   uint16 nwkFrameCounterChanges = 0;
//  161 #endif
//  162 
//  163 #if defined ( SOFT_START )
//  164   static uint8 softStartAllowCoord = TRUE;
//  165 #endif
//  166 

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA
//  167 uint8 continueJoining = TRUE;
continueJoining:
        DS 1
        REQUIRE `?<Initializer for continueJoining>`
        REQUIRE __INIT_XDATA_I
//  168 

        RSEG XDATA_Z:XDATA:NOROOT(0)
//  169 byte  _tmpRejoinState;
_tmpRejoinState:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  170 
//  171 /*********************************************************************
//  172  * EXTERNAL VARIABLES
//  173  */
//  174 
//  175 /*********************************************************************
//  176  * EXTERNAL FUNCTIONS
//  177  */
//  178 
//  179 /*********************************************************************
//  180  * LOCAL FUNCTIONS
//  181  */
//  182 
//  183 void ZDApp_NetworkStartEvt( void );
//  184 void ZDApp_DeviceAuthEvt( void );
//  185 void ZDApp_SaveNetworkStateEvt( void );
//  186 
//  187 uint8 ZDApp_ReadNetworkRestoreState( void );
//  188 uint8 ZDApp_RestoreNetworkState( void );
//  189 void ZDAppDetermineDeviceType( void );
//  190 void ZDApp_InitUserDesc( void );
//  191 void ZDAppCheckForHoldKey( void );
//  192 void ZDApp_ProcessOSALMsg( osal_event_hdr_t *msgPtr );
//  193 void ZDApp_ProcessNetworkJoin( void );
//  194 void ZDApp_SetCoordAddress( byte endPoint, byte dstEP );
//  195 
//  196 #if ( SECURE != 0 )
//  197   void ZDApp_SaveNwkKey( void );
//  198   byte ZDApp_RestoreNwkKey( void );
//  199 #endif
//  200 
//  201 void ZDApp_SendMsg( byte taskID, byte cmd, byte len, byte *buf );
//  202 
//  203 void ZDApp_ResetTimerStart( uint16 delay );
//  204 void ZDApp_ResetTimerCancel( void );
//  205 void ZDApp_LeaveCtrlInit( void );
//  206 void ZDApp_LeaveCtrlSet( uint8 ra );
//  207 uint8 ZDApp_LeaveCtrlBypass( void );
//  208 void ZDApp_LeaveCtrlStartup( devStates_t* state, uint16* startDelay );
//  209 void ZDApp_LeaveReset( uint8 ra );
//  210 void ZDApp_LeaveUpdate( uint16 nwkAddr, uint8* extAddr,
//  211                         uint8 removeChildren );
//  212 void ZDApp_NodeProfileSync( ZDO_NetworkDiscoveryCfm_t* cfm );
//  213 void ZDApp_ProcessMsgCBs( zdoIncomingMsg_t *inMsg );
//  214 void ZDApp_RegisterCBs( void );
//  215 void ZDApp_SecInit( uint8 state );
//  216 
//  217 /*********************************************************************
//  218  * LOCAL VARIABLES
//  219  */
//  220 

        RSEG XDATA_Z:XDATA:NOROOT(0)
//  221 byte ZDAppTaskID;
ZDAppTaskID:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
//  222 byte nwkStatus;
nwkStatus:
        DS 1
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
//  223 endPointDesc_t *ZDApp_AutoFindMode_epDesc = (endPointDesc_t *)NULL;
ZDApp_AutoFindMode_epDesc:
        DS 2
        REQUIRE __INIT_XDATA_Z

        RSEG XDATA_Z:XDATA:NOROOT(0)
//  224 uint8 ZDApp_LeaveCtrl;
ZDApp_LeaveCtrl:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  225 
//  226 #if defined( HOLD_AUTO_START )
//  227   devStates_t devState = DEV_HOLD;
//  228 #else

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA
//  229   devStates_t devState = DEV_INIT;
devState:
        DS 1
        REQUIRE `?<Initializer for devState>`
        REQUIRE __INIT_XDATA_I
//  230 #endif
//  231 
//  232 #if defined( ZDO_COORDINATOR ) && !defined( SOFT_START )
//  233   // Set the default to coodinator
//  234   devStartModes_t devStartMode = MODE_HARD;
//  235 #else

        RSEG XDATA_Z:XDATA:NOROOT(0)
//  236   devStartModes_t devStartMode = MODE_JOIN;     // Assume joining
devStartMode:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  237   //devStartModes_t devStartMode = MODE_RESUME; // if already "directly joined"
//  238                         // to parent. Set to make the device do an Orphan scan.
//  239 #endif
//  240 
//  241 #if !defined( ZDO_COORDINATOR ) || defined( SOFT_START )

        RSEG XDATA_Z:XDATA:NOROOT(0)
//  242   static uint8 retryCnt;
retryCnt:
        DS 1
        REQUIRE __INIT_XDATA_Z
//  243 #endif
//  244 

        RSEG XDATA_I:XDATA:NOROOT(0)
        DATA
//  245 endPointDesc_t ZDApp_epDesc =
ZDApp_epDesc:
        DS 6
        REQUIRE `?<Initializer for ZDApp_epDesc>`
        REQUIRE __INIT_XDATA_I
//  246 {
//  247   ZDO_EP,
//  248   &ZDAppTaskID,
//  249   (SimpleDescriptionFormat_t *)NULL,  // No Simple description for ZDO
//  250   (afNetworkLatencyReq_t)0            // No Network Latency req
//  251 };
//  252 
//  253 /*********************************************************************
//  254  * @fn      ZDApp_Init
//  255  *
//  256  * @brief   ZDApp Initialization function.
//  257  *
//  258  * @param   task_id - ZDApp Task ID
//  259  *
//  260  * @return  None
//  261  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  262 void ZDApp_Init( byte task_id )
ZDApp_Init:
        CFI Block cfiBlock0 Using cfiCommon0
        CFI Function ZDApp_Init
//  263 {
        FUNCALL ZDApp_Init, NLME_GetExtAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_Init, ZDAppCheckForHoldKey
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_Init, ZDO_Init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_Init, afRegister
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_Init, NLME_GetRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_Init, NLME_SetBroadcastFilter
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_Init, ZDOInitDevice
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_Init, HalLedBlink
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_Init, ZDApp_RegisterCBs
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 1
        MOV     A,#-0x1
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 10)
        MOV     A,R1
//  264   uint8 capabilities;
//  265 
//  266   // Save the task ID
//  267   ZDAppTaskID = task_id;
        MOV     DPTR,#ZDAppTaskID
        MOVX    @DPTR,A
//  268 
//  269   // Initialize the ZDO global device short address storage
//  270   ZDAppNwkAddr.addrMode = Addr16Bit;
        MOV     A,#0x2
        MOV     DPTR,#(ZDAppNwkAddr + 8)
        MOVX    @DPTR,A
//  271   ZDAppNwkAddr.addr.shortAddr = INVALID_NODE_ADDR;
        MOV     DPTR,#ZDAppNwkAddr
        MOV     A,#-0x2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#-0x1
        MOVX    @DPTR,A
//  272   (void)NLME_GetExtAddr();  // Load the saveExtAddr pointer.
        ; Setup parameters for call to function NLME_GetExtAddr
        LCALL   ??NLME_GetExtAddr?relay
//  273 
//  274   // Check for manual "Hold Auto Start"
//  275   ZDAppCheckForHoldKey();
        ; Setup parameters for call to function ZDAppCheckForHoldKey
        LCALL   ??ZDAppCheckForHoldKey?relay
//  276 
//  277   // Initialize ZDO items and setup the device - type of device to create.
//  278   ZDO_Init();
        ; Setup parameters for call to function ZDO_Init
        LCALL   ??ZDO_Init?relay
//  279 
//  280   // Register the endpoint description with the AF
//  281   // This task doesn't have a Simple description, but we still need
//  282   // to register the endpoint.
//  283   afRegister( (endPointDesc_t *)&ZDApp_epDesc );
        ; Setup parameters for call to function afRegister
        MOV     R2,#(ZDApp_epDesc & 0xff)
        MOV     R3,#((ZDApp_epDesc >> 8) & 0xff)
        LCALL   ??afRegister?relay
//  284 
//  285 #if defined( ZDO_USERDESC_RESPONSE )
//  286   ZDApp_InitUserDesc();
//  287 #endif // ZDO_USERDESC_RESPONSE
//  288 
//  289   // set broadcast address mask to support broadcast filtering
//  290   NLME_GetRequest(nwkCapabilityInfo, 0, &capabilities);
        ; Setup parameters for call to function NLME_GetRequest
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,#0x0
        MOV     R3,#0x0
        MOV     R1,#-0x71
        LCALL   ??NLME_GetRequest?relay
//  291   NLME_SetBroadcastFilter( capabilities );
        ; Setup parameters for call to function NLME_SetBroadcastFilter
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??NLME_SetBroadcastFilter?relay
//  292 
//  293   // Start the device?
//  294   if ( devState != DEV_HOLD )
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        JZ      ??ZDApp_Init_0
//  295   {
//  296     ZDOInitDevice( 0 );
        ; Setup parameters for call to function ZDOInitDevice
        MOV     R2,#0x0
        MOV     R3,#0x0
        LCALL   ??ZDOInitDevice?relay
        SJMP    ??ZDApp_Init_1
//  297   }
//  298   else
//  299   {
//  300     // Blink LED to indicate HOLD_START
//  301     HalLedBlink ( HAL_LED_4, 0, 50, 500 );
??ZDApp_Init_0:
        ; Setup parameters for call to function HalLedBlink
        MOV     R4,#-0xc
        MOV     R5,#0x1
        MOV     R3,#0x32
        MOV     R2,#0x0
        MOV     R1,#0x8
        LCALL   ??HalLedBlink?relay
//  302   }
//  303   
//  304   ZDApp_RegisterCBs();
??ZDApp_Init_1:
        ; Setup parameters for call to function ZDApp_RegisterCBs
        LCALL   ??ZDApp_RegisterCBs?relay
//  305 } /* ZDO_Init() */
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 9)
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock0
//  306 
//  307 /*********************************************************************
//  308  * @fn          ZDApp_SecInit
//  309  *
//  310  * @brief       ZDApp initialize security.
//  311  *
//  312  * @param       state - device initialization state
//  313  *
//  314  * @return      none
//  315  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  316 void ZDApp_SecInit( uint8 state )
ZDApp_SecInit:
        CFI Block cfiBlock1 Using cfiCommon0
        CFI Function ZDApp_SecInit
//  317 {
        FUNCALL ZDApp_SecInit, ZDSecMgrInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
//  318   // Initialize ZigBee Device Security Manager
//  319   ZDSecMgrInit();
        ; Setup parameters for call to function ZDSecMgrInit
        LCALL   ??ZDSecMgrInit?relay
//  320 
//  321   // -----------------------------------------------------------------
//  322   #if ( SECURE != 0 )
//  323   // -----------------------------------------------------------------
//  324   nwkFrameCounter = 0;
//  325 
//  326   if( _NIB.nwkKeyLoaded == FALSE )
//  327   {
//  328     // ---------------------------------------------------------------
//  329     #if ( SECURITY_MODE == SECURITY_RESIDENTIAL )
//  330     // ---------------------------------------------------------------
//  331     #if !defined (ZDO_COORDINATOR)
//  332     if ( zgPreConfigKeys )
//  333     #endif
//  334     {
//  335       SSP_UpdateNwkKey( (byte*)zgPreConfigKey, 0);
//  336       SSP_SwitchNwkKey( 0 );
//  337     }
//  338     // ---------------------------------------------------------------
//  339     #endif // ( SECURITY_MODE == SECURITY_RESIDENTIAL )
//  340     // ---------------------------------------------------------------
//  341   }
//  342 
//  343   if ( state == ZDO_INITDEV_RESTORED_NETWORK_STATE )
//  344   {
//  345     //Restore NWK frame counter
//  346   }
//  347   // -----------------------------------------------------------------
//  348   #endif
//  349   // -----------------------------------------------------------------
//  350 }
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock1
//  351 
//  352 /*********************************************************************
//  353  * @fn      ZDApp_event_loop()
//  354  *
//  355  * @brief   Main event loop for Zigbee device objects task. This function
//  356  *          should be called at periodic intervals.
//  357  *
//  358  * @param   task_id - Task ID
//  359  * @param   events  - Bitmap of events
//  360  *
//  361  * @return  none
//  362  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  363 UINT16 ZDApp_event_loop( byte task_id, UINT16 events )
ZDApp_event_loop:
        CFI Block cfiBlock2 Using cfiCommon0
        CFI Function ZDApp_event_loop
//  364 {
        FUNCALL ZDApp_event_loop, osal_msg_receive
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_event_loop, ZDApp_ProcessOSALMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_event_loop, osal_msg_deallocate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_event_loop, ZDO_UpdateNwkStatus
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_event_loop, ZDO_StartDevice
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_event_loop, ZDApp_SaveNetworkStateEvt
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xe
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 14
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//  365   uint8 *msg_ptr;
//  366 
//  367   if ( events & SYS_EVENT_MSG )
        MOV     A,#0x0
        ANL     A,R6
        MOV     R0,A
        MOV     A,#-0x80
        ANL     A,R7
        MOV     R1,A
        MOV     A,#0x0
        XRL     A,R0
        JNZ     ??ZDApp_event_loop_0
        MOV     A,#0x0
        XRL     A,R1
??ZDApp_event_loop_0:
        JZ      ??ZDApp_event_loop_1
//  368   {
//  369     while ( (msg_ptr = osal_msg_receive( ZDAppTaskID )) )
??ZDApp_event_loop_2:
        ; Setup parameters for call to function osal_msg_receive
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_msg_receive?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     R0,?V0 + 4
        MOV     R1,?V0 + 5
        MOV     ?V0 + 2,R0
        MOV     ?V0 + 3,R1
        MOV     A,R0
        XRL     A,#0x0
        JNZ     ??ZDApp_event_loop_3
        MOV     A,R1
        XRL     A,#0x0
??ZDApp_event_loop_3:
        JZ      ??ZDApp_event_loop_4
//  370     {
//  371       ZDApp_ProcessOSALMsg( (osal_event_hdr_t *)msg_ptr );
        ; Setup parameters for call to function ZDApp_ProcessOSALMsg
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??ZDApp_ProcessOSALMsg?relay
//  372 
//  373       // Release the memory
//  374       osal_msg_deallocate( msg_ptr );
        ; Setup parameters for call to function osal_msg_deallocate
        MOV     R2,?V0 + 2
        MOV     R3,?V0 + 3
        LCALL   ??osal_msg_deallocate?relay
        SJMP    ??ZDApp_event_loop_2
//  375     }
//  376 
//  377     // Return unprocessed events
//  378     return (events ^ SYS_EVENT_MSG);
??ZDApp_event_loop_4:
        MOV     A,#0x0
        XRL     A,R6
        MOV     R2,A
        MOV     A,#-0x80
        XRL     A,R7
        MOV     R3,A
        LJMP    ??ZDApp_event_loop_5 & 0xFFFF
//  379   }
//  380 
//  381   if ( events & ZDO_STATE_CHANGE_EVT )
??ZDApp_event_loop_1:
        MOV     A,R6
        ANL     A,#0x10
        JZ      ??ZDApp_event_loop_6
//  382   {
//  383     ZDO_UpdateNwkStatus( devState );
        ; Setup parameters for call to function ZDO_UpdateNwkStatus
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDO_UpdateNwkStatus?relay
//  384 
//  385     // Return unprocessed events
//  386     return (events ^ ZDO_STATE_CHANGE_EVT);
        MOV     A,#0x10
        XRL     A,R6
        MOV     R2,A
        MOV     A,#0x0
        XRL     A,R7
        MOV     R3,A
        SJMP    ??ZDApp_event_loop_5
//  387   }
//  388 
//  389 
//  390   if ( events & ZDO_NETWORK_INIT )
??ZDApp_event_loop_6:
        MOV     A,R6
        MOV     C,0xE0 /* A   */.0
        JNC     ??ZDApp_event_loop_7
//  391   {
//  392     // Initialize apps and start the network
//  393     devState = DEV_INIT;
        MOV     A,#0x1
        MOV     DPTR,#devState
        MOVX    @DPTR,A
//  394     ZDO_StartDevice( (uint8)ZDO_Config_Node_Descriptor.LogicalType, devStartMode,
//  395                      DEFAULT_BEACON_ORDER, DEFAULT_SUPERFRAME_ORDER );
        ; Setup parameters for call to function ZDO_StartDevice
        MOV     R4,#0xf
        MOV     R3,#0xf
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     DPTR,#ZDO_Config_Node_Descriptor
        MOVX    A,@DPTR
        ANL     A,#0x7
        MOV     R1,A
        LCALL   ??ZDO_StartDevice?relay
//  396 
//  397     // Return unprocessed events
//  398     return (events ^ ZDO_NETWORK_INIT);
        MOV     A,#0x1
        XRL     A,R6
        MOV     R2,A
        MOV     A,#0x0
        XRL     A,R7
        MOV     R3,A
        SJMP    ??ZDApp_event_loop_5
//  399   }
//  400 
//  401 #if defined (RTR_NWK)
//  402   if ( events & ZDO_NETWORK_START )
//  403   {
//  404     ZDApp_NetworkStartEvt();
//  405 
//  406     // Return unprocessed events
//  407     return (events ^ ZDO_NETWORK_START);
//  408   }
//  409 #endif  //RTR_NWK
//  410 
//  411 #if defined ( RTR_NWK )
//  412   if ( events & ZDO_ROUTER_START )
//  413   {
//  414     if ( nwkStatus == ZSuccess )
//  415     {
//  416       if ( devState == DEV_END_DEVICE )
//  417         devState = DEV_ROUTER;
//  418 
//  419       osal_pwrmgr_device( PWRMGR_ALWAYS_ON );
//  420     }
//  421     else
//  422     {
//  423       // remain as end device!!
//  424     }
//  425     osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
//  426 
//  427     // Return unprocessed events
//  428     return (events ^ ZDO_ROUTER_START);
//  429   }
//  430 #endif  // RTR
//  431 
//  432 
//  433   if ( events & ZDO_COMMAND_CNF )
??ZDApp_event_loop_7:
        MOV     A,R6
        ANL     A,#0x8
        JZ      ??ZDApp_event_loop_8
//  434   {
//  435     // User defined logic
//  436 
//  437     // Return unprocessed events
//  438     return (events ^ ZDO_COMMAND_CNF);
        MOV     A,#0x8
        XRL     A,R6
        MOV     R2,A
        MOV     A,#0x0
        XRL     A,R7
        MOV     R3,A
        SJMP    ??ZDApp_event_loop_5
//  439   }
//  440 
//  441 #if defined( ZDSECMGR_SECURE ) && defined( RTR_NWK )
//  442   if ( events & ZDO_NEW_DEVICE )
//  443   {
//  444     // process the new device event
//  445     if ( ZDSecMgrNewDeviceEvent() == TRUE )
//  446     {
//  447       osal_start_timerEx( ZDAppTaskID, ZDO_NEW_DEVICE, 1000 );
//  448     }
//  449 
//  450     // Return unprocessed events
//  451     return (events ^ ZDO_NEW_DEVICE);
//  452   }
//  453 #endif  // ZDSECMGR_SECURE && RTR
//  454 
//  455 #if defined ( ZDSECMGR_COMMERCIAL )
//  456   if ( events & ZDO_SECMGR_EVENT )
//  457   {
//  458     ZDSecMgrEvent();
//  459 
//  460     // Return unprocessed events
//  461     return (events ^ ZDO_SECMGR_EVENT);
//  462   }
//  463 #endif // defined( ZDSECMGR_COMMERCIAL )
//  464 
//  465 #if   ( SECURE != 0  )
//  466   if ( events & ZDO_DEVICE_AUTH )
//  467   {
//  468     ZDApp_DeviceAuthEvt();
//  469 
//  470     // Return unprocessed events
//  471     return (events ^ ZDO_DEVICE_AUTH);
//  472   }
//  473 #endif  // SECURE
//  474 
//  475   if ( events & ZDO_NWK_UPDATE_NV )
??ZDApp_event_loop_8:
        MOV     A,#0x0
        ANL     A,R6
        MOV     R0,A
        MOV     A,#0x2
        ANL     A,R7
        MOV     R1,A
        MOV     A,#0x0
        XRL     A,R0
        JNZ     ??ZDApp_event_loop_9
        MOV     A,#0x0
        XRL     A,R1
??ZDApp_event_loop_9:
        JZ      ??ZDApp_event_loop_10
//  476   {
//  477     ZDApp_SaveNetworkStateEvt();
        ; Setup parameters for call to function ZDApp_SaveNetworkStateEvt
        LCALL   ??ZDApp_SaveNetworkStateEvt?relay
//  478 
//  479     // Return unprocessed events
//  480     return (events ^ ZDO_NWK_UPDATE_NV);
        MOV     A,#0x0
        XRL     A,R6
        MOV     R2,A
        MOV     A,#0x2
        XRL     A,R7
        MOV     R3,A
        SJMP    ??ZDApp_event_loop_5
//  481   }
//  482 
//  483 #if ( SECURE != 0  )
//  484   if ( events & ZDO_FRAMECOUNTER_CHANGE )
//  485   {
//  486     if ( nwkFrameCounterChanges++ > MAX_NWK_FRAMECOUNTER_CHANGES )
//  487       ZDApp_SaveNwkKey();
//  488 
//  489     // Return unprocessed events
//  490     return (events ^ ZDO_FRAMECOUNTER_CHANGE);
//  491   }
//  492 #endif
//  493 
//  494   if ( events & ZDO_DEVICE_RESET )
??ZDApp_event_loop_10:
        MOV     A,R6
        ANL     A,#0x4
        JZ      ??ZDApp_event_loop_11
//  495   {
//  496     // The device has been in the UNAUTH state, so reset
//  497     // Note: there will be no return from this call
//  498     SystemReset();
        CLR     0xa8.7
        MOV     0xc9,#-0x55
        MOV     0xc9,#0x5b
??ZDApp_event_loop_12:
        NOP
        SJMP    ??ZDApp_event_loop_12
//  499   }
//  500 
//  501   // Discard or make more handlers
//  502   return 0;
??ZDApp_event_loop_11:
        MOV     R2,#0x0
        MOV     R3,#0x0
??ZDApp_event_loop_5:
        MOV     R7,#0x6
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock2
        REQUIRE _A_IEN0
        REQUIRE WDCTL
//  503 }
//  504 
//  505 /*********************************************************************
//  506  * Application Functions
//  507  */
//  508 
//  509 /*********************************************************************
//  510  * @fn      ZDOInitDevice
//  511  *
//  512  * @brief   Start the device in the network.  This function will read
//  513  *   ZCD_NV_STARTUP_OPTION (NV item) to determine whether or not to
//  514  *   restore the network state of the device.
//  515  *
//  516  * @param   startDelay - timeDelay to start device (in milliseconds).
//  517  *      There is a jitter added to this delay:
//  518  *              ((NWK_START_DELAY + startDelay)
//  519  *              + (osal_rand() & EXTENDED_JOINING_RANDOM_MASK))
//  520  *
//  521  * NOTE:    If the application would like to force a "new" join, the
//  522  *          application should set the ZCD_STARTOPT_DEFAULT_NETWORK_STATE
//  523  *          bit in the ZCD_NV_STARTUP_OPTION NV item before calling
//  524  *          this function. "new" join means to not restore the network
//  525  *          state of the device. Use zgWriteStartupOptions() to set these
//  526  *          options.
//  527  *
//  528  * @return
//  529  *    ZDO_INITDEV_RESTORED_NETWORK_STATE  - The device's network state was
//  530  *          restored.
//  531  *    ZDO_INITDEV_NEW_NETWORK_STATE - The network state was initialized.
//  532  *          This could mean that ZCD_NV_STARTUP_OPTION said to not restore, or
//  533  *          it could mean that there was no network state to restore.
//  534  *    ZDO_INITDEV_LEAVE_NOT_STARTED - Before the reset, a network leave was issued
//  535  *          with the rejoin option set to TRUE.  So, the device was not
//  536  *          started in the network (one time only).  The next time this
//  537  *          function is called it will start.
//  538  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  539 uint8 ZDOInitDevice( uint16 startDelay )
ZDOInitDevice:
        CFI Block cfiBlock3 Using cfiCommon0
        CFI Function ZDOInitDevice
//  540 {
        FUNCALL ZDOInitDevice, ZDApp_LeaveCtrlInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDOInitDevice, ZDApp_LeaveCtrlStartup
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDOInitDevice, ZDAppDetermineDeviceType
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDOInitDevice, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDOInitDevice, ZDApp_SecInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDOInitDevice, ZDApp_NetworkInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 2
        MOV     A,#-0x2
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 14)
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
//  541   uint8 networkStateNV = ZDO_INITDEV_NEW_NETWORK_STATE;
        MOV     ?V0 + 0,#0x1
//  542   uint16 extendedDelay = 0;
        MOV     R6,#0x0
        MOV     R7,#0x0
//  543 
//  544   devState = DEV_INIT;    // Remove the Hold state
        MOV     A,#0x1
        MOV     DPTR,#devState
        MOVX    @DPTR,A
//  545 
//  546   // Initialize leave control logic
//  547   ZDApp_LeaveCtrlInit();
        ; Setup parameters for call to function ZDApp_LeaveCtrlInit
        LCALL   ??ZDApp_LeaveCtrlInit?relay
//  548 
//  549   // Check leave control reset settings
//  550   ZDApp_LeaveCtrlStartup( &devState, &startDelay );
        ; Setup parameters for call to function ZDApp_LeaveCtrlStartup
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,#(devState & 0xff)
        MOV     R3,#((devState >> 8) & 0xff)
        LCALL   ??ZDApp_LeaveCtrlStartup?relay
//  551 
//  552   // Leave may make the hold state come back
//  553   if ( devState == DEV_HOLD )
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        JNZ     ??ZDOInitDevice_0
//  554     return ( ZDO_INITDEV_LEAVE_NOT_STARTED );   // Don't join - (one time).
        MOV     R1,#0x2
        SJMP    ??ZDOInitDevice_1
//  555 
//  556 #if defined ( NV_RESTORE )
//  557   // Get Keypad directly to see if a reset nv is needed.
//  558   // Hold down the SW_BYPASS_NV key (defined in OnBoard.h)
//  559   // while booting to skip past NV Restore.
//  560   if ( HalKeyRead() == SW_BYPASS_NV )
//  561     networkStateNV = ZDO_INITDEV_NEW_NETWORK_STATE;
//  562   else
//  563   {
//  564     // Determine if NV should be restored
//  565     networkStateNV = ZDApp_ReadNetworkRestoreState();
//  566   }
//  567 
//  568   if ( networkStateNV == ZDO_INITDEV_RESTORED_NETWORK_STATE )
//  569   {
//  570     networkStateNV = ZDApp_RestoreNetworkState();
//  571   }
//  572   else
//  573   {
//  574     // Wipe out the network state in NV
//  575     NLME_InitNV();
//  576     NLME_SetDefaultNV();
//  577   }
//  578 #endif
//  579 
//  580   if ( networkStateNV == ZDO_INITDEV_NEW_NETWORK_STATE )
??ZDOInitDevice_0:
        MOV     A,#0x1
        XRL     A,?V0 + 0
        JNZ     ??ZDOInitDevice_2
//  581   {
//  582     ZDAppDetermineDeviceType();
        ; Setup parameters for call to function ZDAppDetermineDeviceType
        LCALL   ??ZDAppDetermineDeviceType?relay
//  583 
//  584     // Only delay if joining network - not restoring network state
//  585     extendedDelay = (uint16)((NWK_START_DELAY + startDelay)
//  586               + (osal_rand() & EXTENDED_JOINING_RANDOM_MASK));
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 2,R2
        MOV     ?V0 + 3,R3
        MOV     R0,?V0 + 2
        MOV     R1,?V0 + 3
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,#0x7f
        ANL     A,R0
        MOV     R0,A
        MOV     A,#0x0
        ANL     A,R1
        MOV     R1,A
        MOVX    A,@DPTR
        ADD     A,R0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ADDC    A,R1
        MOV     R1,A
        MOV     A,#0x64
        ADD     A,R0
        MOV     R0,A
        MOV     A,#0x0
        ADDC    A,R1
        MOV     R1,A
        MOV     A,R0
        MOV     R6,A
        MOV     A,R1
        MOV     R7,A
//  587   }
//  588 
//  589   // Initialize device security
//  590   ZDApp_SecInit( networkStateNV );
??ZDOInitDevice_2:
        ; Setup parameters for call to function ZDApp_SecInit
        MOV     R1,?V0 + 0
        LCALL   ??ZDApp_SecInit?relay
//  591 
//  592   // Trigger the network start
//  593   ZDApp_NetworkInit( extendedDelay );
        ; Setup parameters for call to function ZDApp_NetworkInit
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??ZDApp_NetworkInit?relay
//  594 
//  595   return ( networkStateNV );
        MOV     R1,?V0 + 0
??ZDOInitDevice_1:
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 12)
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock3
//  596 }
//  597 
//  598 /*********************************************************************
//  599  * @fn      ZDApp_ReadNetworkRestoreState
//  600  *
//  601  * @brief   Read the ZCD_NV_STARTUP_OPTION NV Item to state whether
//  602  *          or not to restore the network state.
//  603  *          If the read value has the ZCD_STARTOPT_DEFAULT_NETWORK_STATE
//  604  *          bit set return the ZDO_INITDEV_NEW_NETWORK_STATE.
//  605  *
//  606  * @param   none
//  607  *
//  608  * @return  ZDO_INITDEV_NEW_NETWORK_STATE
//  609  *          or ZDO_INITDEV_RESTORED_NETWORK_STATE based on whether or
//  610  *          not ZCD_STARTOPT_DEFAULT_NETWORK_STATE bit is set in
//  611  *          ZCD_NV_STARTUP_OPTION
//  612  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  613 uint8 ZDApp_ReadNetworkRestoreState( void )
ZDApp_ReadNetworkRestoreState:
        CFI Block cfiBlock4 Using cfiCommon0
        CFI Function ZDApp_ReadNetworkRestoreState
//  614 {
        FUNCALL ZDApp_ReadNetworkRestoreState, zgReadStartupOptions
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
//  615   uint8 networkStateNV = ZDO_INITDEV_RESTORED_NETWORK_STATE;
        MOV     R6,#0x0
//  616 
//  617   // Look for the New Network State option.
//  618   if ( zgReadStartupOptions() & ZCD_STARTOPT_DEFAULT_NETWORK_STATE )
        ; Setup parameters for call to function zgReadStartupOptions
        LCALL   ??zgReadStartupOptions?relay
        MOV     A,R1
        MOV     C,0xE0 /* A   */.1
        JNC     ??ZDApp_ReadNetworkRestoreState_0
//  619   {
//  620     networkStateNV = ZDO_INITDEV_NEW_NETWORK_STATE;
        MOV     R6,#0x1
//  621   }
//  622 
//  623   return ( networkStateNV );
??ZDApp_ReadNetworkRestoreState_0:
        MOV     A,R6
        MOV     R1,A
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock4
//  624 }
//  625 
//  626 /*********************************************************************
//  627  * @fn      ZDAppDetermineDeviceType()
//  628  *
//  629  * @brief   Determines the type of device to start.  Right now
//  630  *          this only works with the SOFT_START feature.  So it doesn't
//  631  *          support the end device type.
//  632  *
//  633  *          Looks at zgDeviceLogicalType and determines what type of
//  634  *          device to start.  The types are:
//  635  *            ZG_DEVICETYPE_COORDINATOR
//  636  *            ZG_DEVICETYPE_ROUTER
//  637  *            ZG_DEVICETYPE_ENDDEVICE - not supported yet.
//  638  *            ZG_DEVICETYPE_SOFT - looks for coordinator, if one doesn't
//  639  *               exist, becomes one.  This option is should only be used
//  640  *               if the system is manually configured and you are insured
//  641  *               that the first device is started before all the other
//  642  *               devices are started.
//  643  *
//  644  * @param   none
//  645  *
//  646  * @return  none
//  647  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  648 void ZDAppDetermineDeviceType( void )
ZDAppDetermineDeviceType:
        CFI Block cfiBlock5 Using cfiCommon0
        CFI Function ZDAppDetermineDeviceType
//  649 {
        ; Saved register size: 0
        ; Auto size: 0
//  650   if ( zgDeviceLogicalType == ZG_DEVICETYPE_ENDDEVICE )
        LJMP    ?BRET
        CFI EndBlock cfiBlock5
//  651     return;
//  652 
//  653 #if defined ( SOFT_START )
//  654   if ( zgDeviceLogicalType == ZG_DEVICETYPE_COORDINATOR )
//  655   {
//  656     devStartMode = MODE_HARD;     // Start as a coordinator
//  657     ZDO_Config_Node_Descriptor.LogicalType = NODETYPE_COORDINATOR;
//  658   }
//  659   else
//  660   {
//  661     if ( zgDeviceLogicalType == ZG_DEVICETYPE_ROUTER )
//  662     {
//  663       softStartAllowCoord = FALSE;  // Don't allow coord to start
//  664       continueJoining = TRUE;
//  665     }
//  666     devStartMode = MODE_JOIN;     // Assume joining
//  667   }
//  668 #endif // SOFT_START
//  669 }
//  670 
//  671 /*********************************************************************
//  672  * @fn      ZDApp_NetworkStartEvt()
//  673  *
//  674  * @brief   Process the Network Start Event
//  675  *
//  676  * @param   none
//  677  *
//  678  * @return  none
//  679  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  680 void ZDApp_NetworkStartEvt( void )
ZDApp_NetworkStartEvt:
        CFI Block cfiBlock6 Using cfiCommon0
        CFI Function ZDApp_NetworkStartEvt
//  681 {
        FUNCALL ZDApp_NetworkStartEvt, osal_pwrmgr_device
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_NetworkStartEvt, osal_set_event
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_NetworkStartEvt, NLME_GetEnergyThreshold
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_NetworkStartEvt, NLME_GetEnergyThreshold
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_NetworkStartEvt, NLME_SetEnergyThreshold
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_NetworkStartEvt, osal_set_event
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_NetworkStartEvt, osal_set_event
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  682   if ( nwkStatus == ZSuccess )
        MOV     DPTR,#nwkStatus
        MOVX    A,@DPTR
        JNZ     ??ZDApp_NetworkStartEvt_0
//  683   {
//  684     // Successfully started a ZigBee network
//  685     if ( devState == DEV_COORD_STARTING )
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        XRL     A,#0x8
        JNZ     ??ZDApp_NetworkStartEvt_1
//  686     {
//  687       devState = DEV_ZB_COORD;
        MOV     A,#0x9
        MOV     DPTR,#devState
        MOVX    @DPTR,A
//  688     }
//  689 
//  690     osal_pwrmgr_device( PWRMGR_ALWAYS_ON );
??ZDApp_NetworkStartEvt_1:
        ; Setup parameters for call to function osal_pwrmgr_device
        MOV     R1,#0x0
        LCALL   ??osal_pwrmgr_device?relay
//  691     osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
        ; Setup parameters for call to function osal_set_event
        MOV     R2,#0x10
        MOV     R3,#0x0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_set_event?relay
        SJMP    ??ZDApp_NetworkStartEvt_2
//  692   }
//  693   else
//  694   {
//  695     // Try again with a higher energy threshold !!
//  696     if ( ( NLME_GetEnergyThreshold() + ENERGY_SCAN_INCREMENT ) < 0xff )
??ZDApp_NetworkStartEvt_0:
        ; Setup parameters for call to function NLME_GetEnergyThreshold
        LCALL   ??NLME_GetEnergyThreshold?relay
        MOV     A,R1
        MOV     R0,A
        MOV     R1,#0x0
        MOV     A,#0x10
        ADD     A,R0
        MOV     R0,A
        MOV     A,#0x0
        ADDC    A,R1
        MOV     R1,A
        CLR     C
        MOV     A,R0
        SUBB    A,#-0x1
        MOV     A,R1
        SUBB    A,#0x0
        MOV     C,0xD0 /* PSW */.2
        XRL     A,PSW
        RLC     A
        JNC     ??ZDApp_NetworkStartEvt_3
//  697     {
//  698       NLME_SetEnergyThreshold( (uint8)(NLME_GetEnergyThreshold() + ENERGY_SCAN_INCREMENT) );
        ; Setup parameters for call to function NLME_SetEnergyThreshold
        ; Setup parameters for call to function NLME_GetEnergyThreshold
        LCALL   ??NLME_GetEnergyThreshold?relay
        MOV     A,R1
        ADD     A,#0x10
        MOV     R1,A
        LCALL   ??NLME_SetEnergyThreshold?relay
//  699       osal_set_event( ZDAppTaskID, ZDO_NETWORK_INIT );
        ; Setup parameters for call to function osal_set_event
        MOV     R2,#0x1
        MOV     R3,#0x0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_set_event?relay
        SJMP    ??ZDApp_NetworkStartEvt_2
//  700     }
//  701     else
//  702     {
//  703       // Failed to start network. Enter a dormant state (until user intervenes)
//  704       devState = DEV_INIT;
??ZDApp_NetworkStartEvt_3:
        MOV     A,#0x1
        MOV     DPTR,#devState
        MOVX    @DPTR,A
//  705       osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
        ; Setup parameters for call to function osal_set_event
        MOV     R2,#0x10
        MOV     R3,#0x0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_set_event?relay
//  706     }
//  707   }
//  708 }
??ZDApp_NetworkStartEvt_2:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock6
//  709 
//  710 #if ( SECURE != 0 )
//  711 /*********************************************************************
//  712  * @fn      ZDApp_DeviceAuthEvt()
//  713  *
//  714  * @brief   Process the Device Authentic Event
//  715  *
//  716  * @param   none
//  717  *
//  718  * @return  none
//  719  */
//  720 void ZDApp_DeviceAuthEvt( void )
//  721 {
//  722   // received authentication from trust center
//  723   if ( devState == DEV_END_DEVICE_UNAUTH )
//  724   {
//  725     // Stop the reset timer so it doesn't reset
//  726     ZDApp_ResetTimerCancel();
//  727 
//  728     devState = DEV_END_DEVICE;
//  729     osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
//  730 
//  731     // Set the Power Manager Device
//  732 #if defined ( POWER_SAVING )
//  733     osal_pwrmgr_device( PWRMGR_BATTERY );
//  734 #endif
//  735 
//  736 #if defined ( RTR_NWK )
//  737     if ( ZDO_Config_Node_Descriptor.LogicalType != NODETYPE_DEVICE )
//  738     {
//  739       // NOTE: first two parameters are not used, see NLMEDE.h for details
//  740       NLME_StartRouterRequest( 0, 0, false );
//  741     }
//  742 #endif  // RTR
//  743 
//  744     // Notify to save info into NV
//  745     ZDApp_NVUpdate();
//  746 
//  747     // Save off the security
//  748     ZDApp_SaveNwkKey();
//  749 
//  750 #if defined ( ZDO_ENDDEVICE_ANNCE_GENERATE )
//  751     ZDP_EndDeviceAnnce( ZDAppNwkAddr.addr.shortAddr, saveExtAddr,
//  752                        ZDO_Config_Node_Descriptor.CapabilityFlags, 0 );
//  753 #endif
//  754   }
//  755   else
//  756   {
//  757     ZDApp_NVUpdate();
//  758   }
//  759 }
//  760 #endif
//  761 
//  762 /*********************************************************************
//  763  * @fn      ZDApp_SaveNetworkStateEvt()
//  764  *
//  765  * @brief   Process the Save the Network State Event
//  766  *
//  767  * @param   none
//  768  *
//  769  * @return  none
//  770  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  771 void ZDApp_SaveNetworkStateEvt( void )
ZDApp_SaveNetworkStateEvt:
        CFI Block cfiBlock7 Using cfiCommon0
        CFI Function ZDApp_SaveNetworkStateEvt
//  772 {
        ; Saved register size: 0
        ; Auto size: 0
//  773 #if defined ( NV_RESTORE )
//  774  #if defined ( NV_TURN_OFF_RADIO )
//  775   // Turn off the radio's receiver during an NV update
//  776   byte RxOnIdle;
//  777   byte x = false;
//  778   ZMacGetReq( ZMacRxOnIdle, &RxOnIdle );
//  779   ZMacSetReq( ZMacRxOnIdle, &x );
//  780  #endif
//  781 
//  782   // Update the Network State in NV
//  783   NLME_UpdateNV( NWK_NV_NIB_ENABLE        |
//  784                  NWK_NV_DEVICELIST_ENABLE |
//  785                  NWK_NV_BINDING_ENABLE    |
//  786                  NWK_NV_ADDRMGR_ENABLE );
//  787 
//  788   // Reset the NV startup option to resume from NV by
//  789   // clearing the "New" join option.
//  790   zgWriteStartupOptions( FALSE, ZCD_STARTOPT_DEFAULT_NETWORK_STATE );
//  791 
//  792  #if defined ( NV_TURN_OFF_RADIO )
//  793   ZMacSetReq( ZMacRxOnIdle, &RxOnIdle );
//  794  #endif
//  795 #endif  // NV_RESTORE
//  796 }
        LJMP    ?BRET
        CFI EndBlock cfiBlock7
//  797 
//  798 /*********************************************************************
//  799  * @fn      ZDApp_RestoreNetworkState()
//  800  *
//  801  * @brief   This function will restore the network state of the
//  802  *          device if the network state is stored in NV.
//  803  *
//  804  * @param   none
//  805  *
//  806  * @return
//  807  *    ZDO_INITDEV_RESTORED_NETWORK_STATE  - The device's network state was
//  808  *          restored.
//  809  *    ZDO_INITDEV_NEW_NETWORK_STATE - The network state was not used.
//  810  *          This could mean that zgStartupOption said to not restore, or
//  811  *          it could mean that there was no network state to restore.
//  812  *
//  813  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  814 uint8 ZDApp_RestoreNetworkState( void )
ZDApp_RestoreNetworkState:
        CFI Block cfiBlock8 Using cfiCommon0
        CFI Function ZDApp_RestoreNetworkState
//  815 {
        FUNCALL ZDApp_RestoreNetworkState, NLME_InitNV
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_RestoreNetworkState, NLME_RestoreFromNV
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_RestoreNetworkState, NLME_GetShortAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
//  816   byte nvStat;
//  817 #if ( SECURE != 0 )
//  818   nwkActiveKeyItems keyItems;
//  819 #endif
//  820 
//  821   // Initialize NWK NV items
//  822   nvStat = NLME_InitNV();
        ; Setup parameters for call to function NLME_InitNV
        LCALL   ??NLME_InitNV?relay
        MOV     A,R1
        MOV     R6,A
//  823 
//  824   if ( nvStat != NV_OPER_FAILED )
        MOV     A,#0x10
        XRL     A,R6
        JZ      ??ZDApp_RestoreNetworkState_0
//  825   {
//  826     if ( NLME_RestoreFromNV() )
        ; Setup parameters for call to function NLME_RestoreFromNV
        LCALL   ??NLME_RestoreFromNV?relay
        MOV     A,R1
        JZ      ??ZDApp_RestoreNetworkState_1
//  827     {
//  828       // Are we a coordinator
//  829       ZDAppNwkAddr.addr.shortAddr = NLME_GetShortAddr();
        ; Setup parameters for call to function NLME_GetShortAddr
        LCALL   ??NLME_GetShortAddr?relay
        MOV     DPTR,#ZDAppNwkAddr
        MOV     A,R2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,R3
        MOVX    @DPTR,A
//  830       if ( ZDAppNwkAddr.addr.shortAddr == 0 )
        MOV     DPTR,#ZDAppNwkAddr
        MOVX    A,@DPTR
        XRL     A,#0x0
        JNZ     ??ZDApp_RestoreNetworkState_2
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x0
??ZDApp_RestoreNetworkState_2:
        JNZ     ??ZDApp_RestoreNetworkState_3
//  831       {
//  832         ZDO_Config_Node_Descriptor.LogicalType = NODETYPE_COORDINATOR;
        MOV     DPTR,#ZDO_Config_Node_Descriptor
        MOVX    A,@DPTR
        ANL     A,#0xf8
        MOVX    @DPTR,A
//  833       }
//  834       devStartMode = MODE_RESUME;
??ZDApp_RestoreNetworkState_3:
        MOV     A,#0x1
        MOV     DPTR,#devStartMode
        MOVX    @DPTR,A
        SJMP    ??ZDApp_RestoreNetworkState_0
//  835     }
//  836     else
//  837       nvStat = NV_ITEM_UNINIT;
??ZDApp_RestoreNetworkState_1:
        MOV     R6,#0xf
//  838 
//  839 #if   ( SECURE != 0  )
//  840     nwkFrameCounterChanges = 0;
//  841     osal_memset( &keyItems, 0, sizeof( nwkActiveKeyItems ) );
//  842     osal_nv_item_init( ZCD_NV_NWKKEY, sizeof(nwkActiveKeyItems), (void *)&keyItems );
//  843 
//  844   #if defined ( ZDO_COORDINATOR )
//  845     ZDApp_RestoreNwkKey();
//  846   #endif // ZDO_COORDINATOR
//  847 #endif // SECURE
//  848 
//  849     // The default for RxOnWhenIdle is true for RTR_NWK and false for end devices
//  850     // [setup in the NLME_RestoreFromNV()].  Change it here if you want something
//  851     // other than default.
//  852   }
//  853 
//  854   if ( nvStat == ZSUCCESS )
??ZDApp_RestoreNetworkState_0:
        MOV     A,R6
        JNZ     ??ZDApp_RestoreNetworkState_4
//  855     return ( ZDO_INITDEV_RESTORED_NETWORK_STATE );
        MOV     R1,#0x0
        SJMP    ??ZDApp_RestoreNetworkState_5
//  856   else
//  857     return ( ZDO_INITDEV_NEW_NETWORK_STATE );
??ZDApp_RestoreNetworkState_4:
        MOV     R1,#0x1
??ZDApp_RestoreNetworkState_5:
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock8
//  858 }
//  859 
//  860 /*********************************************************************
//  861  * @fn      ZDApp_InitUserDesc()
//  862  *
//  863  * @brief   Initialize the User Descriptor, the descriptor is read from NV
//  864  *          when needed.  If you want to initialize the User descriptor to
//  865  *          something other than all zero, do it here.
//  866  *
//  867  * @param   none
//  868  *
//  869  * @return  none
//  870  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  871 void ZDApp_InitUserDesc( void )
ZDApp_InitUserDesc:
        CFI Block cfiBlock9 Using cfiCommon0
        CFI Function ZDApp_InitUserDesc
//  872 {
        FUNCALL ZDApp_InitUserDesc, osal_memset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 27, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 27, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_InitUserDesc, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 29, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 29, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_InitUserDesc, osal_nv_read
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 31, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 31, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 17
        MOV     A,#-0x11
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 27)
//  873   UserDescriptorFormat_t ZDO_DefaultUserDescriptor;
//  874 
//  875   // Initialize the User Descriptor, the descriptor is read from NV
//  876   // when needed.  If you want to initialize the User descriptor to something
//  877   // other than all zero, do it here.
//  878   osal_memset( &ZDO_DefaultUserDescriptor, 0, sizeof( UserDescriptorFormat_t ) );
        ; Setup parameters for call to function osal_memset
        MOV     R4,#0x11
        MOV     R5,#0x0
        MOV     R1,#0x0
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??osal_memset?relay
//  879   if ( ZSUCCESS == osal_nv_item_init( ZCD_NV_USERDESC,
//  880          sizeof(UserDescriptorFormat_t), (void*)&ZDO_DefaultUserDescriptor ) )
        ; Setup parameters for call to function osal_nv_item_init
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 29)
        MOV     R4,#0x11
        MOV     R5,#0x0
        MOV     R2,#-0x7f
        MOV     R3,#0x0
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 27)
        MOV     A,R1
        JNZ     ??ZDApp_InitUserDesc_0
//  881   {
//  882     if ( ZSUCCESS == osal_nv_read( ZCD_NV_USERDESC, 0,
//  883          sizeof(UserDescriptorFormat_t), (void*)&ZDO_DefaultUserDescriptor ) )
        ; Setup parameters for call to function osal_nv_read
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     ?V0 + 0,DPL
        MOV     ?V0 + 1,DPH
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 29)
        MOV     ?V0 + 0,#0x11
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 31)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#-0x7f
        MOV     R3,#0x0
        LCALL   ??osal_nv_read?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 27)
        MOV     A,R1
        JNZ     ??ZDApp_InitUserDesc_0
//  884     {
//  885       if ( ZDO_DefaultUserDescriptor.len != 0 )
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOVX    A,@DPTR
        JZ      ??ZDApp_InitUserDesc_0
//  886       {
//  887         ZDO_Config_Node_Descriptor.UserDescAvail = TRUE;
        MOV     DPTR,#ZDO_Config_Node_Descriptor
        MOVX    A,@DPTR
        SETB    0xE0 /* A   */.4
        MOVX    @DPTR,A
//  888       }
//  889     }
//  890   }
//  891 }
??ZDApp_InitUserDesc_0:
        MOV     A,#0x11
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 10)
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock9
//  892 
//  893 /*********************************************************************
//  894  * @fn      ZDAppCheckForHoldKey()
//  895  *
//  896  * @brief   Check for key to set the device into Hold Auto Start
//  897  *
//  898  * @param   none
//  899  *
//  900  * @return  none
//  901  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  902 void ZDAppCheckForHoldKey( void )
ZDAppCheckForHoldKey:
        CFI Block cfiBlock10 Using cfiCommon0
        CFI Function ZDAppCheckForHoldKey
//  903 {
        FUNCALL ZDAppCheckForHoldKey, HalKeyRead
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
//  904 #if (defined HAL_KEY) && (HAL_KEY == TRUE)
//  905   // Get Keypad directly to see if a HOLD_START is needed.
//  906   // Hold down the SW_BYPASS_START key (see OnBoard.h)
//  907   // while booting to avoid starting up the device.
//  908   if ( HalKeyRead () == SW_BYPASS_START)
        ; Setup parameters for call to function HalKeyRead
        LCALL   ??HalKeyRead?relay
        MOV     A,R1
        XRL     A,#0x1
        JNZ     ??ZDAppCheckForHoldKey_0
//  909   {
//  910     // Change the device state to HOLD on start up
//  911     devState = DEV_HOLD;
        MOV     A,#0x0
        MOV     DPTR,#devState
        MOVX    @DPTR,A
//  912   }
//  913 #endif // HAL_KEY
//  914 }
??ZDAppCheckForHoldKey_0:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock10
//  915 
//  916 /*********************************************************************
//  917  * @fn      ZDApp_ProcessOSALMsg()
//  918  *
//  919  * @brief   Process the incoming task message.
//  920  *
//  921  * @param   msgPtr - message to process
//  922  *
//  923  * @return  none
//  924  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
//  925 void ZDApp_ProcessOSALMsg( osal_event_hdr_t *msgPtr )
ZDApp_ProcessOSALMsg:
        CFI Block cfiBlock11 Using cfiCommon0
        CFI Function ZDApp_ProcessOSALMsg
//  926 {
        FUNCALL ZDApp_ProcessOSALMsg, ZDP_IncomingData
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_ProcessMsgCBs
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_NodeProfileSync
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, NLME_JoinRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 15, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 15, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_NetworkInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, NLME_ReJoinRequest
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_NetworkInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, NLME_SetPollRate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, NLME_SetQueuedPollRate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, NLME_SetResponseRate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_NetworkInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_ProcessNetworkJoin
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, ZDApp_NetworkInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessOSALMsg, osal_set_event
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xe
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 14
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
//  927   // Data Confirmation message fields
//  928   byte sentEP;       // This should always be 0
//  929   byte sentStatus;
//  930   afDataConfirm_t *afDataConfirm;
//  931 
//  932   switch ( msgPtr->event )
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        LCALL   ?UC_SWITCH_SPARSE
`?<Jumptable for ZDApp_ProcessOSALMsg>_0`:
        DATA
        DB        0
        DB        6
        DB        1
        DW        ??ZDApp_ProcessOSALMsg_0
        DB        2
        DW        ??ZDApp_ProcessOSALMsg_1
        DB        3
        DW        ??ZDApp_ProcessOSALMsg_2
        DB        26
        DW        ??ZDApp_ProcessOSALMsg_3
        DB        211
        DW        ??ZDApp_ProcessOSALMsg_4
        DB        253
        DW        ??ZDApp_ProcessOSALMsg_5
        DW        ??ZDApp_ProcessOSALMsg_5
        CODE
//  933   {
//  934     // Incoming ZDO Message
//  935     case AF_INCOMING_MSG_CMD:
//  936       ZDP_IncomingData( (afIncomingMSGPacket_t *)msgPtr );
??ZDApp_ProcessOSALMsg_3:
        ; Setup parameters for call to function ZDP_IncomingData
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??ZDP_IncomingData?relay
        LJMP    ??ZDApp_ProcessOSALMsg_5 & 0xFFFF
//  937       break;
//  938       
//  939     case ZDO_CB_MSG:
//  940       ZDApp_ProcessMsgCBs( (zdoIncomingMsg_t *)msgPtr );
??ZDApp_ProcessOSALMsg_4:
        ; Setup parameters for call to function ZDApp_ProcessMsgCBs
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??ZDApp_ProcessMsgCBs?relay
        LJMP    ??ZDApp_ProcessOSALMsg_5 & 0xFFFF
//  941       break;
//  942 
//  943     case AF_DATA_CONFIRM_CMD:
//  944       // This message is received as a confirmation of a data packet sent.
//  945       // The status is of ZStatus_t type [defined in NLMEDE.h]
//  946       // The message fields are defined in AF.h
//  947       afDataConfirm = (afDataConfirm_t *)msgPtr;
//  948       sentEP = afDataConfirm->endpoint;
//  949       sentStatus = afDataConfirm->hdr.status;
//  950 
//  951       // Action taken when confirmation is received.
//  952       /* Put code here */
//  953 #if !defined ( RTR_NWK )
//  954       if ( sentStatus == ZMacNoACK )
//  955       {
//  956         //ZDApp_SendMsg( ZDAppTaskID, ZDO_NWK_JOIN_REQ, sizeof(osal_event_hdr_t), NULL );
//  957       }
//  958 #else
//  959      (void)sentStatus;
//  960 #endif
//  961       break;
//  962 
//  963     case ZDO_NWK_DISC_CNF:
//  964       if (devState != DEV_NWK_DISC)
??ZDApp_ProcessOSALMsg_0:
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        XRL     A,#0x2
        JZ      $+5
        LJMP    ??ZDApp_ProcessOSALMsg_5 & 0xFFFF
//  965       {
//  966       }
//  967 #if !defined ( ZDO_COORDINATOR ) || defined ( SOFT_START )
//  968   #if defined ( MANAGED_SCAN )
//  969       else if ( (((ZDO_NetworkDiscoveryCfm_t *)msgPtr)->hdr.status == ZDO_SUCCESS) && (zdoDiscCounter > NUM_DISC_ATTEMPTS) )
//  970   #else
//  971       else if ( (((ZDO_NetworkDiscoveryCfm_t *)msgPtr)->hdr.status == ZDO_SUCCESS) && (zdoDiscCounter++ > NUM_DISC_ATTEMPTS) )
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        JZ      $+5
        LJMP    ??ZDApp_ProcessOSALMsg_6 & 0xFFFF
        MOV     DPTR,#zdoDiscCounter
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     A,#0x1
        ADD     A,R2
        MOV     DPTR,#zdoDiscCounter
        MOVX    @DPTR,A
        MOV     A,R2
        CLR     C
        SUBB    A,#0x3
        JNC     $+5
        LJMP    ??ZDApp_ProcessOSALMsg_6 & 0xFFFF
//  972   #endif
//  973       {
//  974         if ( devStartMode == MODE_JOIN )
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        JNZ     ??ZDApp_ProcessOSALMsg_7
//  975         {
//  976           devState = DEV_NWK_JOINING;
        MOV     A,#0x3
        MOV     DPTR,#devState
        MOVX    @DPTR,A
//  977 
//  978           ZDApp_NodeProfileSync((ZDO_NetworkDiscoveryCfm_t *)msgPtr);
        ; Setup parameters for call to function ZDApp_NodeProfileSync
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??ZDApp_NodeProfileSync?relay
//  979 
//  980           if ( NLME_JoinRequest( ((ZDO_NetworkDiscoveryCfm_t *)msgPtr)->extendedPANID,
//  981                BUILD_UINT16( ((ZDO_NetworkDiscoveryCfm_t *)msgPtr)->panIdLSB, ((ZDO_NetworkDiscoveryCfm_t *)msgPtr)->panIdMSB ),
//  982                ((ZDO_NetworkDiscoveryCfm_t *)msgPtr)->logicalChannel,
//  983                ZDO_Config_Node_Descriptor.CapabilityFlags ) != ZSuccess )
        ; Setup parameters for call to function NLME_JoinRequest
        MOV     DPTR,#(ZDO_Config_Node_Descriptor + 2)
        MOVX    A,@DPTR
        MOV     ?V0 + 4,A
        MOV     R0,#?V0 + 4
        LCALL   ?PUSH_XSTACK_I_ONE
        CFI CFA_XSP16 add(XSP16, 15)
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R4,A
        MOV     R5,#0x0
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        CLR     A
        XCH     A,R2
        MOV     R3,A
        MOV     A,R2
        ADD     A,R4
        MOV     R4,A
        MOV     A,R3
        ADDC    A,R5
        MOV     R5,A
        MOV     A,R6
        ADD     A,#0x6
        MOV     R2,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     R3,A
        LCALL   ??NLME_JoinRequest?relay
        MOV     A,#0x1
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 14)
        MOV     A,R1
        JZ      ??ZDApp_ProcessOSALMsg_8
//  984           {
//  985             ZDApp_NetworkInit( (uint16)(NWK_START_DELAY
//  986                 + ((uint16)(osal_rand()& EXTENDED_JOINING_RANDOM_MASK))) );
        ; Setup parameters for call to function ZDApp_NetworkInit
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     A,#0x7f
        ANL     A,?V0 + 4
        MOV     R0,A
        MOV     A,#0x0
        ANL     A,?V0 + 5
        MOV     R1,A
        MOV     A,#0x64
        ADD     A,R0
        MOV     R2,A
        MOV     A,#0x0
        ADDC    A,R1
        MOV     R3,A
        LCALL   ??ZDApp_NetworkInit?relay
        SJMP    ??ZDApp_ProcessOSALMsg_8
//  987           }
//  988         }
//  989         else if ( devStartMode == MODE_REJOIN )
??ZDApp_ProcessOSALMsg_7:
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        XRL     A,#0x3
        JNZ     ??ZDApp_ProcessOSALMsg_8
//  990         {
//  991           devState = DEV_NWK_REJOIN;
        MOV     A,#0x4
        MOV     DPTR,#devState
        MOVX    @DPTR,A
//  992           if ( NLME_ReJoinRequest() != ZSuccess )
        ; Setup parameters for call to function NLME_ReJoinRequest
        LCALL   ??NLME_ReJoinRequest?relay
        MOV     A,R1
        JZ      ??ZDApp_ProcessOSALMsg_8
//  993           {
//  994             ZDApp_NetworkInit( (uint16)(NWK_START_DELAY
//  995                 + ((uint16)(osal_rand()& EXTENDED_JOINING_RANDOM_MASK))) );
        ; Setup parameters for call to function ZDApp_NetworkInit
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     A,#0x7f
        ANL     A,?V0 + 4
        MOV     R0,A
        MOV     A,#0x0
        ANL     A,?V0 + 5
        MOV     R1,A
        MOV     A,#0x64
        ADD     A,R0
        MOV     R2,A
        MOV     A,#0x0
        ADDC    A,R1
        MOV     R3,A
        LCALL   ??ZDApp_NetworkInit?relay
//  996           }
//  997         }
//  998 
//  999         if ( ZDO_Config_Node_Descriptor.CapabilityFlags & CAPINFO_RCVR_ON_IDLE )
??ZDApp_ProcessOSALMsg_8:
        MOV     DPTR,#(ZDO_Config_Node_Descriptor + 2)
        MOVX    A,@DPTR
        MOV     C,0xE0 /* A   */.3
        JNC     ??ZDApp_ProcessOSALMsg_5
// 1000         {
// 1001           // The receiver is on, turn network layer polling off.
// 1002           NLME_SetPollRate( 0 );
        ; Setup parameters for call to function NLME_SetPollRate
        MOV     R2,#0x0
        MOV     R3,#0x0
        LCALL   ??NLME_SetPollRate?relay
// 1003           NLME_SetQueuedPollRate( 0 );
        ; Setup parameters for call to function NLME_SetQueuedPollRate
        MOV     R2,#0x0
        MOV     R3,#0x0
        LCALL   ??NLME_SetQueuedPollRate?relay
// 1004           NLME_SetResponseRate( 0 );
        ; Setup parameters for call to function NLME_SetResponseRate
        MOV     R2,#0x0
        MOV     R3,#0x0
        LCALL   ??NLME_SetResponseRate?relay
        SJMP    ??ZDApp_ProcessOSALMsg_5
// 1005         }
// 1006       }
// 1007       else
// 1008       {
// 1009 #if defined ( SOFT_START ) && !defined ( VIRTKEY_SOFT_START )
// 1010   #if defined ( MANAGED_SCAN )
// 1011         if ( (softStartAllowCoord)
// 1012             && (((ZDO_NetworkDiscoveryCfm_t *)msgPtr)->hdr.status != ZDO_SUCCESS )
// 1013               && (zdoDiscCounter > NUM_DISC_ATTEMPTS) )
// 1014   #else
// 1015         if ( (softStartAllowCoord)
// 1016             && (((ZDO_NetworkDiscoveryCfm_t *)msgPtr)->hdr.status != ZDO_SUCCESS )
// 1017               && (zdoDiscCounter++ > NUM_DISC_ATTEMPTS) )
// 1018   #endif
// 1019         {
// 1020           ZDO_Config_Node_Descriptor.LogicalType = NODETYPE_COORDINATOR;
// 1021           devStartMode = MODE_HARD;
// 1022         }
// 1023         else if ( continueJoining == FALSE )
// 1024         {
// 1025           devState = DEV_HOLD;
// 1026           osal_stop_timerEx( ZDAppTaskID, ZDO_NETWORK_INIT );
// 1027           break;    // Don't init
// 1028         }
// 1029 #endif
// 1030   #if defined ( MANAGED_SCAN )
// 1031         ZDApp_NetworkInit( MANAGEDSCAN_DELAY_BETWEEN_SCANS );
// 1032   #else
// 1033         if ( continueJoining )
??ZDApp_ProcessOSALMsg_6:
        MOV     DPTR,#continueJoining
        MOVX    A,@DPTR
        JZ      ??ZDApp_ProcessOSALMsg_5
// 1034         {
// 1035           ZDApp_NetworkInit( (uint16)(BEACON_REQUEST_DELAY
// 1036               + ((uint16)(osal_rand()& BEACON_REQ_DELAY_MASK))) );
        ; Setup parameters for call to function ZDApp_NetworkInit
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     A,#-0x1
        ANL     A,?V0 + 4
        MOV     R0,A
        MOV     A,#0x0
        ANL     A,?V0 + 5
        MOV     R1,A
        MOV     A,#0x64
        ADD     A,R0
        MOV     R2,A
        MOV     A,#0x0
        ADDC    A,R1
        MOV     R3,A
        LCALL   ??ZDApp_NetworkInit?relay
        SJMP    ??ZDApp_ProcessOSALMsg_5
// 1037         }
// 1038   #endif
// 1039       }
// 1040 #endif  // !ZDO_COORDINATOR
// 1041       break;
// 1042 
// 1043 #if !defined( ZDO_COORDINATOR ) || defined( SOFT_START )
// 1044     case ZDO_NWK_JOIN_IND:
// 1045       ZDApp_ProcessNetworkJoin();
??ZDApp_ProcessOSALMsg_1:
        ; Setup parameters for call to function ZDApp_ProcessNetworkJoin
        LCALL   ??ZDApp_ProcessNetworkJoin?relay
        SJMP    ??ZDApp_ProcessOSALMsg_5
// 1046       break;
// 1047 
// 1048     case ZDO_NWK_JOIN_REQ:
// 1049       retryCnt = 0;
??ZDApp_ProcessOSALMsg_2:
        MOV     A,#0x0
        MOV     DPTR,#retryCnt
        MOVX    @DPTR,A
// 1050       devStartMode = MODE_RESUME;
        MOV     A,#0x1
        MOV     DPTR,#devStartMode
        MOVX    @DPTR,A
// 1051       _tmpRejoinState = true;
        MOV     A,#0x1
        MOV     DPTR,#_tmpRejoinState
        MOVX    @DPTR,A
// 1052       zgDefaultStartingScanDuration = BEACON_ORDER_60_MSEC;
        MOV     A,#0x2
        MOV     DPTR,#zgDefaultStartingScanDuration
        MOVX    @DPTR,A
// 1053       ZDApp_NetworkInit( 0 );
        ; Setup parameters for call to function ZDApp_NetworkInit
        MOV     R2,#0x0
        MOV     R3,#0x0
        LCALL   ??ZDApp_NetworkInit?relay
// 1054 
// 1055       // indicate state change to apps
// 1056       devState = DEV_INIT;
        MOV     A,#0x1
        MOV     DPTR,#devState
        MOVX    @DPTR,A
// 1057       osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
        ; Setup parameters for call to function osal_set_event
        MOV     R2,#0x10
        MOV     R3,#0x0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_set_event?relay
// 1058       break;
// 1059 #endif  // !ZDO_COORDINATOR
// 1060 
// 1061 #if defined ( ZDSECMGR_SECURE )
// 1062   #if defined ( ZDSECMGR_COMMERCIAL )
// 1063         case ZDO_ESTABLISH_KEY_CFM:
// 1064           ZDSecMgrEstablishKeyCfm
// 1065             ( (ZDO_EstablishKeyCfm_t*)msgPtr );
// 1066           break;
// 1067   #endif
// 1068 
// 1069   #if defined ( ZDSECMGR_COMMERCIAL )
// 1070     #if !defined ( ZDO_COORDINATOR ) || defined ( SOFT_START )
// 1071         case ZDO_ESTABLISH_KEY_IND:
// 1072           ZDSecMgrEstablishKeyInd
// 1073             ( (ZDO_EstablishKeyInd_t*)msgPtr );
// 1074           break;
// 1075     #endif
// 1076   #endif
// 1077 
// 1078   #if !defined ( ZDO_COORDINATOR ) || defined( SOFT_START )
// 1079         case ZDO_TRANSPORT_KEY_IND:
// 1080           ZDSecMgrTransportKeyInd
// 1081             ( (ZDO_TransportKeyInd_t*)msgPtr );
// 1082           break;
// 1083   #endif
// 1084 
// 1085   #if defined ( ZDO_COORDINATOR )
// 1086         case ZDO_UPDATE_DEVICE_IND:
// 1087           ZDSecMgrUpdateDeviceInd
// 1088             ( (ZDO_UpdateDeviceInd_t*)msgPtr );
// 1089           break;
// 1090   #endif
// 1091 
// 1092   #if defined ( RTR_NWK )
// 1093     #if !defined ( ZDO_COORDINATOR ) || defined( SOFT_START )
// 1094         case ZDO_REMOVE_DEVICE_IND:
// 1095           ZDSecMgrRemoveDeviceInd
// 1096             ( (ZDO_RemoveDeviceInd_t*)msgPtr );
// 1097           break;
// 1098     #endif
// 1099   #endif
// 1100 
// 1101   #if defined ( ZDSECMGR_COMMERCIAL )
// 1102     #if defined ( ZDO_COORDINATOR )
// 1103         case ZDO_REQUEST_KEY_IND:
// 1104           ZDSecMgrRequestKeyInd
// 1105             ( (ZDO_RequestKeyInd_t*)msgPtr );
// 1106           break;
// 1107     #endif
// 1108   #endif
// 1109 
// 1110   #if !defined ( ZDO_COORDINATOR ) || defined( SOFT_START )
// 1111         case ZDO_SWITCH_KEY_IND:
// 1112           ZDSecMgrSwitchKeyInd
// 1113             ( (ZDO_SwitchKeyInd_t*)msgPtr );
// 1114           break;
// 1115   #endif
// 1116 
// 1117 #endif // defined ( ZDSECMGR_SECURE )
// 1118 
// 1119     default:
// 1120       break;
// 1121   }
// 1122 
// 1123   (void)sentEP;
// 1124 }
??ZDApp_ProcessOSALMsg_5:
        MOV     R7,#0x6
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock11
// 1125 
// 1126 /*********************************************************************
// 1127  * @fn      ZDApp_ProcessMsgCBs()
// 1128  *
// 1129  * @brief   Process response messages
// 1130  *
// 1131  * @param   none
// 1132  *
// 1133  * @return  none
// 1134  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1135 void ZDApp_ProcessMsgCBs( zdoIncomingMsg_t *inMsg )
ZDApp_ProcessMsgCBs:
        CFI Block cfiBlock12 Using cfiCommon0
        CFI Function ZDApp_ProcessMsgCBs
// 1136 {
        FUNCALL ZDApp_ProcessMsgCBs, ZDO_ParseAddrRsp
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 33, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessMsgCBs, ZDO_UpdateAddrManager
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 33, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessMsgCBs, osal_mem_free
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 33, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessMsgCBs, ZDO_ParseBindUnbindReq
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 33, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessMsgCBs, ZDO_ProcessBindUnbindReq
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 33, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 33, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 21
        MOV     A,#-0x15
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 33)
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
// 1137   switch ( inMsg->clusterID )
        MOV     A,?V0 + 0
        ADD     A,#0xc
        MOV     DPL,A
        MOV     A,?V0 + 1
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     ?V0 + 2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     ?V0 + 3,A
        MOV     R0,#?V0 + 2
        LCALL   ?US_SWITCH_SPARSE
`?<Jumptable for ZDApp_ProcessMsgCBs>_0`:
        DATA
        DW        2
        DW        33
        DW        34
        DW        ??ZDApp_ProcessMsgCBs_0
        DW        32768
        DW        32769
        DW        ??ZDApp_ProcessMsgCBs_1
        DW        0
        DW        ??ZDApp_ProcessMsgCBs_2
        CODE
// 1138   {
// 1139 #if defined ( ZDO_NWKADDR_REQUEST ) || defined ( ZDO_IEEEADDR_REQUEST ) || defined ( REFLECTOR )
// 1140     case NWK_addr_rsp:
// 1141     case IEEE_addr_rsp:
// 1142       {
// 1143         ZDO_NwkIEEEAddrResp_t *pAddrRsp;
// 1144         pAddrRsp = ZDO_ParseAddrRsp( inMsg );
??ZDApp_ProcessMsgCBs_1:
        ; Setup parameters for call to function ZDO_ParseAddrRsp
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??ZDO_ParseAddrRsp?relay
        MOV     ?V0 + 2,R2
        MOV     ?V0 + 3,R3
        MOV     R6,?V0 + 2
        MOV     R7,?V0 + 3
// 1145         if ( pAddrRsp )
        MOV     A,R6
        XRL     A,#0x0
        JNZ     ??ZDApp_ProcessMsgCBs_3
        MOV     A,R7
        XRL     A,#0x0
??ZDApp_ProcessMsgCBs_3:
        JZ      ??ZDApp_ProcessMsgCBs_2
// 1146         {
// 1147           if ( pAddrRsp->status == ZSuccess )
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        JNZ     ??ZDApp_ProcessMsgCBs_4
// 1148           {
// 1149             ZDO_UpdateAddrManager( pAddrRsp->nwkAddr, pAddrRsp->extAddr );
        ; Setup parameters for call to function ZDO_UpdateAddrManager
        MOV     A,R6
        ADD     A,#0x3
        MOV     R4,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     R5,A
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??ZDO_UpdateAddrManager?relay
// 1150           }
// 1151           osal_mem_free( pAddrRsp );
??ZDApp_ProcessMsgCBs_4:
        ; Setup parameters for call to function osal_mem_free
        MOV     A,R6
        MOV     R2,A
        MOV     A,R7
        MOV     R3,A
        LCALL   ??osal_mem_free?relay
        SJMP    ??ZDApp_ProcessMsgCBs_2
// 1152         }
// 1153       }
// 1154       break;
// 1155 #endif
// 1156       
// 1157 #if defined ( REFLECTOR )
// 1158     case Bind_req:
// 1159     case Unbind_req:
// 1160       {
// 1161         ZDO_BindUnbindReq_t bindReq;
// 1162         ZDO_ParseBindUnbindReq( inMsg, &bindReq );
??ZDApp_ProcessMsgCBs_0:
        ; Setup parameters for call to function ZDO_ParseBindUnbindReq
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??ZDO_ParseBindUnbindReq?relay
// 1163         ZDO_ProcessBindUnbindReq( inMsg, &bindReq );
        ; Setup parameters for call to function ZDO_ProcessBindUnbindReq
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??ZDO_ProcessBindUnbindReq?relay
// 1164       }
// 1165       break;
// 1166 #endif      
// 1167       
// 1168 #if defined ( ZDO_COORDINATOR )
// 1169     case Bind_rsp:
// 1170     case Unbind_rsp:
// 1171       if ( matchED )
// 1172       {
// 1173         ZDMatchSendState(
// 1174              (uint8)((inMsg->clusterID == Bind_rsp) ? ZDMATCH_REASON_BIND_RSP : ZDMATCH_REASON_UNBIND_RSP),
// 1175              ZDO_ParseBindRsp(inMsg), inMsg->TransSeq );
// 1176       }
// 1177       break;
// 1178       
// 1179     case End_Device_Bind_req:
// 1180       {
// 1181         ZDEndDeviceBind_t bindReq;
// 1182         ZDO_ParseEndDeviceBindReq( inMsg, &bindReq );
// 1183         ZDO_MatchEndDeviceBind( &bindReq );
// 1184         
// 1185         // Freeing the cluster lists - if allocated.
// 1186         if ( bindReq.numInClusters )
// 1187           osal_mem_free( bindReq.inClusters );
// 1188         if ( bindReq.numOutClusters )
// 1189           osal_mem_free( bindReq.outClusters );
// 1190       }
// 1191       break;
// 1192 #endif      
// 1193   }
// 1194 }
??ZDApp_ProcessMsgCBs_2:
        MOV     A,#0x15
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 12)
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock12
// 1195 
// 1196 /*********************************************************************
// 1197  * @fn      ZDApp_RegisterCBs()
// 1198  *
// 1199  * @brief   Process response messages
// 1200  *
// 1201  * @param   none
// 1202  *
// 1203  * @return  none
// 1204  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1205 void ZDApp_RegisterCBs( void )
ZDApp_RegisterCBs:
        CFI Block cfiBlock13 Using cfiCommon0
        CFI Function ZDApp_RegisterCBs
// 1206 {
        FUNCALL ZDApp_RegisterCBs, ZDO_RegisterForZDOMsg
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_RegisterCBs, ZDO_RegisterForZDOMsg
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_RegisterCBs, ZDO_RegisterForZDOMsg
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_RegisterCBs, ZDO_RegisterForZDOMsg
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 1207 #if defined ( ZDO_IEEEADDR_REQUEST ) || defined ( REFLECTOR )
// 1208   ZDO_RegisterForZDOMsg( ZDAppTaskID, IEEE_addr_rsp );
        ; Setup parameters for call to function ZDO_RegisterForZDOMsg
        MOV     R2,#0x1
        MOV     R3,#-0x80
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDO_RegisterForZDOMsg?relay
// 1209 #endif
// 1210 #if defined ( ZDO_NWKADDR_REQUEST ) || defined ( REFLECTOR )
// 1211   ZDO_RegisterForZDOMsg( ZDAppTaskID, NWK_addr_rsp );
        ; Setup parameters for call to function ZDO_RegisterForZDOMsg
        MOV     R2,#0x0
        MOV     R3,#-0x80
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDO_RegisterForZDOMsg?relay
// 1212 #endif  
// 1213 #if defined ( ZDO_COORDINATOR )
// 1214   ZDO_RegisterForZDOMsg( ZDAppTaskID, Bind_rsp );
// 1215   ZDO_RegisterForZDOMsg( ZDAppTaskID, Unbind_rsp );
// 1216   ZDO_RegisterForZDOMsg( ZDAppTaskID, End_Device_Bind_req );
// 1217 #endif
// 1218 #if defined ( REFLECTOR )
// 1219   ZDO_RegisterForZDOMsg( ZDAppTaskID, Bind_req );
        ; Setup parameters for call to function ZDO_RegisterForZDOMsg
        MOV     R2,#0x21
        MOV     R3,#0x0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDO_RegisterForZDOMsg?relay
// 1220   ZDO_RegisterForZDOMsg( ZDAppTaskID, Unbind_req );
        ; Setup parameters for call to function ZDO_RegisterForZDOMsg
        MOV     R2,#0x22
        MOV     R3,#0x0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDO_RegisterForZDOMsg?relay
// 1221 #endif  
// 1222 }
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock13
// 1223 
// 1224 #if !defined( ZDO_COORDINATOR ) || defined( SOFT_START )
// 1225 /*********************************************************************
// 1226  * @fn      ZDApp_ProcessNetworkJoin()
// 1227  *
// 1228  * @brief
// 1229  *
// 1230  *   Save off the Network key information.
// 1231  *
// 1232  * @param   none
// 1233  *
// 1234  * @return  none
// 1235  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1236 void ZDApp_ProcessNetworkJoin( void )
ZDApp_ProcessNetworkJoin:
        CFI Block cfiBlock14 Using cfiCommon0
        CFI Function ZDApp_ProcessNetworkJoin
// 1237 {
        FUNCALL ZDApp_ProcessNetworkJoin, osal_set_event
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessNetworkJoin, NLME_GetShortAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessNetworkJoin, ZMacSetReq
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessNetworkJoin, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessNetworkJoin, ZDApp_NetworkInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessNetworkJoin, osal_set_event
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessNetworkJoin, NLME_SetPollRate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessNetworkJoin, NLME_SetQueuedPollRate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessNetworkJoin, NLME_SetResponseRate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessNetworkJoin, osal_rand
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_ProcessNetworkJoin, ZDApp_NetworkInit
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 2
        MOV     A,#-0x2
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 12)
// 1238   if ( (devState == DEV_NWK_JOINING) ||
// 1239       ((devState == DEV_NWK_ORPHAN)  &&
// 1240        (ZDO_Config_Node_Descriptor.LogicalType == NODETYPE_ROUTER)) )
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        XRL     A,#0x3
        JZ      ??ZDApp_ProcessNetworkJoin_0
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        XRL     A,#0xa
        JZ      $+5
        LJMP    ??ZDApp_ProcessNetworkJoin_1 & 0xFFFF
        MOV     DPTR,#ZDO_Config_Node_Descriptor
        MOVX    A,@DPTR
        ANL     A,#0x7
        XRL     A,#0x1
        JZ      $+5
        LJMP    ??ZDApp_ProcessNetworkJoin_1 & 0xFFFF
// 1241   {
// 1242     // Result of a Join attempt by this device.
// 1243     if ( nwkStatus == ZSuccess )
??ZDApp_ProcessNetworkJoin_0:
        MOV     DPTR,#nwkStatus
        MOVX    A,@DPTR
        JNZ     ??ZDApp_ProcessNetworkJoin_2
// 1244     {
// 1245       osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
        ; Setup parameters for call to function osal_set_event
        MOV     R2,#0x10
        MOV     R3,#0x0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_set_event?relay
// 1246 
// 1247 #if defined ( POWER_SAVING )
// 1248       osal_pwrmgr_device( PWRMGR_BATTERY );
// 1249 #endif
// 1250 
// 1251 #if   ( SECURE != 0  )
// 1252       if ( _NIB.SecurityLevel && (ZDApp_RestoreNwkKey() == false ) )
// 1253       {
// 1254         // wait for auth from trust center!!
// 1255         devState = DEV_END_DEVICE_UNAUTH;
// 1256 
// 1257         // Start the reset timer for MAX UNAUTH time
// 1258         ZDApp_ResetTimerStart( MAX_DEVICE_UNAUTH_TIMEOUT );
// 1259       }
// 1260       else
// 1261 #endif  // SECURE
// 1262       {
// 1263 #if defined ( RTR_NWK )
// 1264         if ( devState == DEV_NWK_ORPHAN
// 1265             && ZDO_Config_Node_Descriptor.LogicalType != NODETYPE_DEVICE )
// 1266         {
// 1267           // Change NIB state to router for restore
// 1268           _NIB.nwkState = NWK_ROUTER;
// 1269         }
// 1270 #endif
// 1271         devState = DEV_END_DEVICE;
        MOV     A,#0x6
        MOV     DPTR,#devState
        MOVX    @DPTR,A
        LJMP    ??ZDApp_ProcessNetworkJoin_3 & 0xFFFF
// 1272 #if defined ( RTR_NWK )
// 1273         // NOTE: first two parameters are not used, see NLMEDE.h for details
// 1274   #if !defined (AUTO_SOFT_START)
// 1275         if ( ZDO_Config_Node_Descriptor.LogicalType != NODETYPE_DEVICE )
// 1276         {
// 1277           NLME_StartRouterRequest( 0, 0, false );
// 1278         }
// 1279   #endif // AUTO_SOFT_START
// 1280 #endif  // RTR
// 1281 
// 1282 #if defined ( ZDO_ENDDEVICE_ANNCE_GENERATE )
// 1283         ZDP_EndDeviceAnnce( ZDAppNwkAddr.addr.shortAddr, saveExtAddr,
// 1284                            ZDO_Config_Node_Descriptor.CapabilityFlags, 0 );
// 1285 #endif
// 1286       }
// 1287     }
// 1288     else
// 1289     {
// 1290       if ( (devStartMode == MODE_RESUME) && (++retryCnt >= MAX_RESUME_RETRY) )
??ZDApp_ProcessNetworkJoin_2:
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??ZDApp_ProcessNetworkJoin_4
        MOV     DPTR,#retryCnt
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOV     R2,A
        MOV     A,R2
        MOV     DPTR,#retryCnt
        MOVX    @DPTR,A
        MOV     A,R2
        CLR     C
        SUBB    A,#0x1
        JC      ??ZDApp_ProcessNetworkJoin_4
// 1291       {
// 1292         if ( _NIB.nwkPanId == 0xFFFF || _NIB.nwkPanId == INVALID_PAN_ID )
        MOV     DPTR,#(_NIB + 33)
        MOVX    A,@DPTR
        XRL     A,#0xff
        JNZ     ??ZDApp_ProcessNetworkJoin_5
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??ZDApp_ProcessNetworkJoin_5:
        JZ      ??ZDApp_ProcessNetworkJoin_6
        MOV     DPTR,#(_NIB + 33)
        MOVX    A,@DPTR
        XRL     A,#0xfe
        JNZ     ??ZDApp_ProcessNetworkJoin_7
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??ZDApp_ProcessNetworkJoin_7:
        JNZ     ??ZDApp_ProcessNetworkJoin_8
// 1293           devStartMode = MODE_JOIN;
??ZDApp_ProcessNetworkJoin_6:
        MOV     A,#0x0
        MOV     DPTR,#devStartMode
        MOVX    @DPTR,A
        SJMP    ??ZDApp_ProcessNetworkJoin_4
// 1294         else
// 1295         {
// 1296           devStartMode = MODE_REJOIN;
??ZDApp_ProcessNetworkJoin_8:
        MOV     A,#0x3
        MOV     DPTR,#devStartMode
        MOVX    @DPTR,A
// 1297           _tmpRejoinState = true;
        MOV     A,#0x1
        MOV     DPTR,#_tmpRejoinState
        MOVX    @DPTR,A
// 1298         }
// 1299       }
// 1300 
// 1301       if ( (NLME_GetShortAddr() != INVALID_NODE_ADDR) ||
// 1302            (_NIB.nwkDevAddress != INVALID_NODE_ADDR) )
??ZDApp_ProcessNetworkJoin_4:
        ; Setup parameters for call to function NLME_GetShortAddr
        LCALL   ??NLME_GetShortAddr?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,#-0x2
        XRL     A,?V0 + 0
        JNZ     ??ZDApp_ProcessNetworkJoin_9
        MOV     A,#-0x1
        XRL     A,?V0 + 1
??ZDApp_ProcessNetworkJoin_9:
        JNZ     ??ZDApp_ProcessNetworkJoin_10
        MOV     DPTR,#(_NIB + 20)
        MOVX    A,@DPTR
        XRL     A,#0xfe
        JNZ     ??ZDApp_ProcessNetworkJoin_11
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??ZDApp_ProcessNetworkJoin_11:
        JZ      ??ZDApp_ProcessNetworkJoin_12
// 1303       {
// 1304         uint16 addr = INVALID_NODE_ADDR;
??ZDApp_ProcessNetworkJoin_10:
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     A,#-0x2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#-0x1
        MOVX    @DPTR,A
// 1305         // Invalidate nwk addr so end device does not use in its data reqs.
// 1306         _NIB.nwkDevAddress = INVALID_NODE_ADDR;
        MOV     DPTR,#(_NIB + 20)
        MOV     A,#-0x2
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#-0x1
        MOVX    @DPTR,A
// 1307         ZMacSetReq( ZMacShortAddress, (byte *)&addr );
        ; Setup parameters for call to function ZMacSetReq
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R2,DPL
        MOV     R3,DPH
        MOV     R1,#0x53
        LCALL   ZMacSetReq & 0xFFFF
// 1308       }
// 1309 
// 1310       zdoDiscCounter = 1;
??ZDApp_ProcessNetworkJoin_12:
        MOV     A,#0x1
        MOV     DPTR,#zdoDiscCounter
        MOVX    @DPTR,A
// 1311 
// 1312 //      ZDApp_NetworkInit( (uint16)
// 1313 //                         ((NWK_START_DELAY * (osal_rand() & 0x0F)) +
// 1314 //                          (NWK_START_DELAY * 5)) );
// 1315       ZDApp_NetworkInit( (uint16)(NWK_START_DELAY
// 1316            + ((uint16)(osal_rand()& EXTENDED_JOINING_RANDOM_MASK))) );
        ; Setup parameters for call to function ZDApp_NetworkInit
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,#0x7f
        ANL     A,?V0 + 0
        MOV     R0,A
        MOV     A,#0x0
        ANL     A,?V0 + 1
        MOV     R1,A
        MOV     A,#0x64
        ADD     A,R0
        MOV     R2,A
        MOV     A,#0x0
        ADDC    A,R1
        MOV     R3,A
        LCALL   ??ZDApp_NetworkInit?relay
        LJMP    ??ZDApp_ProcessNetworkJoin_3 & 0xFFFF
// 1317     }
// 1318   }
// 1319   else if ( devState == DEV_NWK_ORPHAN || devState == DEV_NWK_REJOIN )
??ZDApp_ProcessNetworkJoin_1:
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        XRL     A,#0xa
        JZ      ??ZDApp_ProcessNetworkJoin_13
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        XRL     A,#0x4
        JZ      $+5
        LJMP    ??ZDApp_ProcessNetworkJoin_3 & 0xFFFF
// 1320   {
// 1321     // results of an orphaning attempt by this device
// 1322     if (nwkStatus == ZSuccess)
??ZDApp_ProcessNetworkJoin_13:
        MOV     DPTR,#nwkStatus
        MOVX    A,@DPTR
        JNZ     ??ZDApp_ProcessNetworkJoin_14
// 1323     {
// 1324 #if ( SECURE != 0 )
// 1325       ZDApp_RestoreNwkKey();
// 1326 #endif
// 1327       devState = DEV_END_DEVICE;
        MOV     A,#0x6
        MOV     DPTR,#devState
        MOVX    @DPTR,A
// 1328       osal_set_event( ZDAppTaskID, ZDO_STATE_CHANGE_EVT );
        ; Setup parameters for call to function osal_set_event
        MOV     R2,#0x10
        MOV     R3,#0x0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_set_event?relay
// 1329       // setup Power Manager Device
// 1330 #if defined ( POWER_SAVING )
// 1331       osal_pwrmgr_device( PWRMGR_BATTERY );
// 1332 #endif
// 1333 
// 1334       if ( ZDO_Config_Node_Descriptor.CapabilityFlags & CAPINFO_RCVR_ON_IDLE )
        MOV     DPTR,#(ZDO_Config_Node_Descriptor + 2)
        MOVX    A,@DPTR
        MOV     C,0xE0 /* A   */.3
        JNC     ??ZDApp_ProcessNetworkJoin_3
// 1335       {
// 1336         // The receiver is on, turn network layer polling off.
// 1337         NLME_SetPollRate( 0 );
        ; Setup parameters for call to function NLME_SetPollRate
        MOV     R2,#0x0
        MOV     R3,#0x0
        LCALL   ??NLME_SetPollRate?relay
// 1338         NLME_SetQueuedPollRate( 0 );
        ; Setup parameters for call to function NLME_SetQueuedPollRate
        MOV     R2,#0x0
        MOV     R3,#0x0
        LCALL   ??NLME_SetQueuedPollRate?relay
// 1339         NLME_SetResponseRate( 0 );
        ; Setup parameters for call to function NLME_SetResponseRate
        MOV     R2,#0x0
        MOV     R3,#0x0
        LCALL   ??NLME_SetResponseRate?relay
        SJMP    ??ZDApp_ProcessNetworkJoin_3
// 1340       }
// 1341 
// 1342 #if defined ( ZDO_ENDDEVICE_ANNCE_GENERATE )
// 1343       ZDP_EndDeviceAnnce( ZDAppNwkAddr.addr.shortAddr, saveExtAddr,
// 1344                          ZDO_Config_Node_Descriptor.CapabilityFlags, 0 );
// 1345 #endif
// 1346 
// 1347     }
// 1348     else
// 1349     {
// 1350       if ( (devStartMode == MODE_RESUME) && (++retryCnt >= MAX_RESUME_RETRY) )
??ZDApp_ProcessNetworkJoin_14:
        MOV     DPTR,#devStartMode
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??ZDApp_ProcessNetworkJoin_15
        MOV     DPTR,#retryCnt
        MOVX    A,@DPTR
        ADD     A,#0x1
        MOV     R2,A
        MOV     A,R2
        MOV     DPTR,#retryCnt
        MOVX    @DPTR,A
        MOV     A,R2
        CLR     C
        SUBB    A,#0x1
        JC      ??ZDApp_ProcessNetworkJoin_15
// 1351       {
// 1352         if ( _NIB.nwkPanId == 0xFFFF || _NIB.nwkPanId == INVALID_PAN_ID )
        MOV     DPTR,#(_NIB + 33)
        MOVX    A,@DPTR
        XRL     A,#0xff
        JNZ     ??ZDApp_ProcessNetworkJoin_16
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??ZDApp_ProcessNetworkJoin_16:
        JZ      ??ZDApp_ProcessNetworkJoin_17
        MOV     DPTR,#(_NIB + 33)
        MOVX    A,@DPTR
        XRL     A,#0xfe
        JNZ     ??ZDApp_ProcessNetworkJoin_18
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??ZDApp_ProcessNetworkJoin_18:
        JNZ     ??ZDApp_ProcessNetworkJoin_19
// 1353           devStartMode = MODE_JOIN;
??ZDApp_ProcessNetworkJoin_17:
        MOV     A,#0x0
        MOV     DPTR,#devStartMode
        MOVX    @DPTR,A
        SJMP    ??ZDApp_ProcessNetworkJoin_15
// 1354         else
// 1355         {
// 1356           devStartMode = MODE_REJOIN;
??ZDApp_ProcessNetworkJoin_19:
        MOV     A,#0x3
        MOV     DPTR,#devStartMode
        MOVX    @DPTR,A
// 1357           _tmpRejoinState = true;
        MOV     A,#0x1
        MOV     DPTR,#_tmpRejoinState
        MOVX    @DPTR,A
// 1358         }
// 1359       }
// 1360 
// 1361       // setup a retry for later...
// 1362       ZDApp_NetworkInit( (uint16)(NWK_START_DELAY
// 1363            + (osal_rand()& EXTENDED_JOINING_RANDOM_MASK)) );
??ZDApp_ProcessNetworkJoin_15:
        ; Setup parameters for call to function ZDApp_NetworkInit
        ; Setup parameters for call to function osal_rand
        LCALL   ??osal_rand?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,#0x7f
        ANL     A,?V0 + 0
        MOV     R0,A
        MOV     A,#0x0
        ANL     A,?V0 + 1
        MOV     R1,A
        MOV     A,#0x64
        ADD     A,R0
        MOV     R2,A
        MOV     A,#0x0
        ADDC    A,R1
        MOV     R3,A
        LCALL   ??ZDApp_NetworkInit?relay
// 1364     }
// 1365   }
// 1366   else
// 1367   {
// 1368     // this is an error case!!
// 1369   }
// 1370 }
??ZDApp_ProcessNetworkJoin_3:
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 10)
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock14
// 1371 #endif // !ZDO_COORDINATOR
// 1372 
// 1373 #if ( SECURE != 0 )
// 1374 /*********************************************************************
// 1375  * @fn      ZDApp_SaveNwkKey()
// 1376  *
// 1377  * @brief   Save off the Network key information.
// 1378  *
// 1379  * @param   none
// 1380  *
// 1381  * @return  none
// 1382  */
// 1383 void ZDApp_SaveNwkKey( void )
// 1384 {
// 1385   nwkActiveKeyItems keyItems;
// 1386 
// 1387   SSP_ReadNwkActiveKey( &keyItems );
// 1388   keyItems.frameCounter++;
// 1389 
// 1390   osal_nv_write( ZCD_NV_NWKKEY, 0, sizeof( nwkActiveKeyItems ),
// 1391                 (void *)&keyItems );
// 1392 
// 1393   nwkFrameCounterChanges = 0;
// 1394 }
// 1395 
// 1396 /*********************************************************************
// 1397  * @fn      ZDApp_ResetNwkKey()
// 1398  *
// 1399  * @brief   Reset the Network key information in NV.
// 1400  *
// 1401  * @param   none
// 1402  *
// 1403  * @return  none
// 1404  */
// 1405 void ZDApp_ResetNwkKey( void )
// 1406 {
// 1407   nwkActiveKeyItems keyItems;
// 1408 
// 1409   osal_memset( &keyItems, 0, sizeof( nwkActiveKeyItems ) );
// 1410   osal_nv_write( ZCD_NV_NWKKEY, 0, sizeof( nwkActiveKeyItems ),
// 1411                 (void *)&keyItems );
// 1412 }
// 1413 #endif
// 1414 
// 1415 #if ( SECURE != 0 )
// 1416 /*********************************************************************
// 1417  * @fn      ZDApp_RestoreNwkKey()
// 1418  *
// 1419  * @brief
// 1420  *
// 1421  *   Save off the Network key information.
// 1422  *
// 1423  * @param   none
// 1424  *
// 1425  * @return  true if restored from NV, false if not
// 1426  */
// 1427 byte ZDApp_RestoreNwkKey( void )
// 1428 {
// 1429   nwkActiveKeyItems keyItems;
// 1430   byte ret = false;
// 1431 
// 1432   if ( osal_nv_read( ZCD_NV_NWKKEY, 0, sizeof(nwkActiveKeyItems), (void*)&keyItems )
// 1433       == ZSUCCESS )
// 1434   {
// 1435     if ( keyItems.frameCounter > 0 )
// 1436     {
// 1437       // Restore the key information
// 1438       keyItems.frameCounter += MAX_NWK_FRAMECOUNTER_CHANGES;
// 1439       nwkFrameCounter = keyItems.frameCounter;
// 1440       ret = true;
// 1441     }
// 1442 
// 1443     // Force a save for the first frame counter increment
// 1444     nwkFrameCounterChanges = MAX_NWK_FRAMECOUNTER_CHANGES + 1;
// 1445   }
// 1446   return ( ret );
// 1447 }
// 1448 #endif
// 1449 
// 1450 /*********************************************************************
// 1451  * @fn      ZDApp_ResetTimerStart
// 1452  *
// 1453  * @brief   Start the reset timer.
// 1454  *
// 1455  * @param   delay - delay time(ms) before reset
// 1456  *
// 1457  * @return  none
// 1458  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1459 void ZDApp_ResetTimerStart( uint16 delay )
ZDApp_ResetTimerStart:
        CFI Block cfiBlock15 Using cfiCommon0
        CFI Function ZDApp_ResetTimerStart
// 1460 {
        FUNCALL ZDApp_ResetTimerStart, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
// 1461   // Start the rest timer
// 1462   osal_start_timerEx( ZDAppTaskID, ZDO_DEVICE_RESET, delay );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     A,R6
        MOV     R4,A
        MOV     A,R7
        MOV     R5,A
        MOV     R2,#0x4
        MOV     R3,#0x0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
// 1463 }
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock15
// 1464 
// 1465 /*********************************************************************
// 1466  * @fn      ZDApp_ResetTimerCancel
// 1467  *
// 1468  * @brief   Cancel the reset timer.
// 1469  *
// 1470  * @param   none
// 1471  *
// 1472  * @return  none
// 1473  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1474 void ZDApp_ResetTimerCancel( void )
ZDApp_ResetTimerCancel:
        CFI Block cfiBlock16 Using cfiCommon0
        CFI Function ZDApp_ResetTimerCancel
// 1475 {
        FUNCALL ZDApp_ResetTimerCancel, osal_stop_timerEx
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 1476   // Cancel the reset timer
// 1477   osal_stop_timerEx( ZDAppTaskID, ZDO_DEVICE_RESET );
        ; Setup parameters for call to function osal_stop_timerEx
        MOV     R2,#0x4
        MOV     R3,#0x0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_stop_timerEx?relay
// 1478 }
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock16
// 1479 
// 1480 /*********************************************************************
// 1481  * @fn      ZDApp_LeaveCtrlInit
// 1482  *
// 1483  * @brief   Initialize the leave control logic.
// 1484  *
// 1485  * @param   none
// 1486  *
// 1487  * @return  none
// 1488  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1489 void ZDApp_LeaveCtrlInit( void )
ZDApp_LeaveCtrlInit:
        CFI Block cfiBlock17 Using cfiCommon0
        CFI Function ZDApp_LeaveCtrlInit
// 1490 {
        FUNCALL ZDApp_LeaveCtrlInit, osal_nv_item_init
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_LeaveCtrlInit, osal_nv_read
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
// 1491   uint8 status;
// 1492 
// 1493 
// 1494   // Initialize control state
// 1495   ZDApp_LeaveCtrl = ZDAPP_LEAVE_CTRL_INIT;
        MOV     A,#0x0
        MOV     DPTR,#ZDApp_LeaveCtrl
        MOVX    @DPTR,A
// 1496 
// 1497   status = osal_nv_item_init( ZCD_NV_LEAVE_CTRL,
// 1498                               sizeof(ZDApp_LeaveCtrl),
// 1499                               &ZDApp_LeaveCtrl );
        ; Setup parameters for call to function osal_nv_item_init
        MOV     ?V0 + 0,#(ZDApp_LeaveCtrl & 0xff)
        MOV     ?V0 + 1,#((ZDApp_LeaveCtrl >> 8) & 0xff)
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 12)
        MOV     R4,#0x1
        MOV     R5,#0x0
        MOV     R2,#-0x7b
        MOV     R3,#0x0
        LCALL   ??osal_nv_item_init?relay
        MOV     A,#0x2
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 10)
        MOV     A,R1
// 1500 
// 1501   if ( status == ZSUCCESS )
        JNZ     ??ZDApp_LeaveCtrlInit_0
// 1502   {
// 1503     // Read saved control
// 1504     osal_nv_read( ZCD_NV_LEAVE_CTRL,
// 1505                   0,
// 1506                   sizeof( uint8 ),
// 1507                   &ZDApp_LeaveCtrl);
        ; Setup parameters for call to function osal_nv_read
        MOV     ?V0 + 0,#(ZDApp_LeaveCtrl & 0xff)
        MOV     ?V0 + 1,#((ZDApp_LeaveCtrl >> 8) & 0xff)
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 12)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 14)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#-0x7b
        MOV     R3,#0x0
        LCALL   ??osal_nv_read?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 10)
// 1508   }
// 1509 }
??ZDApp_LeaveCtrlInit_0:
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock17
// 1510 
// 1511 /*********************************************************************
// 1512  * @fn      ZDApp_LeaveCtrlSet
// 1513  *
// 1514  * @brief   Set the leave control logic.
// 1515  *
// 1516  * @param   ra - reassociate flag
// 1517  *
// 1518  * @return  none
// 1519  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1520 void ZDApp_LeaveCtrlSet( uint8 ra )
ZDApp_LeaveCtrlSet:
        CFI Block cfiBlock18 Using cfiCommon0
        CFI Function ZDApp_LeaveCtrlSet
// 1521 {
        FUNCALL ZDApp_LeaveCtrlSet, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
// 1522   ZDApp_LeaveCtrl = ZDAPP_LEAVE_CTRL_SET;
        MOV     A,#0x1
        MOV     DPTR,#ZDApp_LeaveCtrl
        MOVX    @DPTR,A
// 1523 
// 1524   if ( ra == TRUE )
        MOV     A,#0x1
        XRL     A,R6
        JNZ     ??ZDApp_LeaveCtrlSet_0
// 1525   {
// 1526     ZDApp_LeaveCtrl |= ZDAPP_LEAVE_CTRL_RA;
        MOV     DPTR,#ZDApp_LeaveCtrl
        MOVX    A,@DPTR
        SETB    0xE0 /* A   */.1
        MOVX    @DPTR,A
// 1527   }
// 1528 
// 1529   // Write the leave control
// 1530   osal_nv_write( ZCD_NV_LEAVE_CTRL,
// 1531                  0,
// 1532                  sizeof( uint8 ),
// 1533                  &ZDApp_LeaveCtrl);
??ZDApp_LeaveCtrlSet_0:
        ; Setup parameters for call to function osal_nv_write
        MOV     ?V0 + 0,#(ZDApp_LeaveCtrl & 0xff)
        MOV     ?V0 + 1,#((ZDApp_LeaveCtrl >> 8) & 0xff)
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 12)
        MOV     ?V0 + 0,#0x1
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 14)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#-0x7b
        MOV     R3,#0x0
        LCALL   ??osal_nv_write?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 10)
// 1534 }
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock18
// 1535 
// 1536 /*********************************************************************
// 1537  * @fn      ZDApp_LeaveCtrlBypass
// 1538  *
// 1539  * @brief   Check if NV restore should be skipped during a leave reset.
// 1540  *
// 1541  * @param   none
// 1542  *
// 1543  * @return  uint8 - (TRUE bypass:FALSE do not bypass)
// 1544  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1545 uint8 ZDApp_LeaveCtrlBypass( void )
ZDApp_LeaveCtrlBypass:
        CFI Block cfiBlock19 Using cfiCommon0
        CFI Function ZDApp_LeaveCtrlBypass
// 1546 {
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 1547   uint8 bypass;
// 1548 
// 1549   if ( ZDApp_LeaveCtrl & ZDAPP_LEAVE_CTRL_SET )
        MOV     DPTR,#ZDApp_LeaveCtrl
        MOVX    A,@DPTR
        MOV     C,0xE0 /* A   */.0
        JNC     ??ZDApp_LeaveCtrlBypass_0
// 1550   {
// 1551     bypass = TRUE;
        MOV     R1,#0x1
        SJMP    ??ZDApp_LeaveCtrlBypass_1
// 1552   }
// 1553   else
// 1554   {
// 1555     bypass = FALSE;
??ZDApp_LeaveCtrlBypass_0:
        MOV     R1,#0x0
// 1556   }
// 1557 
// 1558   return bypass;
??ZDApp_LeaveCtrlBypass_1:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock19
// 1559 }
// 1560 
// 1561 /*********************************************************************
// 1562  * @fn      ZDApp_LeaveCtrlStartup
// 1563  *
// 1564  * @brief   Check for startup conditions during a leave reset.
// 1565  *
// 1566  * @param   state      - devState_t determined by leave control logic
// 1567  * @param   startDelay - startup delay
// 1568  *
// 1569  * @return  none
// 1570  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1571 void ZDApp_LeaveCtrlStartup( devStates_t* state, uint16* startDelay )
ZDApp_LeaveCtrlStartup:
        CFI Block cfiBlock20 Using cfiCommon0
        CFI Function ZDApp_LeaveCtrlStartup
// 1572 {
        FUNCALL ZDApp_LeaveCtrlStartup, osal_nv_write
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,R4
        MOV     R6,A
        MOV     A,R5
        MOV     R7,A
// 1573   *startDelay = 0;
        MOV     DPL,R6
        MOV     DPH,R7
        MOV     A,#0x0
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x0
        MOVX    @DPTR,A
// 1574 
// 1575   if ( ZDApp_LeaveCtrl & ZDAPP_LEAVE_CTRL_SET )
        MOV     DPTR,#ZDApp_LeaveCtrl
        MOVX    A,@DPTR
        MOV     C,0xE0 /* A   */.0
        JNC     ??ZDApp_LeaveCtrlStartup_0
// 1576   {
// 1577     if ( ZDApp_LeaveCtrl & ZDAPP_LEAVE_CTRL_RA )
        MOV     DPTR,#ZDApp_LeaveCtrl
        MOVX    A,@DPTR
        MOV     C,0xE0 /* A   */.1
        JNC     ??ZDApp_LeaveCtrlStartup_1
// 1578     {
// 1579       *startDelay = 5000;
        MOV     DPL,R6
        MOV     DPH,R7
        MOV     A,#-0x78
        MOVX    @DPTR,A
        INC     DPTR
        MOV     A,#0x13
        MOVX    @DPTR,A
        SJMP    ??ZDApp_LeaveCtrlStartup_2
// 1580     }
// 1581     else
// 1582     {
// 1583       *state = DEV_HOLD;
??ZDApp_LeaveCtrlStartup_1:
        MOV     A,#0x0
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        MOVX    @DPTR,A
// 1584     }
// 1585 
// 1586     // Set leave control to initialized state
// 1587     ZDApp_LeaveCtrl = ZDAPP_LEAVE_CTRL_INIT;
??ZDApp_LeaveCtrlStartup_2:
        MOV     A,#0x0
        MOV     DPTR,#ZDApp_LeaveCtrl
        MOVX    @DPTR,A
// 1588 
// 1589     // Write initialized control
// 1590     osal_nv_write( ZCD_NV_LEAVE_CTRL,
// 1591                   0,
// 1592                   sizeof( uint8 ),
// 1593                   &ZDApp_LeaveCtrl);
        ; Setup parameters for call to function osal_nv_write
        MOV     ?V0 + 2,#(ZDApp_LeaveCtrl & 0xff)
        MOV     ?V0 + 3,#((ZDApp_LeaveCtrl >> 8) & 0xff)
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 14)
        MOV     ?V0 + 2,#0x1
        MOV     ?V0 + 3,#0x0
        MOV     R0,#?V0 + 2
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 16)
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R2,#-0x7b
        MOV     R3,#0x0
        LCALL   ??osal_nv_write?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 12)
// 1594   }
// 1595 }
??ZDApp_LeaveCtrlStartup_0:
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock20
// 1596 
// 1597 /*********************************************************************
// 1598  * @fn      ZDApp_LeaveReset
// 1599  *
// 1600  * @brief   Setup a device reset due to a leave indication/confirm.
// 1601  *
// 1602  * @param   ra - reassociate flag
// 1603  *
// 1604  * @return  none
// 1605  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1606 void ZDApp_LeaveReset( uint8 ra )
ZDApp_LeaveReset:
        CFI Block cfiBlock21 Using cfiCommon0
        CFI Function ZDApp_LeaveReset
// 1607 {
        FUNCALL ZDApp_LeaveReset, ZDApp_LeaveCtrlSet
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_LeaveReset, ZDApp_ResetTimerStart
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R1
// 1608   ZDApp_LeaveCtrlSet( ra );
        ; Setup parameters for call to function ZDApp_LeaveCtrlSet
        MOV     R1,A
        LCALL   ??ZDApp_LeaveCtrlSet?relay
// 1609 
// 1610   ZDApp_ResetTimerStart( 5000 );
        ; Setup parameters for call to function ZDApp_ResetTimerStart
        MOV     R2,#-0x78
        MOV     R3,#0x13
        LCALL   ??ZDApp_ResetTimerStart?relay
// 1611 }
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock21
// 1612 
// 1613 /*********************************************************************
// 1614  * @fn      ZDApp_LeaveUpdate
// 1615  *
// 1616  * @brief   Update local device data related to leaving device.
// 1617  *
// 1618  * @param   nwkAddr        - NWK address of leaving device
// 1619  * @param   extAddr        - EXT address of leaving device
// 1620  * @param   removeChildren - remove children of leaving device
// 1621  *
// 1622  * @return  none
// 1623  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1624 void ZDApp_LeaveUpdate( uint16 nwkAddr, uint8* extAddr,
ZDApp_LeaveUpdate:
        CFI Block cfiBlock22 Using cfiCommon0
        CFI Function ZDApp_LeaveUpdate
// 1625                         uint8 removeChildren )
// 1626 {
        FUNCALL ZDApp_LeaveUpdate, NLME_RemoveChild
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 11, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 11, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xb
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 11)
        ; Saved register size: 11
        ; Auto size: 0
        MOV     ?V0 + 0,R4
        MOV     ?V0 + 1,R5
        MOV     ?V0 + 2,R1
// 1627   /*
// 1628   AddrMgrEntry_t entry;
// 1629   */
// 1630 
// 1631 
// 1632   // Remove if child
// 1633   NLME_RemoveChild( extAddr, removeChildren );
        ; Setup parameters for call to function NLME_RemoveChild
        MOV     R1,?V0 + 2
        MOV     R2,?V0 + 0
        MOV     R3,?V0 + 1
        LCALL   ??NLME_RemoveChild?relay
// 1634 
// 1635   /*
// 1636   // Set NWK address to invalid
// 1637   entry.user    = ADDRMGR_USER_DEFAULT;
// 1638   entry.nwkAddr = INVALID_NODE_ADDR;
// 1639   AddrMgrExtAddrSet( entry.extAddr, extAddr );
// 1640   AddrMgrEntryUpdate( &entry );
// 1641 
// 1642   // Check
// 1643   if ( removeChildren == TRUE )
// 1644   {
// 1645     // Set index to INVALID_NODE_ADDR to start search
// 1646     entry.index = INVALID_NODE_ADDR;
// 1647 
// 1648     // Get first entry
// 1649     AddrMgrEntryGetNext( &entry );
// 1650 
// 1651     // Remove all descendents
// 1652     while ( entry.index != INVALID_NODE_ADDR )
// 1653     {
// 1654       // Check NWK address allocation algorithm
// 1655       if ( RTG_ANCESTOR( entry.nwkAddr, thisAddr ) != 0 )
// 1656       {
// 1657         // Set NWK address to invalid
// 1658         entry.nwkAddr = INVALID_NODE_ADDR;
// 1659         AddrMgrEntryUpdate( &entry );
// 1660       }
// 1661 
// 1662       // Get next entry
// 1663       AddrMgrEntryGetNext( &entry );
// 1664     }
// 1665   }
// 1666   */
// 1667 }
        MOV     R7,#0x3
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock22
// 1668 
// 1669 /*********************************************************************
// 1670  * CALLBACK FUNCTIONS
// 1671  */
// 1672 
// 1673 /*********************************************************************
// 1674  * @fn      ZDApp_SendEventMsg()
// 1675  *
// 1676  * @brief
// 1677  *
// 1678  *   Sends a Network Join message
// 1679  *
// 1680  * @param  cmd - command ID
// 1681  * @param  len - length (in bytes) of the buf field
// 1682  * @param  buf - buffer for the rest of the message.
// 1683  *
// 1684  * @return  none
// 1685  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1686 void ZDApp_SendEventMsg( byte cmd, byte len, byte *buf )
ZDApp_SendEventMsg:
        CFI Block cfiBlock23 Using cfiCommon0
        CFI Function ZDApp_SendEventMsg
// 1687 {
        FUNCALL ZDApp_SendEventMsg, ZDApp_SendMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
        MOV     ?V0 + 0,R1
        MOV     ?V0 + 1,R2
        MOV     A,R4
        MOV     R6,A
        MOV     A,R5
        MOV     R7,A
// 1688   ZDApp_SendMsg( ZDAppTaskID, cmd, len, buf );
        ; Setup parameters for call to function ZDApp_SendMsg
        MOV     A,R6
        MOV     R4,A
        MOV     A,R7
        MOV     R5,A
        MOV     R3,?V0 + 1
        MOV     R2,?V0 + 0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDApp_SendMsg?relay
// 1689 }
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock23
// 1690 
// 1691 /*********************************************************************
// 1692  * @fn      ZDApp_SendMsg()
// 1693  *
// 1694  * @brief   Sends a OSAL message
// 1695  *
// 1696  * @param  taskID - Where to send the message
// 1697  * @param  cmd - command ID
// 1698  * @param  len - length (in bytes) of the buf field
// 1699  * @param  buf - buffer for the rest of the message.
// 1700  *
// 1701  * @return  none
// 1702  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1703 void ZDApp_SendMsg( byte taskID, byte cmd, byte len, byte *buf )
ZDApp_SendMsg:
        CFI Block cfiBlock24 Using cfiCommon0
        CFI Function ZDApp_SendMsg
// 1704 {
        FUNCALL ZDApp_SendMsg, osal_msg_allocate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_SendMsg, osal_memcpy
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 19, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 19, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_SendMsg, osal_msg_send
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 16, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 16, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x10
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 16)
        ; Saved register size: 16
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
        MOV     ?V0 + 3,R2
        MOV     A,R3
        MOV     R7,A
        MOV     ?V0 + 6,R4
        MOV     ?V0 + 7,R5
// 1705   osal_event_hdr_t *msgPtr;
// 1706 
// 1707   // Send the address to the task
// 1708   msgPtr = (osal_event_hdr_t *)osal_msg_allocate( len );
        ; Setup parameters for call to function osal_msg_allocate
        MOV     A,R7
        MOV     ?V0 + 0,A
        MOV     R2,?V0 + 0
        MOV     R3,#0x0
        LCALL   ??osal_msg_allocate?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     ?V0 + 4,?V0 + 0
        MOV     ?V0 + 5,?V0 + 1
// 1709   if ( msgPtr )
        MOV     A,?V0 + 4
        XRL     A,#0x0
        JNZ     ??ZDApp_SendMsg_0
        MOV     A,?V0 + 5
        XRL     A,#0x0
??ZDApp_SendMsg_0:
        JZ      ??ZDApp_SendMsg_1
// 1710   {
// 1711     if ( (len > 0) && (buf != NULL) )
        MOV     A,R7
        CLR     C
        SUBB    A,#0x1
        JC      ??ZDApp_SendMsg_2
        MOV     A,?V0 + 6
        XRL     A,#0x0
        JNZ     ??ZDApp_SendMsg_3
        MOV     A,?V0 + 7
        XRL     A,#0x0
??ZDApp_SendMsg_3:
        JZ      ??ZDApp_SendMsg_2
// 1712       osal_memcpy( msgPtr, buf, len );
        ; Setup parameters for call to function osal_memcpy
        MOV     ?V0 + 0,?V0 + 6
        MOV     ?V0 + 1,?V0 + 7
        MOV     ?V0 + 2,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_THREE
        CFI CFA_XSP16 add(XSP16, 19)
        MOV     A,R7
        MOV     ?V0 + 0,A
        MOV     R4,?V0 + 0
        MOV     R5,#0x0
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        LCALL   ??osal_memcpy?relay
        MOV     A,#0x3
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 16)
// 1713 
// 1714     msgPtr->event = cmd;
??ZDApp_SendMsg_2:
        MOV     DPL,?V0 + 4
        MOV     DPH,?V0 + 5
        MOV     A,?V0 + 3
        MOVX    @DPTR,A
// 1715     osal_msg_send( taskID, (byte *)msgPtr );
        ; Setup parameters for call to function osal_msg_send
        MOV     R2,?V0 + 4
        MOV     R3,?V0 + 5
        MOV     A,R6
        MOV     R1,A
        LCALL   ??osal_msg_send?relay
// 1716   }
// 1717 }
??ZDApp_SendMsg_1:
        MOV     R7,#0x8
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock24
// 1718 
// 1719 /*********************************************************************
// 1720  * Call Back Functions from NWK  - API
// 1721  */
// 1722 
// 1723 /*********************************************************************
// 1724  * @fn          ZDO_NetworkDiscoveryConfirmCB
// 1725  *
// 1726  * @brief       This function returns a choice of PAN to join.
// 1727  *
// 1728  * @param       ResultCount - Number of routers discovered
// 1729  * @param               NetworkList - Pointer to list of network descriptors
// 1730  *
// 1731  * @return      ZStatus_t
// 1732  */
// 1733 #define STACK_PROFILE_MAX 2

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1734 ZStatus_t ZDO_NetworkDiscoveryConfirmCB( byte ResultCount,
ZDO_NetworkDiscoveryConfirmCB:
        CFI Block cfiBlock25 Using cfiCommon0
        CFI Function ZDO_NetworkDiscoveryConfirmCB
// 1735                                          networkDesc_t *NetworkList )
// 1736 {
        FUNCALL ZDO_NetworkDiscoveryConfirmCB, osal_cpyExtAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_NetworkDiscoveryConfirmCB, ZDApp_SendMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 30, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 30, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x10
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V7 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V6 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-15)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-16)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 16)
        ; Saved register size: 16
        ; Auto size: 14
        MOV     A,#-0xe
        LCALL   ?ALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 30)
        MOV     ?V0 + 4,R1
        MOV     ?V0 + 6,R2
        MOV     ?V0 + 7,R3
// 1737   networkDesc_t *pNwkDesc;
// 1738   ZDO_NetworkDiscoveryCfm_t msg;
// 1739   byte  i;
// 1740   uint8 stackProfile;
// 1741   uint8 stackProfilePro;
// 1742   uint8 selected;
// 1743 
// 1744 #if defined ( ZDO_MGMT_NWKDISC_RESPONSE )
// 1745   if ( zdappMgmtNwkDiscReqInProgress )
// 1746   {
// 1747     zdappMgmtNwkDiscReqInProgress = false;
// 1748     ZDO_FinishProcessingMgmtNwkDiscReq( ResultCount, NetworkList );
// 1749     return ( ZSuccess );
// 1750   }
// 1751 #endif
// 1752 
// 1753   // process discovery results
// 1754   stackProfilePro = FALSE;
        MOV     ?V0 + 2,#0x0
// 1755   selected = FALSE;
        MOV     ?V0 + 1,#0x0
// 1756 
// 1757   for ( stackProfile = 0; stackProfile < STACK_PROFILE_MAX; stackProfile++ )
        MOV     ?V0 + 3,#0x0
??ZDO_NetworkDiscoveryConfirmCB_0:
        MOV     A,?V0 + 3
        CLR     C
        SUBB    A,#0x2
        JC      $+5
        LJMP    ??ZDO_NetworkDiscoveryConfirmCB_1 & 0xFFFF
// 1758   {
// 1759     pNwkDesc = NetworkList;
        MOV     R6,?V0 + 6
        MOV     R7,?V0 + 7
// 1760     for ( i = 0; i < ResultCount; i++, pNwkDesc = pNwkDesc->nextDesc )
        MOV     ?V0 + 0,#0x0
??ZDO_NetworkDiscoveryConfirmCB_2:
        MOV     A,?V0 + 0
        CLR     C
        SUBB    A,?V0 + 4
        JC      $+5
        LJMP    ??ZDO_NetworkDiscoveryConfirmCB_3 & 0xFFFF
// 1761     {
// 1762       if ( zgConfigPANID != 0xFFFF )
        MOV     DPTR,#zgConfigPANID
        MOVX    A,@DPTR
        XRL     A,#0xff
        JNZ     ??ZDO_NetworkDiscoveryConfirmCB_4
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0xff
??ZDO_NetworkDiscoveryConfirmCB_4:
        JZ      ??ZDO_NetworkDiscoveryConfirmCB_5
// 1763       {
// 1764         // PAN Id is preconfigured. check if it matches
// 1765         // only 14 bits of pan id is used
// 1766         if ( pNwkDesc->panId != ( zgConfigPANID & 0x3FFF ) )
        MOV     DPL,R6
        MOV     DPH,R7
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        MOV     DPTR,#zgConfigPANID
        MOVX    A,@DPTR
        ANL     A,#0xff
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ANL     A,#0x3f
        MOV     R1,A
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOVX    A,@DPTR
        XRL     A,R0
        JNZ     ??ZDO_NetworkDiscoveryConfirmCB_6
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,R1
??ZDO_NetworkDiscoveryConfirmCB_6:
        JNZ     ??ZDO_NetworkDiscoveryConfirmCB_7
// 1767           continue;
// 1768       }
// 1769 
// 1770       // check that network is allowing joining
// 1771       //------------------------------------------------------------
// 1772       #if defined( RTR_NWK )
// 1773       //------------------------------------------------------------
// 1774       if ( stackProfilePro == FALSE )
// 1775       {
// 1776         if ( !pNwkDesc->routerCapacity )
// 1777         {
// 1778           continue;
// 1779         }
// 1780       }
// 1781       else
// 1782       {
// 1783         if ( !pNwkDesc->deviceCapacity )
// 1784         {
// 1785           continue;
// 1786         }
// 1787       }
// 1788       //------------------------------------------------------------
// 1789       #else
// 1790       //------------------------------------------------------------
// 1791       if ( !pNwkDesc->deviceCapacity )
??ZDO_NetworkDiscoveryConfirmCB_5:
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        JZ      ??ZDO_NetworkDiscoveryConfirmCB_7
// 1792       {
// 1793         continue;
// 1794       }
// 1795       //------------------------------------------------------------
// 1796       #endif
// 1797       //------------------------------------------------------------
// 1798       // check version of zigbee protocol
// 1799       if ( pNwkDesc->version != _NIB.nwkProtocolVersion )
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     DPTR,#(_NIB + 17)
        MOVX    A,@DPTR
        XRL     A,R2
        JNZ     ??ZDO_NetworkDiscoveryConfirmCB_7
// 1800         continue;
// 1801 
// 1802       // check version of stack profile
// 1803       if ( pNwkDesc->stackProfile != zgStackProfile  )
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     DPTR,#zgStackProfile
        MOVX    A,@DPTR
        XRL     A,R2
        JZ      ??ZDO_NetworkDiscoveryConfirmCB_3
// 1804       {
// 1805         if ( pNwkDesc->stackProfile == ZIGBEEPRO_PROFILE )
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x2
        JNZ     ??ZDO_NetworkDiscoveryConfirmCB_8
// 1806           stackProfilePro = TRUE;
        MOV     ?V0 + 2,#0x1
// 1807         
// 1808         if ( stackProfile == 0 )
??ZDO_NetworkDiscoveryConfirmCB_8:
        MOV     A,?V0 + 3
        JNZ     ??ZDO_NetworkDiscoveryConfirmCB_3
// 1809         {
// 1810           continue;
// 1811         }
// 1812       }
// 1813 
// 1814       // check if beacon order is the right value..
// 1815       //  if ( pNwkDesc->beaconOrder < ZDO_CONFIG_MAX_BO )
// 1816       //    continue;
// 1817 
// 1818       // choose this pan for joining
// 1819       break;
// 1820     } 
??ZDO_NetworkDiscoveryConfirmCB_7:
        INC     ?V0 + 0
        MOV     A,R6
        ADD     A,#0x15
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R6,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R7,A
        LJMP    ??ZDO_NetworkDiscoveryConfirmCB_2 & 0xFFFF
// 1821     
// 1822     if (i < ResultCount)
??ZDO_NetworkDiscoveryConfirmCB_3:
        MOV     A,?V0 + 0
        CLR     C
        SUBB    A,?V0 + 4
        JC      ??ZDO_NetworkDiscoveryConfirmCB_1
// 1823     {
// 1824      selected = TRUE;
// 1825       break;
// 1826     }
// 1827    
// 1828     // break if selected or stack profile pro wasn't found
// 1829     if ( (selected == TRUE) || (stackProfilePro == FALSE) )
        MOV     A,#0x1
        XRL     A,?V0 + 1
        JZ      ??ZDO_NetworkDiscoveryConfirmCB_1
        MOV     A,?V0 + 2
        JZ      ??ZDO_NetworkDiscoveryConfirmCB_1
// 1830     {
// 1831       break;
// 1832     }
// 1833   }
        INC     ?V0 + 3
        LJMP    ??ZDO_NetworkDiscoveryConfirmCB_0 & 0xFFFF
// 1834 
// 1835   if ( i == ResultCount )
??ZDO_NetworkDiscoveryConfirmCB_1:
        MOV     A,?V0 + 4
        XRL     A,?V0 + 0
        JNZ     ??ZDO_NetworkDiscoveryConfirmCB_9
// 1836   {
// 1837     msg.hdr.status = ZDO_FAIL;   // couldn't find appropriate PAN to join !
        MOV     A,#0x1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
        SJMP    ??ZDO_NetworkDiscoveryConfirmCB_10
// 1838   }
// 1839   else
// 1840   {
// 1841     msg.hdr.status = ZDO_SUCCESS;
??ZDO_NetworkDiscoveryConfirmCB_9:
        MOV     A,#0x0
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x1
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1842     msg.panIdLSB = LO_UINT16( pNwkDesc->panId );
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x2
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1843     msg.panIdMSB = HI_UINT16( pNwkDesc->panId );
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R1
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x3
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1844     msg.logicalChannel = pNwkDesc->logicalChannel;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x4
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1845     msg.version = pNwkDesc->version;
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        PUSH    A
        CFI CFA_SP SP+-1
        MOV     A,#0x5
        LCALL   ?XSTACK_DISP0_8
        POP     A
        CFI CFA_SP SP+0
        MOVX    @DPTR,A
// 1846     osal_cpyExtAddr( msg.extendedPANID, pNwkDesc->extendedPANID );
        ; Setup parameters for call to function osal_cpyExtAddr
        MOV     A,R6
        ADD     A,#0xd
        MOV     R4,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     R5,A
        MOV     A,#0x6
        LCALL   ?XSTACK_DISP0_8
        MOV     R2,DPL
        MOV     R3,DPH
        LCALL   ??osal_cpyExtAddr?relay
// 1847   }
// 1848 
// 1849   ZDApp_SendMsg( ZDAppTaskID, ZDO_NWK_DISC_CNF, sizeof(ZDO_NetworkDiscoveryCfm_t), (byte *)&msg );
??ZDO_NetworkDiscoveryConfirmCB_10:
        ; Setup parameters for call to function ZDApp_SendMsg
        MOV     DPL,?XSP + 0
        MOV     DPH,?XSP + 1
        MOV     R4,DPL
        MOV     R5,DPH
        MOV     R3,#0xe
        MOV     R2,#0x1
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDApp_SendMsg?relay
// 1850 
// 1851   return (ZSuccess);
        MOV     R1,#0x0
        MOV     A,#0xe
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 16)
        MOV     R7,#0x8
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock25
// 1852 }  // ZDO_NetworkDiscoveryConfirmCB
// 1853 
// 1854 /*********************************************************************
// 1855  * @fn          ZDO_NetworkFormationConfirmCB
// 1856  *
// 1857  * @brief       This function reports the results of the request to
// 1858  *              initialize a coordinator in a network.
// 1859  *
// 1860  * @param       Status - Result of NLME_NetworkFormationRequest()
// 1861  *
// 1862  * @return      none
// 1863  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1864 void ZDO_NetworkFormationConfirmCB( ZStatus_t Status )
ZDO_NetworkFormationConfirmCB:
        CFI Block cfiBlock26 Using cfiCommon0
        CFI Function ZDO_NetworkFormationConfirmCB
// 1865 {
        ; Saved register size: 0
        ; Auto size: 0
// 1866 #if defined(ZDO_COORDINATOR)
// 1867   nwkStatus = (byte)Status;
// 1868 
// 1869   if ( Status == ZSUCCESS )
// 1870   {
// 1871     // LED on shows Coordinator started
// 1872     HalLedSet ( HAL_LED_3, HAL_LED_MODE_ON );
// 1873 
// 1874     // LED off forgets HOLD_AUTO_START
// 1875     HalLedSet (HAL_LED_4, HAL_LED_MODE_OFF);
// 1876 
// 1877 #if defined ( ZBIT )
// 1878     SIM_SetColor(0xd0ffd0);
// 1879 #endif
// 1880 
// 1881     if ( devState == DEV_HOLD )
// 1882     {
// 1883       // Began with HOLD_AUTO_START
// 1884       devState = DEV_COORD_STARTING;
// 1885     }
// 1886   }
// 1887 #if defined(BLINK_LEDS)
// 1888   else
// 1889     HalLedSet ( HAL_LED_3, HAL_LED_MODE_FLASH );  // Flash LED to show failure
// 1890 #endif
// 1891 
// 1892   osal_set_event( ZDAppTaskID, ZDO_NETWORK_START );
// 1893 #endif  //ZDO_COORDINATOR
// 1894 }
        LJMP    ?BRET
        CFI EndBlock cfiBlock26
// 1895 
// 1896 #if defined(RTR_NWK)
// 1897 /*********************************************************************
// 1898  * @fn          ZDO_StartRouterConfirmCB
// 1899  *
// 1900  * @brief       This function reports the results of the request to
// 1901  *              start functioning as a router in a network.
// 1902  *
// 1903  * @param       Status - Result of NLME_StartRouterRequest()
// 1904  *
// 1905  * @return      none
// 1906  */
// 1907 void ZDO_StartRouterConfirmCB( ZStatus_t Status )
// 1908 {
// 1909   nwkStatus = (byte)Status;
// 1910 
// 1911   if ( Status == ZSUCCESS )
// 1912   {
// 1913     // LED on shows Router started
// 1914     HalLedSet ( HAL_LED_3, HAL_LED_MODE_ON );
// 1915     // LED off forgets HOLD_AUTO_START
// 1916     HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF);
// 1917     if ( devState == DEV_HOLD )
// 1918     {
// 1919       // Began with HOLD_AUTO_START
// 1920       devState = DEV_END_DEVICE;
// 1921     }
// 1922   }
// 1923 #if defined(BLINK_LEDS)
// 1924   else
// 1925     HalLedSet( HAL_LED_3, HAL_LED_MODE_FLASH );  // Flash LED to show failure
// 1926 #endif
// 1927 
// 1928   osal_set_event( ZDAppTaskID, ZDO_ROUTER_START );
// 1929 }
// 1930 #endif  //RTR_NWK
// 1931 
// 1932 /*********************************************************************
// 1933  * @fn          ZDO_JoinConfirmCB
// 1934  *
// 1935  * @brief       This function allows the next hight layer to be notified
// 1936  *              of the results of its request to join itself or another
// 1937  *              device to a network.
// 1938  *
// 1939  * @param       Status - Result of NLME_JoinRequest()
// 1940  *
// 1941  * @return      none
// 1942  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 1943 void ZDO_JoinConfirmCB( uint16 PanId, ZStatus_t Status )
ZDO_JoinConfirmCB:
        CFI Block cfiBlock27 Using cfiCommon0
        CFI Function ZDO_JoinConfirmCB
// 1944 {
        FUNCALL ZDO_JoinConfirmCB, HalLedSet
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_JoinConfirmCB, HalLedSet
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_JoinConfirmCB, ZDApp_NVUpdate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_JoinConfirmCB, HalLedSet
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_JoinConfirmCB, ZDApp_SendMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     ?V0 + 0,R1
// 1945   nwkStatus = (byte)Status;
        MOV     A,?V0 + 0
        MOV     DPTR,#nwkStatus
        MOVX    @DPTR,A
// 1946 
// 1947   if ( Status == ZSUCCESS )
        MOV     A,?V0 + 0
        JNZ     ??ZDO_JoinConfirmCB_0
// 1948   {
// 1949     // LED on shows device joined
// 1950     HalLedSet ( HAL_LED_3, HAL_LED_MODE_ON );
        ; Setup parameters for call to function HalLedSet
        MOV     R2,#0x1
        MOV     R1,#0x4
        LCALL   ??HalLedSet?relay
// 1951     // LED off forgets HOLD_AUTO_START
// 1952     HalLedSet ( HAL_LED_4, HAL_LED_MODE_OFF);
        ; Setup parameters for call to function HalLedSet
        MOV     R2,#0x0
        MOV     R1,#0x8
        LCALL   ??HalLedSet?relay
// 1953     if ( (devState == DEV_HOLD) )
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        JNZ     ??ZDO_JoinConfirmCB_1
// 1954     {
// 1955       // Began with HOLD_AUTO_START
// 1956       devState = DEV_NWK_JOINING;
        MOV     A,#0x3
        MOV     DPTR,#devState
        MOVX    @DPTR,A
// 1957     }
// 1958 #if !  ( SECURE != 0  )
// 1959     // Notify to save info into NV
// 1960     ZDApp_NVUpdate();
??ZDO_JoinConfirmCB_1:
        ; Setup parameters for call to function ZDApp_NVUpdate
        LCALL   ??ZDApp_NVUpdate?relay
        SJMP    ??ZDO_JoinConfirmCB_2
// 1961 #endif
// 1962   }
// 1963 #if defined(BLINK_LEDS)
// 1964   else
// 1965     HalLedSet ( HAL_LED_3, HAL_LED_MODE_FLASH );  // Flash LED to show failure
??ZDO_JoinConfirmCB_0:
        ; Setup parameters for call to function HalLedSet
        MOV     R2,#0x4
        MOV     R1,#0x4
        LCALL   ??HalLedSet?relay
// 1966 #endif
// 1967 
// 1968   // Notify ZDApp
// 1969   ZDApp_SendMsg( ZDAppTaskID, ZDO_NWK_JOIN_IND, sizeof(osal_event_hdr_t), (byte*)NULL );
??ZDO_JoinConfirmCB_2:
        ; Setup parameters for call to function ZDApp_SendMsg
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R3,#0x2
        MOV     R2,#0x2
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDApp_SendMsg?relay
// 1970 }
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock27
// 1971 
// 1972 /*********************************************************************
// 1973  * @fn          ZDO_JoinIndicationCB
// 1974  *
// 1975  * @brief       This function allows the next higher layer of a
// 1976  *              coordinator to be notified of a remote join request.
// 1977  *
// 1978  * @param       ShortAddress - 16-bit address
// 1979  * @param       ExtendedAddress - IEEE (64-bit) address
// 1980  * @param       CapabilityInformation - Association Capability Information
// 1981  *
// 1982  * @return      ZStatus_t
// 1983  */
// 1984 #if defined(RTR_NWK)
// 1985 ZStatus_t ZDO_JoinIndicationCB( uint16 ShortAddress, byte *ExtendedAddress,
// 1986                                          byte CapabilityInformation )
// 1987 {
// 1988 #if defined (AUTO_SOFT_START)
// 1989     ZDX_PostCoordinatorIEEE(ShortAddress);
// 1990 #endif
// 1991 
// 1992   // Notify to save info into NV
// 1993   ZDApp_NVUpdate();
// 1994 
// 1995 #if   ( SECURE != 0  )
// 1996   // send notification to TC of new device..
// 1997   if ( _NIB.SecurityLevel )
// 1998     osal_start_timerEx( ZDAppTaskID, ZDO_NEW_DEVICE, 600 );
// 1999 #endif  // SECURE
// 2000 
// 2001   return ( ZSuccess );
// 2002 }
// 2003 #endif  //RTR_NWK
// 2004 
// 2005 /*********************************************************************
// 2006  * @fn          ZDO_LeaveCnf
// 2007  *
// 2008  * @brief       This function allows the next higher layer to be
// 2009  *              notified of the results of its request for this or
// 2010  *              a child device to leave the network.
// 2011  *
// 2012  * @param       cnf - NLME_LeaveCnf_t
// 2013  *
// 2014  * @return      none
// 2015  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2016 void ZDO_LeaveCnf( NLME_LeaveCnf_t* cnf )
ZDO_LeaveCnf:
        CFI Block cfiBlock28 Using cfiCommon0
        CFI Function ZDO_LeaveCnf
// 2017 {
        FUNCALL ZDO_LeaveCnf, NLME_GetExtAddr
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_LeaveCnf, osal_ExtAddrEqual
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_LeaveCnf, ZDApp_LeaveReset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
// 2018   // Check for this device
// 2019   if ( osal_ExtAddrEqual( cnf->extAddr,
// 2020                           NLME_GetExtAddr() ) == TRUE )
        ; Setup parameters for call to function osal_ExtAddrEqual
        ; Setup parameters for call to function NLME_GetExtAddr
        LCALL   ??NLME_GetExtAddr?relay
        MOV     A,R2
        MOV     R4,A
        MOV     A,R3
        MOV     R5,A
        MOV     A,R6
        ADD     A,#0x2
        MOV     R2,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     R3,A
        LCALL   ??osal_ExtAddrEqual?relay
        MOV     A,R1
        XRL     A,#0x1
        JNZ     ??ZDO_LeaveCnf_0
// 2021   {
// 2022     // Prepare to leave with reset
// 2023     ZDApp_LeaveReset( cnf->rejoin );
        ; Setup parameters for call to function ZDApp_LeaveReset
        MOV     A,R6
        ADD     A,#0xb
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDApp_LeaveReset?relay
// 2024   }
// 2025   //------------------------------------------------------------------
// 2026   #if defined( RTR_NWK )
// 2027   //------------------------------------------------------------------
// 2028   else
// 2029   {
// 2030     // Remove device address(optionally descendents) from data
// 2031     ZDApp_LeaveUpdate( cnf->dstAddr,
// 2032                        cnf->extAddr,
// 2033                        cnf->removeChildren );
// 2034   }
// 2035   //------------------------------------------------------------------
// 2036   #endif
// 2037   //------------------------------------------------------------------
// 2038 }
??ZDO_LeaveCnf_0:
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock28
// 2039 
// 2040 /*********************************************************************
// 2041  * @fn          ZDO_LeaveInd
// 2042  *
// 2043  * @brief       This function allows the next higher layer of a
// 2044  *              device to be notified of a remote leave request or
// 2045  *              indication.
// 2046  *
// 2047  * @param       ind - NLME_LeaveInd_t
// 2048  *
// 2049  * @return      none
// 2050  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2051 void ZDO_LeaveInd( NLME_LeaveInd_t* ind )
ZDO_LeaveInd:
        CFI Block cfiBlock29 Using cfiCommon0
        CFI Function ZDO_LeaveInd
// 2052 {
        FUNCALL ZDO_LeaveInd, ZDApp_LeaveReset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_LeaveInd, NLME_GetCoordShortAddr
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_LeaveInd, ZDApp_LeaveReset
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDO_LeaveInd, ZDApp_LeaveUpdate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 12, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 12, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xc
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 12)
        ; Saved register size: 12
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
// 2053   uint8 leave;
// 2054 
// 2055 
// 2056   // Parent is requesting the leave - NWK layer filters out illegal
// 2057   // requests
// 2058   if ( ind->request == TRUE )
        MOV     DPL,R6
        MOV     DPH,R7
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x1
        JNZ     ??ZDO_LeaveInd_0
// 2059   {
// 2060     // Notify network of leave
// 2061     //----------------------------------------------------------------
// 2062     #if defined( RTR_NWK )
// 2063     //----------------------------------------------------------------
// 2064     NLME_LeaveRsp_t rsp;
// 2065     rsp.rejoin         = ind->rejoin;
// 2066     rsp.removeChildren = ind->removeChildren;
// 2067     NLME_LeaveRsp( &rsp );
// 2068     //----------------------------------------------------------------
// 2069     #endif
// 2070     //----------------------------------------------------------------
// 2071 
// 2072     // Prepare to leave with reset
// 2073     ZDApp_LeaveReset( ind->rejoin );
        ; Setup parameters for call to function ZDApp_LeaveReset
        MOV     A,R6
        ADD     A,#0xc
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDApp_LeaveReset?relay
        SJMP    ??ZDO_LeaveInd_1
// 2074   }
// 2075   else
// 2076   {
// 2077     leave = FALSE;
??ZDO_LeaveInd_0:
        MOV     ?V0 + 0,#0x0
// 2078 
// 2079     // Check if this device needs to leave as a child or descendent
// 2080     if ( ind->srcAddr == NLME_GetCoordShortAddr() )
        MOV     DPL,R6
        MOV     DPH,R7
        PUSH    DPL
        CFI CFA_SP SP+-1
        PUSH    DPH
        CFI CFA_SP SP+-2
        ; Setup parameters for call to function NLME_GetCoordShortAddr
        LCALL   ??NLME_GetCoordShortAddr?relay
        MOV     ?V0 + 2,R2
        MOV     ?V0 + 3,R3
        POP     DPH
        CFI CFA_SP SP+-1
        POP     DPL
        CFI CFA_SP SP+0
        MOVX    A,@DPTR
        XRL     A,?V0 + 2
        JNZ     ??ZDO_LeaveInd_2
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,?V0 + 3
??ZDO_LeaveInd_2:
        JNZ     ??ZDO_LeaveInd_3
// 2081     {
// 2082       if ( ( ind->removeChildren == TRUE               ) ||
// 2083            ( ZDO_Config_Node_Descriptor.LogicalType ==
// 2084              NODETYPE_DEVICE                           )    )
        MOV     A,R6
        ADD     A,#0xb
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        XRL     A,#0x1
        JZ      ??ZDO_LeaveInd_4
        MOV     DPTR,#ZDO_Config_Node_Descriptor
        MOVX    A,@DPTR
        ANL     A,#0x7
        XRL     A,#0x2
        JNZ     ??ZDO_LeaveInd_3
// 2085       {
// 2086         leave = TRUE;
??ZDO_LeaveInd_4:
        MOV     ?V0 + 0,#0x1
// 2087       }
// 2088     }
// 2089     else if ( ind->removeChildren == TRUE )
// 2090     {
// 2091       // Check NWK address allocation algorithm
// 2092       //leave = RTG_ANCESTOR(nwkAddr,thisAddr);
// 2093     }
// 2094 
// 2095     if ( leave == TRUE )
??ZDO_LeaveInd_3:
        MOV     A,#0x1
        XRL     A,?V0 + 0
        JNZ     ??ZDO_LeaveInd_5
// 2096     {
// 2097       // Prepare to leave with reset
// 2098       ZDApp_LeaveReset( ind->rejoin );
        ; Setup parameters for call to function ZDApp_LeaveReset
        MOV     A,R6
        ADD     A,#0xc
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDApp_LeaveReset?relay
        SJMP    ??ZDO_LeaveInd_1
// 2099     }
// 2100     else
// 2101     {
// 2102       // Remove device address(optionally descendents) from data
// 2103       ZDApp_LeaveUpdate( ind->srcAddr,
// 2104                          ind->extAddr,
// 2105                          ind->removeChildren );
??ZDO_LeaveInd_5:
        ; Setup parameters for call to function ZDApp_LeaveUpdate
        MOV     A,R6
        ADD     A,#0xb
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R6
        ADD     A,#0x2
        MOV     R4,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     R5,A
        MOV     DPL,R6
        MOV     DPH,R7
        MOVX    A,@DPTR
        MOV     R2,A
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R3,A
        LCALL   ??ZDApp_LeaveUpdate?relay
// 2106     }
// 2107   }
// 2108 }
??ZDO_LeaveInd_1:
        MOV     R7,#0x4
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock29
// 2109 
// 2110 /*********************************************************************
// 2111  * @fn          ZDO_SyncIndicationCB
// 2112  *
// 2113  * @brief       This function allows the next higher layer of a
// 2114  *              coordinator to be notified of a loss of synchronization
// 2115  *                          with the parent/child device.
// 2116  *
// 2117  * @param       type: 0 - child; 1 - parent
// 2118  *
// 2119  *
// 2120  * @return      none
// 2121  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2122 void ZDO_SyncIndicationCB( byte type, uint16 shortAddr )
ZDO_SyncIndicationCB:
        CFI Block cfiBlock30 Using cfiCommon0
        CFI Function ZDO_SyncIndicationCB
// 2123 {
        FUNCALL ZDO_SyncIndicationCB, ZDApp_SendMsg
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     ?V0 + 0,R1
// 2124 
// 2125 #if !defined ( RTR_NWK )
// 2126     if ( type == 1 )
        MOV     A,#0x1
        XRL     A,?V0 + 0
        JNZ     ??ZDO_SyncIndicationCB_0
// 2127     {
// 2128       ZDApp_SendMsg( ZDAppTaskID, ZDO_NWK_JOIN_REQ, sizeof(osal_event_hdr_t), NULL );
        ; Setup parameters for call to function ZDApp_SendMsg
        MOV     R4,#0x0
        MOV     R5,#0x0
        MOV     R3,#0x2
        MOV     R2,#0x3
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDApp_SendMsg?relay
// 2129     }
// 2130 #endif
// 2131   return;
??ZDO_SyncIndicationCB_0:
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock30
// 2132 }
// 2133 
// 2134 /*********************************************************************
// 2135  * @fn          ZDO_PollConfirmCB
// 2136  *
// 2137  * @brief       This function allows the next higher layer to be
// 2138  *              notified of a Poll Confirm.
// 2139  *
// 2140  * @param       none
// 2141  *
// 2142  * @return      none
// 2143  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2144 void ZDO_PollConfirmCB( byte status )
ZDO_PollConfirmCB:
        CFI Block cfiBlock31 Using cfiCommon0
        CFI Function ZDO_PollConfirmCB
// 2145 {
        ; Saved register size: 0
        ; Auto size: 0
// 2146   return;
        LJMP    ?BRET
        CFI EndBlock cfiBlock31
// 2147 }
// 2148 
// 2149 /******************************************************************************
// 2150  * @fn          ZDApp_NwkWriteNVRequest (stubs AddrMgrWriteNVRequest)
// 2151  *
// 2152  * @brief       Stub routine implemented by NHLE. NHLE should call
// 2153  *              <AddrMgrWriteNV> when appropriate.
// 2154  *
// 2155  * @param       none
// 2156  *
// 2157  * @return      none
// 2158  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2159 void ZDApp_NwkWriteNVRequest( void )
AddrMgrWriteNVRequest:
        CFI Block cfiBlock32 Using cfiCommon0
        CFI Function AddrMgrWriteNVRequest
// 2160 {
        FUNCALL AddrMgrWriteNVRequest, osal_get_timeoutEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL AddrMgrWriteNVRequest, ZDApp_NVUpdate
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 10, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 10, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
// 2161   if ( !osal_get_timeoutEx( ZDAppTaskID, ZDO_NWK_UPDATE_NV ) )
        ; Setup parameters for call to function osal_get_timeoutEx
        MOV     R2,#0x0
        MOV     R3,#0x2
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_get_timeoutEx?relay
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
        MOV     A,#0x0
        XRL     A,?V0 + 0
        JNZ     ??AddrMgrWriteNVRequest_0
        MOV     A,#0x0
        XRL     A,?V0 + 1
??AddrMgrWriteNVRequest_0:
        JNZ     ??AddrMgrWriteNVRequest_1
// 2162   {
// 2163     // Trigger to save info into NV
// 2164     ZDApp_NVUpdate();
        ; Setup parameters for call to function ZDApp_NVUpdate
        LCALL   ??ZDApp_NVUpdate?relay
// 2165   }
// 2166 }
??AddrMgrWriteNVRequest_1:
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock32
// 2167 
// 2168 /*********************************************************************
// 2169  * Call Back Functions from Security  - API
// 2170  */
// 2171 
// 2172 #if defined( ZDO_COORDINATOR )
// 2173  /*********************************************************************
// 2174  * @fn          ZDO_UpdateDeviceIndication
// 2175  *
// 2176  * @brief       This function notifies the "Trust Center" of a
// 2177  *              network when a device joins or leaves the network.
// 2178  *
// 2179  * @param       extAddr - pointer to 64 bit address of new device
// 2180  * @param       status  - 0 if a new device joined securely
// 2181  *                      - 1 if a new device joined un-securely
// 2182  *                      - 2 if a device left the network
// 2183  *
// 2184  * @return      true if newly joined device should be allowed to
// 2185  *                                              remain on network
// 2186  */
// 2187 ZStatus_t ZDO_UpdateDeviceIndication( byte *extAddr, byte status )
// 2188 {
// 2189 
// 2190 #if   ( SECURE != 0  )
// 2191   // can implement a network access policy based on the
// 2192   // IEEE address of newly joining devices...
// 2193 #endif  // Trust Center
// 2194 
// 2195   return ZSuccess;
// 2196 }
// 2197 #endif // ZDO
// 2198 
// 2199 /*********************************************************************
// 2200  * @fn          ZDApp_InMsgCB
// 2201  *
// 2202  * @brief       This function is called to pass up any message that is
// 2203  *              not yet supported.  This allows for the developer to
// 2204  *              support features themselves..
// 2205  *
// 2206  * @return      none
// 2207  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2208 void ZDApp_InMsgCB( zdoIncomingMsg_t *inMsg )
ZDApp_InMsgCB:
        CFI Block cfiBlock33 Using cfiCommon0
        CFI Function ZDApp_InMsgCB
// 2209 {
        FUNCALL ZDApp_InMsgCB, ZDP_GenericRsp
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xa
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 10)
        ; Saved register size: 10
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
// 2210   if ( inMsg->clusterID & ZDO_RESPONSE_BIT )
        MOV     A,R6
        ADD     A,#0xc
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        ANL     A,#0x0
        MOV     R0,A
        INC     DPTR
        MOVX    A,@DPTR
        ANL     A,#0x80
        MOV     R1,A
        MOV     A,#0x0
        XRL     A,R0
        JNZ     ??ZDApp_InMsgCB_0
        MOV     A,#0x0
        XRL     A,R1
??ZDApp_InMsgCB_0:
        JNZ     ??ZDApp_InMsgCB_1
// 2211   {
// 2212     // Handle the response message
// 2213   }
// 2214   else
// 2215   {
// 2216     // Handle the request message by sending a generic "not supported".
// 2217     // End Device Announce doesn't have a response.
// 2218     if ( !(inMsg->wasBroadcast) && inMsg->clusterID != End_Device_annce )
        MOV     A,R6
        ADD     A,#0xb
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        JNZ     ??ZDApp_InMsgCB_1
        MOV     A,R6
        ADD     A,#0xc
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        XRL     A,#0x13
        JNZ     ??ZDApp_InMsgCB_2
        INC     DPTR
        MOVX    A,@DPTR
        XRL     A,#0x0
??ZDApp_InMsgCB_2:
        JZ      ??ZDApp_InMsgCB_1
// 2219     {
// 2220       ZDP_GenericRsp( inMsg->TransSeq, &(inMsg->srcAddr), ZDP_NOT_SUPPORTED, 0,
// 2221                       (uint16)(inMsg->clusterID | ZDO_RESPONSE_BIT), inMsg->SecurityUse );
        ; Setup parameters for call to function ZDP_GenericRsp
        MOV     A,R6
        ADD     A,#0xc
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        ORL     A,#0x0
        MOV     ?V0 + 0,A
        INC     DPTR
        MOVX    A,@DPTR
        ORL     A,#0x80
        MOV     ?V0 + 1,A
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 12)
        MOV     ?V0 + 0,#0x0
        MOV     ?V0 + 1,#0x0
        MOV     R0,#?V0 + 0
        LCALL   ?PUSH_XSTACK_I_TWO
        CFI CFA_XSP16 add(XSP16, 14)
        MOV     A,R6
        ADD     A,#0xe
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R5,A
        MOV     R4,#-0x7c
        MOV     A,R6
        ADD     A,#0x2
        MOV     R2,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     R3,A
        MOV     A,R6
        ADD     A,#0xf
        MOV     DPL,A
        MOV     A,R7
        ADDC    A,#0x0
        MOV     DPH,A
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??ZDP_GenericRsp?relay
        MOV     A,#0x4
        LCALL   ?DEALLOC_XSTACK8
        CFI CFA_XSP16 add(XSP16, 10)
// 2222     }
// 2223   }
// 2224 }
??ZDApp_InMsgCB_1:
        MOV     R7,#0x2
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock33
// 2225 
// 2226 /*********************************************************************
// 2227  * @fn      ZDApp_ChangeMatchDescRespPermission()
// 2228  *
// 2229  * @brief   Changes the Match Descriptor Response permission.
// 2230  *
// 2231  * @param   endpoint - endpoint to allow responses
// 2232  * @param   action - true to allow responses, false to not
// 2233  *
// 2234  * @return  none
// 2235  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2236 void ZDApp_ChangeMatchDescRespPermission( uint8 endpoint, uint8 action )
ZDApp_ChangeMatchDescRespPermission:
        CFI Block cfiBlock34 Using cfiCommon0
        CFI Function ZDApp_ChangeMatchDescRespPermission
// 2237 {
        FUNCALL ZDApp_ChangeMatchDescRespPermission, afSetMatch
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R1
        MOV     R6,A
        MOV     A,R2
// 2238   // Store the action
// 2239   afSetMatch( endpoint, action );
        ; Setup parameters for call to function afSetMatch
        MOV     R2,A
        MOV     A,R6
        MOV     R1,A
        LCALL   ??afSetMatch?relay
// 2240 }
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock34
// 2241 
// 2242 /*********************************************************************
// 2243  * @fn      ZDApp_NetworkInit()
// 2244  *
// 2245  * @brief   Used to start the network joining process
// 2246  *
// 2247  * @param   delay - mSec delay to wait before starting
// 2248  *
// 2249  * @return  none
// 2250  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2251 void ZDApp_NetworkInit( uint16 delay )
ZDApp_NetworkInit:
        CFI Block cfiBlock35 Using cfiCommon0
        CFI Function ZDApp_NetworkInit
// 2252 {
        FUNCALL ZDApp_NetworkInit, osal_start_timerEx
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        FUNCALL ZDApp_NetworkInit, osal_set_event
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
        MOV     A,R2
        MOV     R6,A
        MOV     A,R3
        MOV     R7,A
// 2253   if ( delay )
        MOV     A,#0x0
        XRL     A,R6
        JNZ     ??ZDApp_NetworkInit_0
        MOV     A,#0x0
        XRL     A,R7
??ZDApp_NetworkInit_0:
        JZ      ??ZDApp_NetworkInit_1
// 2254   {
// 2255     // Wait awhile before starting the device
// 2256     osal_start_timerEx( ZDAppTaskID, ZDO_NETWORK_INIT, delay );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     A,R6
        MOV     R4,A
        MOV     A,R7
        MOV     R5,A
        MOV     R2,#0x1
        MOV     R3,#0x0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
        SJMP    ??ZDApp_NetworkInit_2
// 2257   }
// 2258   else
// 2259   {
// 2260     osal_set_event( ZDAppTaskID, ZDO_NETWORK_INIT );
??ZDApp_NetworkInit_1:
        ; Setup parameters for call to function osal_set_event
        MOV     R2,#0x1
        MOV     R3,#0x0
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_set_event?relay
// 2261   }
// 2262 }
??ZDApp_NetworkInit_2:
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock35
// 2263 
// 2264 /*********************************************************************
// 2265  * @fn      ZDApp_StartUpFromApp()
// 2266  *
// 2267  * @brief   Start the device.  This function will only start a device
// 2268  *          that is in the Holding state.
// 2269  *
// 2270  * @param   mode - ZDAPP_STARTUP_COORD - Start up as coordinator only
// 2271  *                 ZDAPP_STARTUP_ROUTER - Start up as router only
// 2272  *                 ZDAPP_STARTUP_AUTO - Startup in auto, look for coord,
// 2273  *                                       if not found, become coord.
// 2274  *
// 2275  * @return  TRUE if started, FALSE if in the wrong mode
// 2276  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2277 ZStatus_t ZDApp_StartUpFromApp( uint8 mode )
ZDApp_StartUpFromApp:
        CFI Block cfiBlock36 Using cfiCommon0
        CFI Function ZDApp_StartUpFromApp
// 2278 {
        FUNCALL ZDApp_StartUpFromApp, ZDOInitDevice
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 9, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 9, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0x9
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 9)
        ; Saved register size: 9
        ; Auto size: 0
// 2279   ZStatus_t ret = ZFailure;
        MOV     R7,#0x1
// 2280 
// 2281   if ( devState == DEV_HOLD )
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        JNZ     ??ZDApp_StartUpFromApp_0
// 2282   {
// 2283     // Start the device's joining process
// 2284     if ( ZDOInitDevice( 0 ) == ZDO_INITDEV_NEW_NETWORK_STATE )
        ; Setup parameters for call to function ZDOInitDevice
        MOV     R2,#0x0
        MOV     R3,#0x0
        LCALL   ??ZDOInitDevice?relay
// 2285     {
// 2286 #if defined( SOFT_START )
// 2287       if ( mode == ZDAPP_STARTUP_COORD )
// 2288       {
// 2289         devStartMode = MODE_HARD;     // Start as a coordinator
// 2290         ZDO_Config_Node_Descriptor.LogicalType = NODETYPE_COORDINATOR;
// 2291       }
// 2292       else
// 2293       {
// 2294         if ( mode == ZDAPP_STARTUP_ROUTER )
// 2295         {
// 2296           softStartAllowCoord = FALSE;  // Don't allow coord to start
// 2297           continueJoining = TRUE;
// 2298         }
// 2299         devStartMode = MODE_JOIN;     // Assume joining
// 2300       }
// 2301 #endif  // SOFT_START
// 2302     }
// 2303     ret = ZSuccess;
        MOV     R7,#0x0
// 2304   }
// 2305 
// 2306   return ( ret );
??ZDApp_StartUpFromApp_0:
        MOV     A,R7
        MOV     R1,A
        MOV     R7,#0x1
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock36
// 2307 }
// 2308 
// 2309 /*********************************************************************
// 2310  * @fn      ZDApp_StopStartUp()
// 2311  *
// 2312  * @brief   Stops the joining process of a router.  This will only
// 2313  *          work if the router is in the scanning process and
// 2314  *          the SOFT_START feature is enabled.
// 2315  *
// 2316  * @param   none
// 2317  *
// 2318  * @return  TRUE if SOFT_START is enabled, FALSE if not possible
// 2319  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2320 uint8 ZDApp_StopStartUp( void )
ZDApp_StopStartUp:
        CFI Block cfiBlock37 Using cfiCommon0
        CFI Function ZDApp_StopStartUp
// 2321 {
        ; Saved register size: 0
        ; Auto size: 0
// 2322   uint8 ret = FALSE;
        MOV     R1,#0x0
// 2323 
// 2324 #if defined( SOFT_START )
// 2325   continueJoining = FALSE;
// 2326   ret = TRUE;
// 2327 #endif  // SOFT_START
// 2328 
// 2329   return ( ret );
        LJMP    ?BRET
        CFI EndBlock cfiBlock37
// 2330 }
// 2331 
// 2332 /*********************************************************************
// 2333  * @fn      ZDApp_StartJoiningCycle()
// 2334  *
// 2335  * @brief   Starts the joining cycle of a device.  This will only
// 2336  *          continue an already started (or stopped) joining cycle.
// 2337  *
// 2338  * @param   none
// 2339  *
// 2340  * @return  TRUE if joining stopped, FALSE if joining or rejoining
// 2341  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2342 uint8 ZDApp_StartJoiningCycle( void )
ZDApp_StartJoiningCycle:
        CFI Block cfiBlock38 Using cfiCommon0
        CFI Function ZDApp_StartJoiningCycle
// 2343 {
        FUNCALL ZDApp_StartJoiningCycle, ZDApp_NetworkInit
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 2344   if ( devState == DEV_INIT || devState == DEV_NWK_DISC )
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        XRL     A,#0x1
        JZ      ??ZDApp_StartJoiningCycle_0
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        XRL     A,#0x2
        JNZ     ??ZDApp_StartJoiningCycle_1
// 2345   {
// 2346     continueJoining = TRUE;
??ZDApp_StartJoiningCycle_0:
        MOV     A,#0x1
        MOV     DPTR,#continueJoining
        MOVX    @DPTR,A
// 2347     ZDApp_NetworkInit( 0 );
        ; Setup parameters for call to function ZDApp_NetworkInit
        MOV     R2,#0x0
        MOV     R3,#0x0
        LCALL   ??ZDApp_NetworkInit?relay
// 2348 
// 2349     return ( TRUE );
        MOV     R1,#0x1
        SJMP    ??ZDApp_StartJoiningCycle_2
// 2350   }
// 2351   else
// 2352     return ( FALSE );
??ZDApp_StartJoiningCycle_1:
        MOV     R1,#0x0
??ZDApp_StartJoiningCycle_2:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock38
// 2353 }
// 2354 
// 2355 /*********************************************************************
// 2356  * @fn      ZDApp_StopJoiningCycle()
// 2357  *
// 2358  * @brief   Stops the joining or rejoining process of a device.
// 2359  *
// 2360  * @param   none
// 2361  *
// 2362  * @return  TRUE if joining stopped, FALSE if joining or rejoining
// 2363  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2364 uint8 ZDApp_StopJoiningCycle( void )
ZDApp_StopJoiningCycle:
        CFI Block cfiBlock39 Using cfiCommon0
        CFI Function ZDApp_StopJoiningCycle
// 2365 {
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 2366   if ( devState == DEV_INIT || devState == DEV_NWK_DISC )
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        XRL     A,#0x1
        JZ      ??ZDApp_StopJoiningCycle_0
        MOV     DPTR,#devState
        MOVX    A,@DPTR
        XRL     A,#0x2
        JNZ     ??ZDApp_StopJoiningCycle_1
// 2367   {
// 2368     continueJoining = FALSE;
??ZDApp_StopJoiningCycle_0:
        MOV     A,#0x0
        MOV     DPTR,#continueJoining
        MOVX    @DPTR,A
// 2369     return ( TRUE );
        MOV     R1,#0x1
        SJMP    ??ZDApp_StopJoiningCycle_2
// 2370   }
// 2371   else
// 2372     return ( FALSE );
??ZDApp_StopJoiningCycle_1:
        MOV     R1,#0x0
??ZDApp_StopJoiningCycle_2:
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock39
// 2373 }
// 2374 
// 2375 #if !defined ( ZDO_COORDINATOR ) || defined ( SOFT_START )
// 2376 /*********************************************************************
// 2377  * @fn      ZDApp_NodeProfileSync()
// 2378  *
// 2379  * @brief   Sync node with stack profile.
// 2380  *
// 2381  * @param   cfm - ZDO_NetworkDiscoveryCfm_t
// 2382  *
// 2383  * @return  none
// 2384  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2385 void ZDApp_NodeProfileSync( ZDO_NetworkDiscoveryCfm_t* cfm )
ZDApp_NodeProfileSync:
        CFI Block cfiBlock40 Using cfiCommon0
        CFI Function ZDApp_NodeProfileSync
// 2386 {
        FUNCALL ZDApp_NodeProfileSync, nwk_getNetworkDesc
        LOCFRAME ISTACK, 0, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 14, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 0, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 14, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        MOV     A,#-0xe
        LCALL   ?BANKED_ENTER_XDATA
        CFI DPH0 load(1, XDATA, add(CFA_XSP16, literal(-1)))
        CFI DPL0 load(1, XDATA, add(CFA_XSP16, literal(-2)))
        CFI ?BRET_EXT load(1, XDATA, add(CFA_XSP16, literal(-3)))
        CFI ?RET_HIGH load(1, XDATA, add(CFA_XSP16, literal(-4)))
        CFI ?RET_LOW load(1, XDATA, add(CFA_XSP16, literal(-5)))
        CFI R7 load(1, XDATA, add(CFA_XSP16, literal(-6)))
        CFI V5 load(1, XDATA, add(CFA_XSP16, literal(-7)))
        CFI V4 load(1, XDATA, add(CFA_XSP16, literal(-8)))
        CFI V3 load(1, XDATA, add(CFA_XSP16, literal(-9)))
        CFI V2 load(1, XDATA, add(CFA_XSP16, literal(-10)))
        CFI V1 load(1, XDATA, add(CFA_XSP16, literal(-11)))
        CFI V0 load(1, XDATA, add(CFA_XSP16, literal(-12)))
        CFI VB load(1, XDATA, add(CFA_XSP16, literal(-13)))
        CFI R6 load(1, XDATA, add(CFA_XSP16, literal(-14)))
        CFI CFA_SP SP+0
        CFI CFA_XSP16 add(XSP16, 14)
        ; Saved register size: 14
        ; Auto size: 0
        MOV     ?V0 + 0,R2
        MOV     ?V0 + 1,R3
// 2387   networkDesc_t* desc;
// 2388   uint16         panID;
// 2389 
// 2390   if ( ZDO_Config_Node_Descriptor.CapabilityFlags & CAPINFO_DEVICETYPE_FFD  )
        MOV     DPTR,#(ZDO_Config_Node_Descriptor + 2)
        MOVX    A,@DPTR
        MOV     C,0xE0 /* A   */.1
        JC      $+5
        LJMP    ??ZDApp_NodeProfileSync_0 & 0xFFFF
// 2391   {
// 2392     panID = BUILD_UINT16( cfm->panIdLSB, cfm->panIdMSB );
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     R3,#0x0
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R0,A
        CLR     A
        XCH     A,R0
        MOV     R1,A
        MOV     A,R0
        ADD     A,R2
        MOV     R0,A
        MOV     A,R1
        ADDC    A,R3
        MOV     R1,A
        MOV     A,R0
        MOV     R6,A
        MOV     A,R1
        MOV     R7,A
// 2393 
// 2394     desc = nwk_getNetworkDesc( cfm->extendedPANID, panID, cfm->logicalChannel );
        ; Setup parameters for call to function nwk_getNetworkDesc
        MOV     DPL,?V0 + 0
        MOV     DPH,?V0 + 1
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R1,A
        MOV     A,R6
        MOV     R4,A
        MOV     A,R7
        MOV     R5,A
        MOV     A,?V0 + 0
        ADD     A,#0x6
        MOV     R2,A
        MOV     A,?V0 + 1
        ADDC    A,#0x0
        MOV     R3,A
        LCALL   ??nwk_getNetworkDesc?relay
        MOV     ?V0 + 4,R2
        MOV     ?V0 + 5,R3
        MOV     ?V0 + 2,?V0 + 4
        MOV     ?V0 + 3,?V0 + 5
// 2395 
// 2396     if (desc != NULL)
        MOV     A,?V0 + 2
        XRL     A,#0x0
        JNZ     ??ZDApp_NodeProfileSync_1
        MOV     A,?V0 + 3
        XRL     A,#0x0
??ZDApp_NodeProfileSync_1:
        JZ      ??ZDApp_NodeProfileSync_0
// 2397     {
// 2398       if ( desc->stackProfile != zgStackProfile )
        MOV     DPL,?V0 + 2
        MOV     DPH,?V0 + 3
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        INC     DPTR
        MOVX    A,@DPTR
        MOV     R2,A
        MOV     DPTR,#zgStackProfile
        MOVX    A,@DPTR
        XRL     A,R2
        JZ      ??ZDApp_NodeProfileSync_0
// 2399       {
// 2400         ZDO_Config_Node_Descriptor.LogicalType = NODETYPE_DEVICE;
        MOV     DPTR,#ZDO_Config_Node_Descriptor
        MOVX    A,@DPTR
        ANL     A,#0xf8
        ORL     A,#0x2
        MOV     DPTR,#ZDO_Config_Node_Descriptor
        MOVX    @DPTR,A
// 2401         ZDO_Config_Node_Descriptor.CapabilityFlags = CAPINFO_DEVICETYPE_RFD | CAPINFO_POWER_AC | CAPINFO_RCVR_ON_IDLE;
        MOV     A,#0xc
        MOV     DPTR,#(ZDO_Config_Node_Descriptor + 2)
        MOVX    @DPTR,A
// 2402       }
// 2403     }
// 2404   }
// 2405 }
??ZDApp_NodeProfileSync_0:
        MOV     R7,#0x6
        LJMP    ?BANKED_LEAVE_XDATA
        CFI EndBlock cfiBlock40
// 2406 #endif
// 2407 
// 2408 /*********************************************************************
// 2409  * @fn      ZDApp_CoordStartPANIDConflictCB()
// 2410  *
// 2411  * @brief   Returns a PAN ID for the network layer to use during
// 2412  *          a coordinator start and there is another network with 
// 2413  *          the intended PANID.
// 2414  *
// 2415  * @param   panid - the intended PAN ID
// 2416  *
// 2417  * @return  PANID to try
// 2418  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2419 uint16 ZDApp_CoordStartPANIDConflictCB( uint16 panid )
ZDApp_CoordStartPANIDConflictCB:
        CFI Block cfiBlock41 Using cfiCommon0
        CFI Function ZDApp_CoordStartPANIDConflictCB
// 2420 {
        ; Saved register size: 0
        ; Auto size: 0
// 2421   return ( (panid + 1) & 0x3FFF );
        MOV     A,#0x1
        ADD     A,R2
        MOV     R0,A
        MOV     A,#0x0
        ADDC    A,R3
        MOV     R1,A
        MOV     A,#-0x1
        ANL     A,R0
        MOV     R2,A
        MOV     A,#0x3f
        ANL     A,R1
        MOV     R3,A
        LJMP    ?BRET
        CFI EndBlock cfiBlock41
// 2422 }
// 2423 
// 2424 
// 2425 /*********************************************************************
// 2426  * @fn          ZDApp_NVUpdate
// 2427  *
// 2428  * @brief       Set the NV Update Timer.
// 2429  *
// 2430  * @param       none
// 2431  *
// 2432  * @return      none
// 2433  */

        RSEG BANKED_CODE:CODE:NOROOT(0)
// 2434 void ZDApp_NVUpdate( void )
ZDApp_NVUpdate:
        CFI Block cfiBlock42 Using cfiCommon0
        CFI Function ZDApp_NVUpdate
// 2435 {
        FUNCALL ZDApp_NVUpdate, osal_start_timerEx
        LOCFRAME ISTACK, 2, STACK
        LOCFRAME PSTACK, 0, STACK
        LOCFRAME XSTACK, 0, STACK
        LOCFRAME IOVERLAY, 0, STATIC
        LOCFRAME DOVERLAY, 0, STATIC
        ARGFRAME ISTACK, 2, STACK
        ARGFRAME PSTACK, 0, STACK
        ARGFRAME XSTACK, 0, STACK
        ARGFRAME IOVERLAY, 0, STATIC
        ARGFRAME DOVERLAY, 0, STATIC
        PUSH    DPL
        CFI DPL0 Frame(CFA_SP, 4)
        CFI CFA_SP SP+-4
        PUSH    DPH
        CFI DPH0 Frame(CFA_SP, 5)
        CFI CFA_SP SP+-5
        ; Saved register size: 2
        ; Auto size: 0
// 2436   osal_start_timerEx( ZDAppTaskID, ZDO_NWK_UPDATE_NV, ZDAPP_UPDATE_NWK_NV_TIME );
        ; Setup parameters for call to function osal_start_timerEx
        MOV     R4,#-0x44
        MOV     R5,#0x2
        MOV     R2,#0x0
        MOV     R3,#0x2
        MOV     DPTR,#ZDAppTaskID
        MOVX    A,@DPTR
        MOV     R1,A
        LCALL   ??osal_start_timerEx?relay
// 2437 }
        POP     DPH
        CFI DPH0 SameValue
        CFI CFA_SP SP+-4
        POP     DPL
        CFI DPL0 SameValue
        CFI CFA_SP SP+-3
        LJMP    ?BRET
        CFI EndBlock cfiBlock42

        RSEG XDATA_ID:CODE:NOROOT(0)
        DATA
`?<Initializer for zdoDiscCounter>`:
        DB 1

        RSEG XDATA_ID:CODE:NOROOT(0)
        DATA
`?<Initializer for continueJoining>`:
        DB 1

        RSEG XDATA_ID:CODE:NOROOT(0)
        DATA
`?<Initializer for devState>`:
        DB 1

        RSEG XDATA_ID:CODE:NOROOT(0)
        DATA
`?<Initializer for ZDApp_epDesc>`:
        DB 0
        DW ZDAppTaskID, 0H
        DB 0

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_Init?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_Init

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_SecInit?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_SecInit

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_event_loop?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_event_loop

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDOInitDevice?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDOInitDevice

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_ReadNetworkRestoreState?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_ReadNetworkRestoreState

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDAppDetermineDeviceType?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDAppDetermineDeviceType

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_NetworkStartEvt?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_NetworkStartEvt

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_SaveNetworkStateEvt?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_SaveNetworkStateEvt

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_RestoreNetworkState?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_RestoreNetworkState

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_InitUserDesc?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_InitUserDesc

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDAppCheckForHoldKey?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDAppCheckForHoldKey

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_ProcessOSALMsg?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_ProcessOSALMsg

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_ProcessMsgCBs?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_ProcessMsgCBs

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_RegisterCBs?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_RegisterCBs

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_ProcessNetworkJoin?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_ProcessNetworkJoin

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_ResetTimerStart?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_ResetTimerStart

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_ResetTimerCancel?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_ResetTimerCancel

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_LeaveCtrlInit?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_LeaveCtrlInit

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_LeaveCtrlSet?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_LeaveCtrlSet

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_LeaveCtrlBypass?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_LeaveCtrlBypass

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_LeaveCtrlStartup?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_LeaveCtrlStartup

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_LeaveReset?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_LeaveReset

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_LeaveUpdate?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_LeaveUpdate

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_SendEventMsg?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_SendEventMsg

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_SendMsg?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_SendMsg

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDO_NetworkDiscoveryConfirmCB?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDO_NetworkDiscoveryConfirmCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDO_NetworkFormationConfirmCB?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDO_NetworkFormationConfirmCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDO_JoinConfirmCB?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDO_JoinConfirmCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDO_LeaveCnf?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDO_LeaveCnf

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDO_LeaveInd?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDO_LeaveInd

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDO_SyncIndicationCB?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDO_SyncIndicationCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDO_PollConfirmCB?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDO_PollConfirmCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??AddrMgrWriteNVRequest?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    AddrMgrWriteNVRequest

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_InMsgCB?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_InMsgCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_ChangeMatchDescRespPermission?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_ChangeMatchDescRespPermission

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_NetworkInit?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_NetworkInit

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_StartUpFromApp?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_StartUpFromApp

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_StopStartUp?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_StopStartUp

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_StartJoiningCycle?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_StartJoiningCycle

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_StopJoiningCycle?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_StopJoiningCycle

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_NodeProfileSync?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_NodeProfileSync

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_CoordStartPANIDConflictCB?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_CoordStartPANIDConflictCB

        RSEG BANK_RELAYS:CODE:REORDER:NOROOT(0)
??ZDApp_NVUpdate?relay:
        LCALL   ?BDISPATCH
        DATA
        DC24    ZDApp_NVUpdate

        END
// 2438 
// 2439 
// 2440 /*********************************************************************
// 2441 *********************************************************************/
// 
// 3 774 bytes in segment BANKED_CODE
//   258 bytes in segment BANK_RELAYS
//     2 bytes in segment SFR_AN
//     9 bytes in segment XDATA_I
//     9 bytes in segment XDATA_ID
//    17 bytes in segment XDATA_Z
// 
// 4 041 bytes of CODE  memory
//     0 bytes of DATA  memory (+ 2 bytes shared)
//    26 bytes of XDATA memory
//
//Errors: none
//Warnings: none
